(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{92101:function(e,n,t){Promise.resolve().then(t.bind(t,22536)),Promise.resolve().then(t.bind(t,99515)),Promise.resolve().then(t.bind(t,35621)),Promise.resolve().then(t.bind(t,12678)),Promise.resolve().then(t.bind(t,28344)),Promise.resolve().then(t.bind(t,1261)),Promise.resolve().then(t.bind(t,4056)),Promise.resolve().then(t.bind(t,58071)),Promise.resolve().then(t.t.bind(t,58631,23))},22536:function(e,n,t){"use strict";t.r(n),t.d(n,{ArrowTypeSelector:function(){return h}});var r=t(14297),a=t(16152),o=t(17359),l=t(99592),i=t(82278),s=t(59143),c=t(30178),d=t(65807),u=t(38503),p=t(71334);function h(e){let{currentArrowType:n,onArrowTypeChange:t}=e;return(0,r.jsxs)(o.v,{children:[(0,r.jsx)(l.j,{className:"arrow-type-selector-button",as:i.h,"aria-label":"Select arrow type",icon:(0,r.jsx)(a.v,{}),size:"xs",variant:"outline",bg:"white",border:"1px solid",borderColor:"gray.300",_hover:{bg:"gray.50"}}),(0,r.jsx)(s.h,{children:(0,r.jsx)(c.q,{bg:"white",boxShadow:"lg",border:"1px solid",borderColor:"gray.200",children:p.ab.map(e=>(0,r.jsx)(d.sN,{onClick:()=>t(e),bg:n===e?"blue.50":"white",color:n===e?"blue.600":"gray.700",fontSize:"sm",children:(0,u.RG)(e)},e))})})]})}},99515:function(e,n,t){"use strict";t.r(n),t.d(n,{EdgeContent:function(){return x},EditableEdge:function(){return g}});var r=t(14297),a=t(23038),o=t(58071),l=t(59244),i=t(84922),s=t(63475),c=t(91861),d=t(82278),u=t(13812),p=t(38503),h=t(22536);function x(e){let{id:n,labelX:t,labelY:a,data:o}=e,[x,g]=(0,u.useState)(!1),[b,f]=(0,u.useState)((null==o?void 0:o.label)||""),[m,C]=(0,u.useState)(!1),y=(0,u.useRef)(null);(0,u.useEffect)(()=>{x&&y.current&&(y.current.focus(),y.current.select())},[x]);let w=()=>{g(!1),(null==o?void 0:o.onLabelChange)&&o.onLabelChange(n,b)};return(0,r.jsx)(i.x,{position:"absolute",transform:"translate(-50%, -50%) translate(".concat(t,"px,").concat(a,"px)"),pointerEvents:"all",className:"nodrag nopan",children:x?(0,r.jsx)(s.I,{ref:y,value:b,onChange:e=>f(e.target.value),onKeyDown:e=>{"Enter"!==e.key||m?"Escape"===e.key&&(g(!1),f((null==o?void 0:o.label)||"")):w()},onBlur:()=>{w()},onCompositionStart:()=>{C(!0)},onCompositionEnd:()=>{C(!1)},size:"sm",w:"120px",bg:"white",border:"1px solid",borderColor:"gray.300",fontSize:"12px",textAlign:"center"}):(0,r.jsxs)(c.Ug,{gap:"1",align:"center",children:[(0,r.jsxs)(i.x,{onClick:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},bg:"white",p:"1",px:"2",borderRadius:"md",fontSize:"xs",border:"1px solid",borderColor:"gray.300",cursor:"pointer",minW:"20px",textAlign:"center",display:"flex",alignItems:"center",gap:"1",children:[(0,r.jsx)(i.x,{as:"span",color:"blue.600",fontWeight:"bold",children:(0,p.wL)((null==o?void 0:o.arrowType)||"arrow")}),(0,r.jsx)(i.x,{as:"span",children:b||"..."})]}),(0,r.jsx)(h.ArrowTypeSelector,{currentArrowType:(null==o?void 0:o.arrowType)||"arrow",onArrowTypeChange:e=>{(null==o?void 0:o.onArrowTypeChange)&&o.onArrowTypeChange(n,e)}}),(0,r.jsx)(d.h,{"aria-label":"Delete edge",icon:(0,r.jsx)(l.X,{}),size:"xs",variant:"ghost",colorScheme:"red",onClick:e=>{e.preventDefault(),e.stopPropagation(),(null==o?void 0:o.onDelete)&&o.onDelete(n)},bg:"white",border:"1px solid",borderColor:"red.300",_hover:{bg:"red.50"}})]})})}function g(e){let{id:n,sourceX:t,sourceY:l,targetX:i,targetY:s,sourcePosition:c,targetPosition:d,data:u,markerEnd:p}=e,[h,g,b]=(0,a.OQ)({sourceX:t,sourceY:l,sourcePosition:c,targetX:i,targetY:s,targetPosition:d});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.BaseEdge,{path:h,markerEnd:p}),(0,r.jsx)(o.EdgeLabelRenderer,{children:(0,r.jsx)(x,{id:n,labelX:g,labelY:b,data:u})})]})}},35621:function(e,n,t){"use strict";t.r(n),t.d(n,{FlowEditor:function(){return S}});var r=t(14297),a=t(58071),o=t(23038),l=t(31087),i=t(26451),s=t(84922),c=t(13812),d=t(38503),u=t(14585),p=t(79780),h=t(82278),x=t(8785);let g=()=>(0,r.jsx)(a.Panel,{position:"bottom-right",children:(0,r.jsx)(b,{})}),b=()=>(0,r.jsx)(h.h,{icon:(0,r.jsx)(p.E,{}),size:"sm",as:x.r,href:"https://github.com/illionillion/mermaid-editor",target:"_blank",rel:"noopener noreferrer",display:"flex",alignItems:"center",gap:1,fontSize:"sm",bg:"gray.600",color:"white",_hover:{bg:"black",textDecoration:"none"}}),f={editableEdge:t(99515).EditableEdge};function m(e,n,t){return{id:e.toString(),type:"editableNode",position:n,data:{label:"Node ".concat(e),variableName:"node".concat(e),shapeType:"rectangle",...t}}}var C=t(12678),y=t(28344);t(1261),t(4056);let w={editableNode:y.EditableNode},j={LEVEL_HEIGHT:150,NODE_SPACING:250,CENTER_OFFSET:300,VERTICAL_OFFSET:50},v=[{id:"1",type:"editableNode",position:{x:250,y:5},data:{label:"Start",variableName:"startNode",shapeType:"rectangle"}}],E=[];function S(){let[e,n,t]=(0,a.useNodesState)(v),[p,h,x]=(0,a.useEdgesState)(E),[b,y]=(0,c.useState)(2),{open:S,onOpen:F,onClose:T}=(0,l.useDisclosure)(),[k,A]=(0,c.useState)(""),N=(0,c.useRef)(null),{screenToFlowPosition:z}=(0,a.useReactFlow)(),D=(0,i.useToken)("sizes","xs"),_=(0,i.useToken)("sizes","6xs"),L=(e,n)=>{if(!e)return n;let t=parseFloat(e.replace("px","").replace("rem",""));return isNaN(t)?n:e.includes("rem")?16*t:t},R=L(D,80),I=L(_,48),P=(0,c.useCallback)((e,t)=>{n(n=>n.map(n=>n.id===e?{...n,data:{...n.data,label:t}}:n))},[n]),O=(0,c.useCallback)((e,t)=>{n(n=>n.map(n=>n.id===e?{...n,data:{...n.data,variableName:t}}:n))},[n]),M=(0,c.useCallback)((e,t)=>{n(n=>n.map(n=>n.id===e?{...n,data:{...n.data,shapeType:t}}:n))},[n]),$=(0,c.useCallback)(e=>{n(n=>n.filter(n=>n.id!==e)),h(n=>n.filter(n=>n.source!==e&&n.target!==e))},[n,h]),B=(0,c.useCallback)((e,n)=>{h(t=>t.map(t=>t.id===e?{...t,data:{...t.data,label:n}}:t))},[h]),Z=(0,c.useCallback)(e=>{h(n=>n.filter(n=>n.id!==e))},[h]),V=(0,c.useCallback)((e,n)=>{h(t=>t.map(t=>t.id===e?{...t,data:{...t.data,arrowType:n}}:t))},[h]);(0,c.useEffect)(()=>{n(e=>e.map(e=>({...e,data:{...e.data,onLabelChange:P,onVariableNameChange:O,onShapeTypeChange:M,onDelete:$}})))},[P,O,M,$,n]),(0,c.useEffect)(()=>{h(e=>e.map(e=>({...e,type:"editableEdge",data:{...e.data,onLabelChange:B,onArrowTypeChange:V,onDelete:Z}})))},[B,V,Z,h]);let H=(0,c.useCallback)(e=>{let n={...e,type:"editableEdge",data:{label:"",arrowType:"arrow",onLabelChange:B,onArrowTypeChange:V,onDelete:Z}};h(e=>(0,o.Z_)(n,e)),N.current="connected"},[h,B,V,Z]),G=(0,c.useCallback)((e,n)=>{N.current=n.nodeId,N.current="".concat(n.nodeId,"-").concat(n.handleType)},[]),U=(0,c.useCallback)(t=>{var r,a,o,l;if(N.current){if("connected"===N.current){N.current=null;return}if((null==t?void 0:null===(a=t.target)||void 0===a?void 0:null===(r=a.classList)||void 0===r?void 0:r.contains("react-flow__pane"))&&t){let{sourceNodeId:r,handleType:a}=function(e){let[n,t]=e.split("-");return{sourceNodeId:n,handleType:t}}(N.current);if(!e.find(e=>e.id===r))return;let i=m(b,{x:(o=z({x:t.clientX,y:t.clientY})).x-R/2,y:o.y-I/2},{onLabelChange:P,onVariableNameChange:O,onShapeTypeChange:M,onDelete:$});n(e=>e.concat(i));let s=(l=b.toString(),{id:"".concat(r,"-").concat(l),type:"editableEdge",source:"source"===a?r:l,target:"source"===a?l:r,data:{label:"",arrowType:"arrow",onLabelChange:B,onArrowTypeChange:V,onDelete:Z}});h(e=>[...e,s]),y(b+1)}N.current=null}},[b,n,h,z,P,O,M,$,B,V,Z,e,R,I]),W=(0,c.useCallback)(()=>{let e=m(b,{x:500*Math.random(),y:500*Math.random()},{onLabelChange:P,onVariableNameChange:O,onShapeTypeChange:M,onDelete:$});n(n=>n.concat(e)),y(b+1)},[b,n,P,O,M,$]),K=(0,c.useCallback)(()=>{A((0,d.LC)({nodes:e,edges:p})),F()},[e,p,F]),Y=(0,c.useCallback)(e=>{let t=((e,n)=>{let t=new Set(n.map(e=>e.target)),r=e.filter(e=>!t.has(e.id)),a=new Map,o=new Set,l=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(o.has(e))return;o.add(e);let i=null!==(t=a.get(e))&&void 0!==t?t:0;a.set(e,Math.max(i,r)),n.filter(n=>n.source===e).forEach(e=>{l(e.target,r+1)})};r.forEach(e=>l(e.id,0)),e.forEach(e=>{a.has(e.id)||a.set(e.id,0)});let i=new Map;a.forEach((e,n)=>{i.has(e)||i.set(e,[]),i.get(e).push(n)});let s=new Map;return i.forEach((e,n)=>{let t=-(e.length*j.NODE_SPACING)/2;e.forEach((e,r)=>{s.set(e,{x:t+r*j.NODE_SPACING+j.CENTER_OFFSET,y:n*j.LEVEL_HEIGHT+j.VERTICAL_OFFSET})})}),s})(e.nodes,e.edges),r=e.nodes.map(e=>({id:e.id,type:"editableNode",position:t.get(e.id)||{x:250,y:50},data:{label:e.label,variableName:e.variableName,shapeType:e.shapeType,onLabelChange:P,onVariableNameChange:O,onShapeTypeChange:M,onDelete:$}})),a=e.edges.map(e=>({id:e.id,source:e.source,target:e.target,type:"editableEdge",data:{label:e.label,arrowType:e.arrowType,onLabelChange:B,onArrowTypeChange:V,onDelete:Z}}));n(r),h(a),y(e.nodes.length+1)},[n,h,b,P,O,M,$,B,V,Z]);return(0,r.jsxs)(s.x,{h:"100vh",w:"full",children:[(0,r.jsxs)(a.ReactFlow,{nodes:e,edges:p,onNodesChange:t,onEdgesChange:x,onConnect:H,onConnectStart:G,onConnectEnd:U,nodeTypes:w,edgeTypes:f,fitView:!0,children:[(0,r.jsx)(a.Controls,{}),(0,r.jsx)(a.Background,{}),(0,r.jsx)(C.FlowPanel,{onAddNode:W,onGenerateCode:K,onImportMermaid:Y}),(0,r.jsx)(g,{})]}),(0,r.jsx)(u._v,{open:S,onClose:T,mermaidCode:k})]})}},12678:function(e,n,t){"use strict";t.r(n),t.d(n,{FlowPanel:function(){return h},PanelContent:function(){return x}});var r=t(14297),a=t(58071),o=t(11253),l=t(26026),i=t(30365),s=t(31087),c=t(91861),d=t(90813),u=t(81710),p=t(14585);function h(e){let{onAddNode:n,onGenerateCode:t,onImportMermaid:o}=e;return(0,r.jsx)(a.Panel,{position:"top-left",children:(0,r.jsx)(x,{onAddNode:n,onGenerateCode:t,onImportMermaid:o})})}function x(e){let{onAddNode:n,onGenerateCode:t,onImportMermaid:a}=e,{isOpen:h,onOpen:x,onClose:g}=(0,s.useDisclosure)();return(0,r.jsxs)(c.gC,{gap:4,p:4,bg:"white",borderRadius:"md",boxShadow:"md",children:[(0,r.jsx)(d.x,{fontSize:"lg",fontWeight:"bold",children:"Mermaid フローチャート エディター"}),(0,r.jsxs)(c.gC,{gap:2,align:"start",children:[(0,r.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:"\uD83D\uDCA1 ヒント: ノードをダブルクリックで編集、ドラッグして空の場所で新ノード作成"}),(0,r.jsxs)(c.Ug,{gap:2,display:{base:"flex",md:"inline-flex"},flexWrap:"wrap",children:[(0,r.jsx)(u.z,{startIcon:(0,r.jsx)(o.p,{}),colorScheme:"blue",size:"sm",onClick:n,children:"ノード追加"}),(0,r.jsx)(u.z,{startIcon:(0,r.jsx)(l.d,{}),colorScheme:"green",size:"sm",onClick:t,children:"コード生成"}),(0,r.jsx)(u.z,{startIcon:(0,r.jsx)(i.r,{}),colorScheme:"purple",size:"sm",onClick:x,children:"インポート"})]})]}),(0,r.jsx)(p.ZO,{isOpen:h,onClose:g,onImport:a})]})}},14585:function(e,n,t){"use strict";t.d(n,{_v:function(){return E},ZO:function(){return N}});var r=t(14297),a=t(84922),o=t(4699),l=t(60970);function i(e){let{code:n,showLineNumbers:t=!0,minHeight:i="400px",fontSize:s="14px"}=e;return(0,r.jsx)(a.x,{w:"full",borderRadius:"md",overflow:"hidden",border:"1px solid",borderColor:"border",children:(0,r.jsx)(o.Z,{language:"mermaid",style:l.Z,showLineNumbers:t,customStyle:{margin:0,fontSize:s,minHeight:i},children:n})})}var s=t(74006),c=t(97981),d=t(80677),u=t(91861),p=t(90813),h=t(81710),x=t(31542),g=t(15213),b=t(13812),f=t(29586),m=t(11677),C=t(91255),y=t(38614),w=t(23026),j=t(82278);let v=(0,b.memo)((0,C.forwardRef)((e,n)=>{let{value:t,...a}=e,{hasCopied:o,onCopy:l}=(0,y.useClipboard)(t);return(0,r.jsx)(w.u,{alignItems:"center",bg:"success",display:"inline-flex",h:"8",open:o,label:"Copied!",placement:"left",zIndex:"1000",children:(0,r.jsx)(j.h,{ref:n,size:"sm",variant:"unstyled","aria-label":"Copy the code",alignItems:"center",bg:["neutral.800","neutral.900"],border:"1px solid",borderColor:o?"success":"whiteAlpha.600",color:o?"success":"whiteAlpha.600",display:"flex",icon:o?(0,r.jsx)(f.n,{fontSize:"lg"}):(0,r.jsx)(m.T,{fontSize:"md"}),justifyContent:"center",_hover:{borderColor:o?"success":"whiteAlpha.800",color:o?"success":"whiteAlpha.800"},...a,onClick:l})})}));function E(e){let{open:n,onClose:t,mermaidCode:a}=e,o=(0,b.useCallback)(()=>{let e=document.createElement("a"),n=new Blob([a],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="flowchart.mmd",document.body.appendChild(e),e.click(),document.body.removeChild(e)},[a]);return(0,r.jsxs)(c.u,{open:n,onClose:t,size:"2xl",children:[(0,r.jsx)(d.x,{children:(0,r.jsxs)(u.Ug,{justify:"space-between",children:[(0,r.jsx)(p.x,{children:"生成されたMermaidコード"}),(0,r.jsx)(h.z,{startIcon:(0,r.jsx)(s._,{}),colorScheme:"blue",size:"sm",onClick:o,children:"ダウンロード"})]})}),(0,r.jsx)(x.o,{}),(0,r.jsxs)(g.f,{pb:6,position:"relative",children:[(0,r.jsx)(v,{value:a,position:"absolute",top:2,right:6,zIndex:1}),(0,r.jsx)(i,{code:a})]})]})}var S=t(23847),F=t(81301),T=t(28555),k=t(19247),A=t(38503);function N(e){let{isOpen:n,onClose:t,onImport:a}=e,[o,l]=(0,b.useState)(""),[i,s]=(0,b.useState)(null),[x,f]=(0,b.useState)(!1),m=async()=>{if(!o.trim()){s("Mermaidコードを入力してください");return}f(!0),s(null);try{let e=(0,A.LY)(o);if(0===e.nodes.length&&0===e.edges.length){s("有効なMermaidコードが見つかりませんでした。ノードまたはエッジの定義を確認してください。");return}a(e),l(""),t()}catch(e){s("Mermaidコードの解析中にエラーが発生しました"),console.error("Import error:",e)}finally{f(!1)}},C=()=>{l(""),s(null),t()};return(0,r.jsxs)(c.u,{open:n,onClose:C,size:"2xl",children:[(0,r.jsx)(S.Z,{}),(0,r.jsx)(d.x,{children:"Mermaidコードインポート"}),(0,r.jsx)(g.f,{children:(0,r.jsxs)(u.gC,{gap:4,children:[(0,r.jsx)(p.x,{fontSize:"sm",color:"gray.600",children:"Mermaidのフローチャートコードを貼り付けてインポートできます"}),(0,r.jsx)(F.g,{value:o,onChange:e=>{l(e.target.value),s(null)},placeholder:"例:\n".concat("flowchart TD\n    A[開始] --> B{判定}\n    B -->|はい| C[処理A]\n    B -->|いいえ| D[処理B]\n    C --> E[終了]\n    D --> E"),rows:10,resize:"vertical"}),i&&(0,r.jsxs)(T.bZ,{status:"error",children:[(0,r.jsx)(T.zM,{}),(0,r.jsx)(T.X,{children:i})]}),(0,r.jsx)(p.x,{fontSize:"xs",color:"gray.500",children:"\uD83D\uDCA1 対応しているノード形状: 四角形[label], ダイヤモンド{label}, 円((label)), 六角形{{label}}, スタジアム([label]), 角丸(label)"})]})}),(0,r.jsxs)(k.m,{children:[(0,r.jsx)(h.z,{onClick:C,children:"キャンセル"}),(0,r.jsx)(h.z,{colorScheme:"blue",onClick:m,loading:x,loadingText:"インポート中...",disabled:!o.trim(),children:"インポート"})]})]})}},28344:function(e,n,t){"use strict";t.r(n),t.d(n,{EditableNode:function(){return g},NodeContent:function(){return b}});var r=t(14297),a=t(58071),o=t(23038),l=t(84922),i=t(13812),s=t(63475),c=t(90813);function d(e){let{value:n,isEditing:t,onDoubleClick:a,onChange:o,onKeyDown:l,onCompositionStart:i,onCompositionEnd:d,onBlur:u}=e;return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)(s.I,{value:n,onChange:o,onKeyDown:l,onCompositionStart:i,onCompositionEnd:d,onBlur:u,size:"sm",autoFocus:!0,textAlign:"center",w:"full",h:"24px",p:1,fontSize:"sm",border:"none",bg:"transparent",_focus:{boxShadow:"none",outline:"none"}}):(0,r.jsx)(c.x,{w:"full",fontSize:"sm",fontWeight:"medium",wordBreak:"break-word",lineHeight:"1.2",onDoubleClick:a,children:n})})}var u=t(38503);function p(e){let{value:n,isEditing:t,shapeType:a,onClick:o,onChange:i,onKeyDown:c,onCompositionStart:d,onCompositionEnd:p,onBlur:h}=e,x=(0,u.oq)(a||"rectangle",n);return(0,r.jsx)(l.x,{position:"absolute",top:"-12px",left:"0px",bg:"blue.500",color:"white",px:1,py:"1px",borderRadius:"sm",fontSize:"10px",fontWeight:"medium",cursor:"pointer",onClick:o,_hover:{bg:"blue.600"},zIndex:10,children:t?(0,r.jsx)(s.I,{value:n,onChange:i,onKeyDown:c,onCompositionStart:d,onCompositionEnd:p,onBlur:h,size:"xs",autoFocus:!0,w:"60px",h:"16px",p:0,fontSize:"10px",bg:"white",color:"black",border:"none",_focus:{boxShadow:"none",outline:"none"}}):x})}var h=t(71334),x=t(1261);function g(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{...e}),(0,r.jsx)(a.Handle,{type:"target",position:o.Ly.Top}),(0,r.jsx)(a.Handle,{type:"source",position:o.Ly.Bottom})]})}function b(e){let{data:n,id:t}=e,[a,o]=(0,i.useState)(!1),[s,c]=(0,i.useState)(!1),[u,g]=(0,i.useState)(n.label),[b,f]=(0,i.useState)(n.variableName||"node".concat(t)),[m,C]=(0,i.useState)(!1),y=(0,i.useRef)(0),w=()=>{Date.now()-y.current<h.vR.DOUBLE_CLICK_THRESHOLD||(s&&v(),o(!0))},j=()=>{o(!1),n.onLabelChange&&n.onLabelChange(t,u)},v=()=>{c(!1),n.onVariableNameChange&&n.onVariableNameChange(t,b)},E=()=>{o(!1),g(n.label)},S=()=>{c(!1),f(n.variableName||"node".concat(t))},F=()=>{C(!0)},T=()=>{C(!1)};return(0,r.jsxs)(l.x,{bg:"white",border:"2px solid #1a365d",borderRadius:"md",p:2,w:"xs",minH:"6xs",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",onDoubleClick:w,_hover:{boxShadow:"md"},position:"relative",children:[(0,r.jsx)(p,{value:b,isEditing:s,shapeType:n.shapeType,onClick:e=>{e.stopPropagation(),e.preventDefault(),y.current=Date.now(),a&&j(),c(!0)},onChange:e=>{f(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||m?"Escape"===e.key&&S():v()},onCompositionStart:F,onCompositionEnd:T,onBlur:v}),(0,r.jsx)(x.NodeMenu,{onDelete:()=>{n.onDelete&&n.onDelete(t)},onEdit:()=>{s&&v(),o(!0)},onEditVariableName:()=>{a&&j(),c(!0)},onShapeChange:e=>{var r;null===(r=n.onShapeTypeChange)||void 0===r||r.call(n,t,e)},currentShape:n.shapeType||"rectangle"}),(0,r.jsx)(d,{value:u,isEditing:a,onDoubleClick:w,onChange:e=>{g(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||m?"Escape"===e.key&&E():j()},onCompositionStart:F,onCompositionEnd:T,onBlur:j})]})}},1261:function(e,n,t){"use strict";t.r(n),t.d(n,{NodeMenu:function(){return g}});var r=t(14297),a=t(20524),o=t(52838),l=t(66959),i=t(83162),s=t(17359),c=t(99592),d=t(82278),u=t(30178),p=t(65807),h=t(34310),x=t(4056);let g=e=>{let{onEdit:n,onEditVariableName:t,onDelete:g,onShapeChange:b,currentShape:f}=e;return(0,r.jsxs)(s.v,{children:[(0,r.jsx)(c.j,{size:"xs",position:"absolute",top:0,right:0,as:d.h,icon:(0,r.jsx)(a.J,{fontSize:"2xl"}),variant:"ghost"}),(0,r.jsxs)(u.q,{children:[(0,r.jsx)(p.sN,{icon:(0,r.jsx)(o.V,{fontSize:"xl"}),onClick:n,children:"ラベル編集"}),(0,r.jsx)(p.sN,{icon:(0,r.jsx)(l.l,{fontSize:"xl"}),onClick:t,children:"変数名編集"}),(0,r.jsx)(h.C,{}),(0,r.jsx)(x.ShapeSelector,{currentShape:f,onShapeChange:b}),(0,r.jsx)(h.C,{}),(0,r.jsx)(p.sN,{color:"danger",icon:(0,r.jsx)(i.X,{fontSize:"xl",color:"danger"}),onClick:g,children:"削除"})]})]})}},4056:function(e,n,t){"use strict";t.r(n),t.d(n,{ShapeSelector:function(){return p}});var r=t(14297),a=t(40197),o=t(17359),l=t(99592),i=t(65807),s=t(30178),c=t(84922),d=t(90813),u=t(71334);let p=e=>{let{currentShape:n,onShapeChange:t}=e;return(0,r.jsxs)(o.v,{children:[(0,r.jsx)(l.j,{as:i.sN,icon:(0,r.jsx)(a.o,{fontSize:"xl"}),children:"ノード形状"}),(0,r.jsx)(s.q,{children:u.eJ.map(e=>(0,r.jsx)(i.sN,{onClick:()=>null==t?void 0:t(e.type),bg:n===e.type?"primary.50":void 0,children:(0,r.jsxs)(c.x,{display:"flex",alignItems:"center",justifyContent:"space-between",w:"full",children:[(0,r.jsx)(d.x,{children:e.label}),(0,r.jsx)(d.x,{fontSize:"sm",color:"muted",fontFamily:"mono",children:e.symbol})]})},e.type))})]})}},71334:function(e,n,t){"use strict";t.d(n,{ab:function(){return a},eJ:function(){return o},vR:function(){return r}});let r={DOUBLE_CLICK_THRESHOLD:300,DEBOUNCE_DELAY:150,IME_COMPOSITION_DELAY:100},a=["arrow","thick","dotted","invisible","bidirectional","bidirectional-thick"],o=[{type:"rectangle",label:"四角形",symbol:"[ ]"},{type:"diamond",label:"菱形",symbol:"{ }"},{type:"rounded",label:"角丸四角",symbol:"( )"},{type:"circle",label:"円形",symbol:"(( ))"},{type:"hexagon",label:"六角形",symbol:"{{ }}"},{type:"stadium",label:"スタジアム",symbol:"([ ])"}]},38503:function(e,n,t){"use strict";t.d(n,{LC:function(){return d},LY:function(){return u},RG:function(){return c},oq:function(){return o},wL:function(){return s}});let r=new Set(["end","start","subgraph","class","classDef","click","style","linkStyle","direction","flowchart","graph","if","else","elseif","while","for","function","return","break","continue"]),a=e=>{if(!e||""===e.trim())return"node_unnamed";let n=e.trim();return r.has(n.toLowerCase())&&(n="node_".concat(n)),/^[0-9]/.test(n)&&(n="_".concat(n)),n=(n=n.replace(/\s+/g,"_")).replace(/[^\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/g,"_")},o=(e,n)=>{switch(e){case"rectangle":default:return"[".concat(n,"]");case"diamond":return"{".concat(n,"}");case"rounded":return"(".concat(n,")");case"circle":return"((".concat(n,"))");case"hexagon":return"{{".concat(n,"}}");case"stadium":return"([".concat(n,"])")}},l=e=>e&&""!==e.trim()?/^\d+$/.test(e.trim())?e.trim():/^[a-zA-Z0-9\-_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF\s]+$/.test(e)?e:'"'.concat(e.replace(/"/g,'\\"'),'"'):e,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"arrow",n=arguments.length>1?arguments[1]:void 0,t=n&&""!==n.trim(),r=t?l(n):"";switch(e){case"arrow":default:return t?" -->|".concat(r,"| "):" --> ";case"thick":return t?" ==>|".concat(r,"| "):" ==> ";case"dotted":return t?" -. ".concat(r," .-> "):" -.-> ";case"invisible":return t?" ~~~|".concat(r,"| "):" ~~~ ";case"bidirectional":return t?" <-->|".concat(r,"| "):" <--> ";case"bidirectional-thick":return t?" <==".concat(r,"==> "):" <==> "}},s=e=>{switch(e){case"arrow":default:return"→";case"thick":return"⇒";case"dotted":return"⇢";case"invisible":return"～";case"bidirectional":return"↔";case"bidirectional-thick":return"⇔"}},c=e=>{switch(e){case"arrow":default:return"通常の矢印 (->)";case"thick":return"太い矢印 (==>)";case"dotted":return"点線矢印 (-.->)";case"invisible":return"非表示 (~~~)";case"bidirectional":return"双方向矢印 (<->)";case"bidirectional-thick":return"太い双方向矢印 (<==>)"}},d=e=>{let n="flowchart TD\n";return e.nodes.forEach(e=>{let t=a(e.data.variableName||"node".concat(e.id)),r=o(e.data.shapeType||"rectangle",e.data.label||"");n+="    ".concat(t).concat(r,"\n")}),e.edges.forEach(t=>{let r=e.nodes.find(e=>e.id===t.source),o=e.nodes.find(e=>e.id===t.target);if(r&&o){var l,s;let e=a(r.data.variableName||"node".concat(r.id)),c=a(o.data.variableName||"node".concat(o.id)),d=null===(l=t.data)||void 0===l?void 0:l.label,u=i((null===(s=t.data)||void 0===s?void 0:s.arrowType)||"arrow",d);n+="    ".concat(e).concat(u).concat(c,"\n")}}),n},u=e=>{let n={nodes:[],edges:[]};if(!e||""===e.trim())return n;let t=e.split("\n").map(e=>e.trim()).filter(e=>e).filter(e=>!e.startsWith("flowchart")&&!e.startsWith("graph")),r=new Map;for(let e of t){let n=h(e);n&&r.set(n.id,n)}for(let e of t){let t=x(e);if(t){if(!r.has(t.source)){let n=p(e,t.source);r.set(t.source,n)}if(!r.has(t.target)){let n=p(e,t.target);r.set(t.target,n)}n.edges.push(t)}}return n.nodes=Array.from(r.values()),n},p=(e,n)=>{for(let{pattern:t,shape:r}of[{pattern:"\\[([^\\]]*)\\]",shape:"rectangle"},{pattern:"\\(\\(([^\\)]*)\\)\\)",shape:"circle"},{pattern:"\\{\\{([^\\}]*)\\}\\}",shape:"hexagon"},{pattern:"\\(\\[([^\\]]*)\\]\\)",shape:"stadium"},{pattern:"\\(([^\\)]*)\\)",shape:"rounded"},{pattern:"\\{([^\\}]*)\\}",shape:"diamond"}]){let a=new RegExp("".concat(n).concat(t)),o=e.match(a);if(o)return{id:n,variableName:n,label:o[1]||n,shapeType:r}}return{id:n,variableName:n,label:n,shapeType:"rectangle"}},h=e=>{if(e.includes("-->")||e.includes("==>")||e.includes("-.->")||e.includes("~~~")||e.includes("<-->")||e.includes("<==>"))return null;for(let n of[{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\[([^\]]*)\]$/,shape:"rectangle"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\(\(([^)]*)\)\)$/,shape:"circle"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\{\{([^}]*)\}\}$/,shape:"hexagon"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\(\[([^\]]*)\]\)$/,shape:"stadium"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\(([^)]*)\)$/,shape:"rounded"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\{([^}]*)\}$/,shape:"diamond"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)$/,shape:"rectangle"}]){let t=e.match(n.regex);if(t){let e=t[1],r=void 0!==t[2]?t[2]:e;if(e.includes(" "))continue;return{id:e,variableName:e,label:r,shapeType:n.shape}}}return null},x=e=>{let n="[a-zA-Z0-9_\\u3040-\\u309F\\u30A0-\\u30FF\\u4E00-\\u9FAF]+",t="(?:\\[[^\\]]*\\]|\\([^)]*\\)|\\{[^}]*\\}|\\(\\([^)]*\\)\\)|\\{\\{[^}]*\\}\\}|\\(\\[[^\\]]*\\]\\))?";for(let r of[{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*<==(.+)==>\\s*(").concat(n,")").concat(t,"$")),arrowType:"bidirectional-thick",labelPosition:"middle"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*<==>\\s*(").concat(n,")").concat(t,"$")),arrowType:"bidirectional-thick"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*<-->\\s*\\|\\s*([^|]*)\\s*\\|\\s*(").concat(n,")").concat(t,"$")),arrowType:"bidirectional"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*<-->\\s*(").concat(n,")").concat(t,"$")),arrowType:"bidirectional"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*-\\.\\s*(.+?)\\s*\\.-\\s*>\\s*(").concat(n,")").concat(t,"$")),arrowType:"dotted",labelPosition:"sides"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*-\\.\\s*->\\s*(").concat(n,")").concat(t,"$")),arrowType:"dotted"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*==>\\s*\\|\\s*([^|]*)\\s*\\|\\s*(").concat(n,")").concat(t,"$")),arrowType:"thick"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*==>\\s*(").concat(n,")").concat(t,"$")),arrowType:"thick"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*-->\\s*\\|\\s*([^|]*)\\s*\\|\\s*(").concat(n,")").concat(t,"$")),arrowType:"arrow"},{regex:new RegExp("^(".concat(n,")").concat(t,"\\s*-->\\s*(").concat(n,")").concat(t,"$")),arrowType:"arrow"}]){let n=e.match(r.regex);if(n){let e,t;let a="";return"bidirectional-thick"===r.arrowType&&n.length>=4&&n[2]&&""!==n[2].trim()?(e=n[1],a=n[2].trim(),t=n[3]):"sides"===r.labelPosition&&n.length>=4?(e=n[1],a=n[2].trim(),t=n[3]):4===n.length?(e=n[1],a=n[2].trim(),t=n[3]):(e=n[1],t=n[2]),{id:"".concat(e,"-").concat(t),source:e,target:t,label:a,arrowType:r.arrowType}}}return null}}},function(e){e.O(0,[868,616,62,389,496,681,452,744],function(){return e(e.s=92101)}),_N_E=e.O()}]);