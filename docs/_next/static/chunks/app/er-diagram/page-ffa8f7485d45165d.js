(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[462],{18569:function(e,t,n){Promise.resolve().then(n.bind(n,52102))},55839:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var a=n(85151),r=n(10241),l=n(18263),i=n(36810),o=n(13262);let s=()=>(0,a.jsx)(r.Panel,{position:"top-right",children:(0,a.jsx)(c,{})}),c=()=>(0,a.jsx)(i.h,{icon:(0,a.jsx)(l.E,{}),size:"sm",as:o.r,href:"https://github.com/illionillion/mermaid-editor",target:"_blank",rel:"noopener noreferrer",display:"flex",alignItems:"center",gap:1,fontSize:"sm",bg:"gray.600",color:"white",_hover:{bg:"black",textDecoration:"none"}}),u=e=>{let{children:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Controls,{}),(0,a.jsx)(r.MiniMap,{}),(0,a.jsx)(r.Background,{}),t,(0,a.jsx)(s,{})]})}},52102:function(e,t,n){"use strict";n.r(t),n.d(t,{ERDiagramEditor:function(){return O}});var a=n(85151),r=n(10241),l=n(62388),i=n(53677),o=n(62531),s=n(23258),c=n(55839),u=n(77245);/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function d(e,t){return e?"function"==typeof e&&(()=>{let t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()||"function"==typeof e||"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)?s.createElement(e,t):e:null}var h=n(23121),f=n(61963),p=n(36810),m=n(35343),x=n(48856),g=n(75777),b=n(98532),y=n(2307),_=n(86144),j=n(35111),C=n(30489),v=n(83610),w=n(52551),k=n(59882),T=n(58395),N=n(56154),S=n(69811);let R=e=>{let{name:t,columns:n,onNameChange:r,onColumnsChange:l}=e,i=(e,t,a)=>{l(n.map((n,r)=>r===e?{...n,[t]:a}:n))},o=e=>{l(n.filter((t,n)=>n!==e))},c=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=s.useState(()=>({current:(0,u.W_)(t)})),[a,r]=s.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...a,...e.state},onStateChange:t=>{r(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:n,columns:[{header:()=>"カラム名",cell:e=>{let{row:t,getValue:n}=e;return(0,a.jsx)(E,{value:n(),label:"カラム名",onCommit:e=>i(t.index,"name",e)})},accessorKey:"name"},{header:()=>"型",cell:e=>{let{row:t,getValue:n}=e;return(0,a.jsx)(E,{value:n(),label:"型",onCommit:e=>i(t.index,"type",e)})},accessorKey:"type"},{header:()=>"PK",cell:e=>{let{row:t,getValue:n}=e;return(0,a.jsx)(f.ui.input,{type:"checkbox",checked:n(),"aria-label":"PK",onChange:e=>i(t.index,"pk",e.target.checked)})},accessorKey:"pk"},{header:()=>"NN",cell:e=>{let{row:t,getValue:n}=e;return(0,a.jsx)(f.ui.input,{type:"checkbox",checked:n(),"aria-label":"NN",onChange:e=>i(t.index,"nn",e.target.checked)})},accessorKey:"nn"},{header:"Default",cell:e=>{let{row:t,getValue:n}=e;return(0,a.jsx)(E,{value:n(),label:"Default",onCommit:e=>i(t.index,"defaultValue",e)})},accessorKey:"defaultValue"},{header:"",id:"actions",cell:e=>{let{row:t}=e;return(0,a.jsx)(p.h,{"aria-label":"削除",icon:(0,a.jsx)(h.b,{}),size:"xs",colorScheme:"danger",onClick:()=>o(t.index),variant:"outline"})}}],getCoreRowModel:(0,u.sC)()});return(0,a.jsx)(m.gC,{bg:"white",border:"2px solid #1a365d",borderRadius:"md",p:2,maxW:"5xl",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",_hover:{boxShadow:"md"},position:"relative",children:(0,a.jsx)(x.x,{w:"full",children:(0,a.jsxs)(g.Q7,{variant:"simple",size:"sm",children:[(0,a.jsx)(b.R,{placement:"top",children:(0,a.jsxs)(m.Ug,{justifyContent:"space-between",w:"full",children:[(0,a.jsxs)(m.Ug,{as:y.__,children:[(0,a.jsx)(_.x,{fontWeight:"bold",fontSize:"md",children:"テーブル名"}),(0,a.jsx)(j.I,{"aria-label":"テーブル名",value:t,onChange:e=>r(e.target.value),fontWeight:"bold",fontSize:"md"})]}),(0,a.jsx)(C.z,{size:"md",colorScheme:"blue",onClick:()=>{l([...n,{name:"",type:"",pk:!1,nn:!1,defaultValue:""}])},children:"カラム追加"})]})}),(0,a.jsx)(v.h,{children:(0,a.jsx)(w.Tr,{children:c.getHeaderGroups()[0].headers.map(e=>(0,a.jsx)(k.Th,{fontWeight:"bold",textAlign:"left",children:d(e.column.columnDef.header,e.getContext())},e.id))})}),(0,a.jsx)(T.p,{children:c.getRowModel().rows.map(e=>(0,a.jsx)(w.Tr,{children:e.getVisibleCells().map(e=>(0,a.jsx)(N.Td,{children:(0,a.jsx)(S.M,{w:"full",h:"full",children:d(e.column.columnDef.cell,e.getContext())})},e.id))},e.id))})]})})})},E=e=>{let{value:t,onCommit:n,label:r}=e,[l,i]=(0,s.useState)(t),[o,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{i(t)},[t]),(0,a.jsx)(j.I,{"aria-label":r,size:"sm",value:l,onChange:e=>i(e.target.value),onCompositionStart:()=>c(!0),onCompositionEnd:e=>{c(!1),i(e.currentTarget.value)},onBlur:()=>n(l),onKeyDown:e=>{"Enter"!==e.key||o||(n(l),e.currentTarget.blur())}})};var z=n(51026);let M=e=>{let{onAddTable:t}=e;return(0,a.jsx)(r.Panel,{position:"top-left",children:(0,a.jsxs)(m.gC,{gap:4,p:4,bg:"white",borderRadius:"md",boxShadow:"md",children:[(0,a.jsx)(_.x,{fontSize:"lg",fontWeight:"bold",children:"ER図エディタ"}),(0,a.jsxs)(m.gC,{gap:2,align:"start",children:[(0,a.jsx)(_.x,{fontSize:"sm",color:"gray.600",children:"\uD83D\uDCA1 ヒント: テーブルをダブルクリックで編集、ドラッグして空の場所で新テーブル作成"}),(0,a.jsx)(m.Ug,{gap:2,display:{base:"flex",md:"inline-flex"},flexWrap:"wrap",children:(0,a.jsx)(C.z,{startIcon:(0,a.jsx)(z.p,{}),colorScheme:"blue",size:"sm",onClick:t,children:"テーブル追加"})})]})]})})};function W(e,t,n){return{id:e.toString(),type:"erTable",position:t,data:{name:"テーブル".concat(e),columns:[{name:"id",type:"int",pk:!0,nn:!0,defaultValue:"auto_increment"}],...n}}}let A={erTable:function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R,{...e.data}),(0,a.jsx)(r.Handle,{type:"target",position:l.Ly.Top}),(0,a.jsx)(r.Handle,{type:"source",position:l.Ly.Bottom})]})}},O=()=>{var e;let t=(0,s.useRef)(null),{screenToFlowPosition:n}=(0,r.useReactFlow)(),u=null!==(e=(0,i.useToken)("sizes","5xl"))&&void 0!==e?e:"320",d=u.endsWith("rem")?16*parseFloat(u):parseInt(u,10),[h,f,p]=(0,r.useNodesState)([{id:"1",type:"erTable",position:{x:100,y:100},data:{name:"ユーザー",columns:[{name:"id",type:"int",pk:!0,nn:!0,defaultValue:"auto_increment"},{name:"name",type:"varchar(255)",pk:!1,nn:!1,defaultValue:""}],onNameChange:()=>{},onColumnsChange:()=>{}}}]),[m,x,g]=(0,r.useEdgesState)([]),[b,y]=(0,s.useState)(2),_=(0,s.useCallback)(()=>{let e=W(b,{x:100+40*b,y:100+40*b},{onNameChange:e=>{f(t=>t.map(t=>t.id===b.toString()?{...t,data:{...t.data,name:e}}:t))},onColumnsChange:e=>{f(t=>t.map(t=>t.id===b.toString()?{...t,data:{...t.data,columns:e}}:t))}});f(t=>[...t,e]),y(e=>e+1)},[b,f]),j=(0,s.useCallback)((e,n)=>{t.current="".concat(n.nodeId,"-").concat(n.handleType)},[]),C=(0,s.useCallback)(e=>{var a;let r,l;if(!t.current)return;let i=e&&e.target||null;if(!i||!i.classList.contains("react-flow__pane")){t.current=null;return}let{sourceNodeId:o,handleType:s}=function(e){let[t,n]=e.split("-");return{sourceNodeId:t,handleType:n}}(t.current),c=h.find(e=>e.id===o),u=c&&Array.isArray(c.data.columns)?c.data.columns.length:1;e instanceof TouchEvent&&e.changedTouches.length>0?(r=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY):(r=e.clientX,l=e.clientY);let p=n({x:r,y:l}),m={x:p.x-d/2+90,y:p.y-(32*u+48)/2},g=W(b,{x:m.x,y:m.y},{onNameChange:e=>{f(t=>t.map(t=>t.id===b.toString()?{...t,data:{...t.data,name:e}}:t))},onColumnsChange:e=>{f(t=>t.map(t=>t.id===b.toString()?{...t,data:{...t.data,columns:e}}:t))}});f(e=>[...e,g]);let _=(a=b.toString(),{id:"".concat(o,"-").concat(a),source:"source"===s?o:a,target:"source"===s?a:o,type:"default",data:{}});x(e=>[...e,_]),y(e=>e+1),t.current=null},[b,f,x,n,h]),v=h.map(e=>"erTable"!==e.type?e:{...e,data:{...e.data,onNameChange:t=>{f(n=>n.map(n=>n.id===e.id?{...n,data:{...n.data,name:t}}:n))},onColumnsChange:t=>{f(n=>n.map(n=>n.id===e.id?{...n,data:{...n.data,columns:t}}:n))}}}),w=(0,s.useCallback)(e=>x(t=>(0,l.Z_)(e,t)),[x]);return(0,a.jsx)(o.x,{h:"100vh",w:"full",children:(0,a.jsx)(r.ReactFlow,{nodes:v,edges:m,onNodesChange:p,onEdgesChange:g,onConnect:w,onConnectStart:j,onConnectEnd:C,nodeTypes:A,fitView:!0,children:(0,a.jsx)(c.f,{children:(0,a.jsx)(M,{onAddTable:_})})})})}},69811:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});var a=(0,n(61963).ui)("div",{baseStyle:{alignItems:"center",display:"flex",justifyContent:"center"}});a.displayName="Center",a.__ui__="Center"},18263:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var a=n(61963),r=n(58872),l=n(22255);let i=(0,n(24585).Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var o=n(85151),s=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(r.JO,{ref:t,as:i,className:(0,l.cx)("ui-lucide-icon",n),...a})})},23121:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var a=n(61963),r=n(58872),l=n(22255);let i=(0,n(24585).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=n(85151),s=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(r.JO,{ref:t,as:i,className:(0,l.cx)("ui-lucide-icon",n),...a})})},51026:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var a=n(61963),r=n(58872),l=n(22255);let i=(0,n(24585).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var o=n(85151),s=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(r.JO,{ref:t,as:i,className:(0,l.cx)("ui-lucide-icon",n),...a})})},48856:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var a=n(61963),r=n(22255),l=n(85151),i=(0,a.forwardRef)((e,t)=>{var n;let{className:i,overflow:o,overflowX:s,...c}=e,u={display:"block",maxW:"100%",overflowX:null!=(n=null!=o?o:s)?n:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",whiteSpace:"nowrap"};return(0,l.jsx)(a.ui.div,{ref:t,className:(0,r.cx)("ui-table__container",i),__css:u,...c})});i.displayName="TableContainer",i.__ui__="TableContainer"},59882:function(e,t,n){"use strict";n.d(t,{Th:function(){return o}});var a=n(75777),r=n(61963),l=n(22255),i=n(85151),o=(0,r.forwardRef)((e,t)=>{let{className:n,isNumeric:o,numeric:s=o,__css:c,...u}=e,d={...(0,a.p8)().th,...c};return(0,i.jsx)(r.ui.th,{ref:t,className:(0,l.cx)("ui-table__th",n),"data-is-numeric":s,__css:d,...u})});o.displayName="Th",o.__ui__="Th"},56154:function(e,t,n){"use strict";n.d(t,{Td:function(){return o}});var a=n(75777),r=n(61963),l=n(22255),i=n(85151),o=(0,r.forwardRef)((e,t)=>{let{className:n,isNumeric:o,numeric:s=o,...c}=e,u={...(0,a.p8)().td};return(0,i.jsx)(r.ui.td,{ref:t,className:(0,l.cx)("ui-table__td",n),"data-is-numeric":s,__css:u,...c})});o.displayName="Td",o.__ui__="Td"},58395:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var a=n(75777),r=n(61963),l=n(22255),i=n(85151),o=(0,r.forwardRef)((e,t)=>{let{className:n,...o}=e,s={...(0,a.p8)().tbody};return(0,i.jsx)(r.ui.tbody,{ref:t,className:(0,l.cx)("ui-table__tbody",n),__css:s,...o})});o.displayName="Tbody",o.__ui__="Tbody"},75777:function(e,t,n){"use strict";n.d(t,{Q7:function(){return s},ag:function(){return i},p8:function(){return o}});var a=n(61963),r=n(22255),l=n(85151),[i,o]=(0,r.kr)({name:"TableStyleContext",errorMessage:'useTableStyles returned is \'undefined\'. Seems you forgot to wrap the components in "<Table />" or "<NativeTable />" or "<PagingTable />"'}),s=(0,a.forwardRef)((e,t)=>{let[n,o]=(0,a.useComponentMultiStyle)("NativeTable",e),{className:s,layout:c,...u}=(0,a.omitThemeProps)(o,["withBorder","withColumnBorders","highlightOnHover"]),d={tableLayout:c,...n.table};return(0,l.jsx)(i,{value:n,children:(0,l.jsx)(a.ui.table,{ref:t,className:(0,r.cx)("ui-table",s),__css:d,...u})})});s.displayName="NativeTable",s.__ui__="NativeTable"},52551:function(e,t,n){"use strict";n.d(t,{Tr:function(){return o}});var a=n(75777),r=n(61963),l=n(22255),i=n(85151),o=(0,r.forwardRef)((e,t)=>{let{className:n,...o}=e,s={...(0,a.p8)().tr};return(0,i.jsx)(r.ui.tr,{ref:t,className:(0,l.cx)("ui-table__tr",n),__css:s,...o})});o.displayName="Tr",o.__ui__="Tr"},83610:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var a=n(75777),r=n(61963),l=n(22255),i=n(85151),o=(0,r.forwardRef)((e,t)=>{let{className:n,...o}=e,s={...(0,a.p8)().thead};return(0,i.jsx)(r.ui.thead,{ref:t,className:(0,l.cx)("ui-table__thead",n),__css:s,...o})});o.displayName="Thead",o.__ui__="Thead"},98532:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var a=n(75777),r=n(61963),l=n(22255),i=n(85151),o=(0,r.forwardRef)((e,t)=>{let{className:n,placement:o="bottom",...s}=e,c={captionSide:o,...(0,a.p8)().caption};return(0,i.jsx)(r.ui.caption,{ref:t,className:(0,l.cx)("ui-table__caption",n),__css:c,...s})});o.displayName="TableCaption",o.__ui__="TableCaption"},24585:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(23258);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:c="",children:u,iconNode:d,...h}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:n,strokeWidth:s?24*Number(o)/Number(r):o,className:l("lucide",c),...h},[...d.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(u)?u:[u]])}),s=(e,t)=>{let n=(0,a.forwardRef)((n,i)=>{let{className:s,...c}=n;return(0,a.createElement)(o,{ref:i,iconNode:t,className:l("lucide-".concat(r(e)),s),...c})});return n.displayName="".concat(e),n}}},function(e){e.O(0,[868,62,616,832,641,810,807,504,744],function(){return e(e.s=18569)}),_N_E=e.O()}]);