"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62],{61464:function(e,t,n){n.r(t),n.d(t,{Background:function(){return t2},BackgroundVariant:function(){return r},BaseEdge:function(){return eQ},BezierEdge:function(){return e9},ConnectionLineType:function(){return s.t8},ConnectionMode:function(){return s.jD},ControlButton:function(){return t9},Controls:function(){return nn},EdgeLabelRenderer:function(){return t_},EdgeText:function(){return eK},Handle:function(){return ek},MarkerType:function(){return s.QZ},MiniMap:function(){return nu},NodeResizeControl:function(){return np},NodeResizer:function(){return nh},NodeToolbar:function(){return nw},PanOnScrollMode:function(){return s.IY},Panel:function(){return N},Position:function(){return s.Ly},ReactFlow:function(){return tj},ReactFlowProvider:function(){return tk},ResizeControlVariant:function(){return s.pB},SelectionMode:function(){return s.oW},SimpleBezierEdge:function(){return eG},SmoothStepEdge:function(){return e0},StepEdge:function(){return e2},StraightEdge:function(){return e6},ViewportPortal:function(){return tL},addEdge:function(){return s.Z_},applyEdgeChanges:function(){return Q},applyNodeChanges:function(){return K},getBezierEdgeCenter:function(){return s.lM},getBezierPath:function(){return s.OQ},getConnectedEdges:function(){return s.my},getEdgeCenter:function(){return s.Pp},getIncomers:function(){return s.vG},getNodesBounds:function(){return s.RX},getOutgoers:function(){return s.xA},getSimpleBezierPath:function(){return eU},getSmoothStepPath:function(){return s.OW},getStraightPath:function(){return s.Hm},getViewportForBounds:function(){return s.$i},isEdge:function(){return J},isNode:function(){return $},reconnectEdge:function(){return s.Kz},useConnection:function(){return tv},useEdges:function(){return tB},useEdgesState:function(){return tF},useHandleConnections:function(){return tQ},useInternalNode:function(){return tG},useKeyPress:function(){return Z},useNodeConnections:function(){return tU},useNodeId:function(){return eC},useNodes:function(){return tO},useNodesData:function(){return tq},useNodesInitialized:function(){return tK},useNodesState:function(){return tZ},useOnSelectionChange:function(){return tX},useOnViewportChange:function(){return tT},useReactFlow:function(){return ei},useStore:function(){return h},useStoreApi:function(){return v},useUpdateNodeInternals:function(){return tI},useViewport:function(){return tH}});var o,r,l=n(48983),i=n(12685),a=n(91198),s=n(5301),d=n(53098),c=n(35540),u=n(46696);let g=(0,i.createContext)(null),f=g.Provider,p=s.Qj.error001();function h(e,t){let n=(0,i.useContext)(g);if(null===n)throw Error(p);return(0,d.s)(n,e,t)}function v(){let e=(0,i.useContext)(g);if(null===e)throw Error(p);return(0,i.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let m={display:"none"},y={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},b="react-flow__node-desc",S="react-flow__edge-desc",w=e=>e.ariaLiveMessage,x=e=>e.ariaLabelConfig;function C(e){let{rfId:t}=e,n=h(w);return(0,l.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:y,children:n})}function E(e){let{rfId:t,disableKeyboardA11y:n}=e,o=h(x);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{id:"".concat(b,"-").concat(t),style:m,children:n?o["node.a11yDescription.default"]:o["node.a11yDescription.keyboardDisabled"]}),(0,l.jsx)("div",{id:"".concat(S,"-").concat(t),style:m,children:o["edge.a11yDescription.default"]}),!n&&(0,l.jsx)(C,{rfId:t})]})}let N=(0,i.forwardRef)((e,t)=>{let{position:n="top-left",children:o,className:r,style:i,...s}=e,d="".concat(n).split("-");return(0,l.jsx)("div",{className:(0,a.Z)(["react-flow__panel",r,...d]),style:i,ref:t,...s,children:o})});function k(e){let{proOptions:t,position:n="bottom-right"}=e;return(null==t?void 0:t.hideAttribution)?null:(0,l.jsx)(N,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,l.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}N.displayName="Panel";let M=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},P=e=>e.id;function j(e,t){return(0,c.X)(e.selectedNodes.map(P),t.selectedNodes.map(P))&&(0,c.X)(e.selectedEdges.map(P),t.selectedEdges.map(P))}function R(e){let{onSelectionChange:t}=e,n=v(),{selectedNodes:o,selectedEdges:r}=h(M,j);return(0,i.useEffect)(()=>{let e={nodes:o,edges:r};null==t||t(e),n.getState().onSelectionChangeHandlers.forEach(t=>t(e))},[o,r,t]),null}let _=e=>!!e.onSelectionChangeHandlers;function D(e){let{onSelectionChange:t}=e,n=h(_);return t||n?(0,l.jsx)(R,{onSelectionChange:t}):null}let L=[0,0],I={x:0,y:0,zoom:1},A=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],O=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),z={translateExtent:s.k5,nodeOrigin:L,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function B(e){let{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:l,setNodeExtent:a,reset:d,setDefaultNodesAndEdges:u,setPaneClickDistance:g}=h(O,c.X),f=v();(0,i.useEffect)(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=z,d()}),[]);let p=(0,i.useRef)(z);return(0,i.useEffect)(()=>{for(let i of A){let d=e[i];d!==p.current[i]&&void 0!==e[i]&&("nodes"===i?t(d):"edges"===i?n(d):"minZoom"===i?o(d):"maxZoom"===i?r(d):"translateExtent"===i?l(d):"nodeExtent"===i?a(d):"paneClickDistance"===i?g(d):"ariaLabelConfig"===i?f.setState({ariaLabelConfig:(0,s.AL)(d)}):"fitView"===i?f.setState({fitViewQueued:d}):"fitViewOptions"===i?f.setState({fitViewOptions:d}):f.setState({[i]:d}))}p.current=e},A.map(t=>e[t])),null}function V(){return window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}let H="undefined"!=typeof document?document:null;function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:H,actInsideInputWithModifier:!0},[n,o]=(0,i.useState)(!1),r=(0,i.useRef)(!1),l=(0,i.useRef)(new Set([])),[a,d]=(0,i.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,i.useEffect)(()=>{var n,i;let c=null!==(n=null==t?void 0:t.target)&&void 0!==n?n:H,u=null===(i=null==t?void 0:t.actInsideInputWithModifier)||void 0===i||i;if(null!==e){let e=e=>{if(r.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!r.current||r.current&&!u)&&(0,s.s$)(e))return!1;let n=T(e.code,d);if(l.current.add(e[n]),F(a,l.current,!1)){var i,c;let n=(null===(c=e.composedPath)||void 0===c?void 0:null===(i=c.call(e))||void 0===i?void 0:i[0])||e.target,l=(null==n?void 0:n.nodeName)==="BUTTON"||(null==n?void 0:n.nodeName)==="A";!1!==t.preventDefault&&(r.current||!l)&&e.preventDefault(),o(!0)}},n=e=>{let t=T(e.code,d);F(a,l.current,!0)?(o(!1),l.current.clear()):l.current.delete(e[t]),"Meta"===e.key&&l.current.clear(),r.current=!1},i=()=>{l.current.clear(),o(!1)};return null==c||c.addEventListener("keydown",e),null==c||c.addEventListener("keyup",n),window.addEventListener("blur",i),window.addEventListener("contextmenu",i),()=>{null==c||c.removeEventListener("keydown",e),null==c||c.removeEventListener("keyup",n),window.removeEventListener("blur",i),window.removeEventListener("contextmenu",i)}}},[e,o]),n}function F(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function T(e,t){return t.includes(e)?"code":"key"}let X=()=>{let e=v();return(0,i.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null==t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:null==n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var o,r,l;let{transform:[i,a,s],panZoom:d}=e.getState();return d?(await d.setViewport({x:null!==(o=t.x)&&void 0!==o?o:i,y:null!==(r=t.y)&&void 0!==r?r:a,zoom:null!==(l=t.zoom)&&void 0!==l?l:s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{var o;let{width:r,height:l,minZoom:i,maxZoom:a,panZoom:d}=e.getState(),c=(0,s.$i)(t,r,l,i,a,null!==(o=null==n?void 0:n.padding)&&void 0!==o?o:.1);return d?(await d.setViewport(c,{duration:null==n?void 0:n.duration,ease:null==n?void 0:n.ease,interpolate:null==n?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){var n,o;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{transform:l,snapGrid:i,snapToGrid:a,domNode:d}=e.getState();if(!d)return t;let{x:c,y:u}=d.getBoundingClientRect(),g={x:t.x-c,y:t.y-u},f=null!==(n=r.snapGrid)&&void 0!==n?n:i,p=null!==(o=r.snapToGrid)&&void 0!==o?o:a;return(0,s.m)(g,l,p,f)},flowToScreenPosition:t=>{let{transform:n,domNode:o}=e.getState();if(!o)return t;let{x:r,y:l}=o.getBoundingClientRect(),i=(0,s.oj)(t,n);return{x:i.x+r,y:i.y+l}}}),[])};function W(e,t){let n=[],o=new Map,r=[];for(let t of e){if("add"===t.type){r.push(t);continue}if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{let e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}}for(let e of t){let t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let r={...e};for(let e of t)!function(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":if(void 0!==e.dimensions){var n;null!==(n=t.measured)&&void 0!==n||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((!0===e.setAttributes||"width"===e.setAttributes)&&(t.width=e.dimensions.width),(!0===e.setAttributes||"height"===e.setAttributes)&&(t.height=e.dimensions.height))}"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}(e,r);n.push(r)}return r.length&&r.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function K(e,t){return W(e,t)}function Q(e,t){return W(e,t)}function Y(e,t){return{id:e,type:"select",selected:t}}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];for(let[r,l]of e){let e=t.has(r);(void 0!==l.selected||e)&&l.selected!==e&&(n&&(l.selected=e),o.push(Y(l.id,e)))}return o}function q(e){let{items:t=[],lookup:n}=e,o=[],r=new Map(t.map(e=>[e.id,e]));for(let[e,r]of t.entries()){var l,i;let t=n.get(r.id),a=null!==(i=null==t?void 0:null===(l=t.internals)||void 0===l?void 0:l.userNode)&&void 0!==i?i:t;void 0!==a&&a!==r&&o.push({id:r.id,item:r,type:"replace"}),void 0===a&&o.push({item:r,type:"add",index:e})}for(let[e]of n)void 0===r.get(e)&&o.push({id:e,type:"remove"});return o}function G(e){return{id:e.id,type:"remove"}}let $=e=>(0,s.Vt)(e),J=e=>(0,s.J3)(e);function ee(e){return(0,i.forwardRef)(e)}let et=i.useLayoutEffect;function en(e){let[t,n]=(0,i.useState)(BigInt(0)),[o]=(0,i.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return et(()=>{let t=o.get();t.length&&(e(t),o.reset())},[t]),o}let eo=(0,i.createContext)(null);function er(e){let{children:t}=e,n=v(),o=en((0,i.useCallback)(e=>{let{nodes:t=[],setNodes:o,hasDefaultNodes:r,onNodesChange:l,nodeLookup:i,fitViewQueued:a}=n.getState(),s=t;for(let t of e)s="function"==typeof t?t(s):t;let d=q({items:s,lookup:i});r&&o(s),d.length>0?null==l||l(d):a&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:t,setNodes:o}=n.getState();e&&o(t)})},[])),r=en((0,i.useCallback)(e=>{let{edges:t=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:l,edgeLookup:i}=n.getState(),a=t;for(let t of e)a="function"==typeof t?t(a):t;r?o(a):l&&l(q({items:a,lookup:i}))},[])),a=(0,i.useMemo)(()=>({nodeQueue:o,edgeQueue:r}),[]);return(0,l.jsx)(eo.Provider,{value:a,children:t})}let el=e=>!!e.panZoom;function ei(){let e=X(),t=v(),n=function(){let e=(0,i.useContext)(eo);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),o=h(el),r=(0,i.useMemo)(()=>{let e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},l=e=>{var n,o,r,l;let{nodeLookup:i,nodeOrigin:a}=t.getState(),d=$(e)?e:i.get(e.id),c=d.parentId?(0,s.ZB)(d.position,d.measured,d.parentId,i,a):d.position,u={...d,position:c,width:null!==(r=null===(n=d.measured)||void 0===n?void 0:n.width)&&void 0!==r?r:d.width,height:null!==(l=null===(o=d.measured)||void 0===o?void 0:o.height)&&void 0!==l?l:d.height};return(0,s.PS)(u)},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};o(o=>o.map(o=>{if(o.id===e){let e="function"==typeof t?t(o):t;return n.replace&&$(e)?e:{...o,...e}}return o}))},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};r(o=>o.map(o=>{if(o.id===e){let e="function"==typeof t?t(o):t;return n.replace&&J(e)?e:{...o,...e}}return o}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{let t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,l,i]=o;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:r,y:l,zoom:i}}},deleteElements:async e=>{let{nodes:n=[],edges:o=[]}=e,{nodes:r,edges:l,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:d,triggerEdgeChanges:c,onDelete:u,onBeforeDelete:g}=t.getState(),{nodes:f,edges:p}=await (0,s.WD)({nodesToRemove:n,edgesToRemove:o,nodes:r,edges:l,onBeforeDelete:g}),h=p.length>0,v=f.length>0;if(h){let e=p.map(G);null==a||a(p),c(e)}if(v){let e=f.map(G);null==i||i(f),d(e)}return(v||h)&&(null==u||u({nodes:f,edges:p})),{deletedNodes:f,deletedEdges:p}},getIntersectingNodes:function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,r=(0,s.J$)(e),i=r?e:l(e),a=void 0!==o;return i?(o||t.getState().nodes).filter(o=>{let l=t.getState().nodeLookup.get(o.id);if(l&&!r&&(o.id===e.id||!l.internals.positionAbsolute))return!1;let d=(0,s.PS)(a?o:l),c=(0,s.lp)(d,i);return n&&c>0||c>=d.width*d.height||c>=i.width*i.height}):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=(0,s.J$)(e)?e:l(e);if(!o)return!1;let r=(0,s.lp)(o,t);return n&&r>0||r>=o.width*o.height},updateNode:i,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};i(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},updateEdge:a,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},getNodesBounds:e=>{let{nodeLookup:n,nodeOrigin:o}=t.getState();return(0,s.RX)(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:e=>{var n,o;let{type:r,id:l,nodeId:i}=e;return Array.from(null!==(o=null===(n=t.getState().connectionLookup.get("".concat(i,"-").concat(r).concat(l?"-".concat(l):"")))||void 0===n?void 0:n.values())&&void 0!==o?o:[])},getNodeConnections:e=>{var n,o;let{type:r,handleId:l,nodeId:i}=e;return Array.from(null!==(o=null===(n=t.getState().connectionLookup.get("".concat(i).concat(r?l?"-".concat(r,"-").concat(l):"-".concat(r):"")))||void 0===n?void 0:n.values())&&void 0!==o?o:[])},fitView:async e=>{var o;let r=null!==(o=t.getState().fitViewResolver)&&void 0!==o?o:(0,s.nu)();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:r}),n.nodeQueue.push(e=>[...e]),r.promise}}},[]);return(0,i.useMemo)(()=>({...r,...e,viewportInitialized:o}),[o])}let ea=e=>e.selected,es=window,ed={position:"absolute",width:"100%",height:"100%",top:0,left:0},ec=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function eu(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:o=!0,panOnScroll:r=!1,panOnScrollSpeed:a=.5,panOnScrollMode:d=s.IY.Free,zoomOnDoubleClick:u=!0,panOnDrag:g=!0,defaultViewport:f,translateExtent:p,minZoom:m,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:S=!0,children:w,noWheelClassName:x,noPanClassName:C,onViewportChange:E,isControlledViewport:N,paneClickDistance:k}=e,M=v(),P=(0,i.useRef)(null),{userSelectionActive:j,lib:R}=h(ec,c.X),_=Z(b),D=(0,i.useRef)();!function(e){let t=v();(0,i.useEffect)(()=>{let n=()=>{if(!e.current)return!1;let n=(0,s.t_)(e.current);if(0===n.height||0===n.width){var o,r;null===(o=(r=t.getState()).onError)||void 0===o||o.call(r,"004",s.Qj.error004())}t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);let t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(P);let L=(0,i.useCallback)(e=>{null==E||E({x:e[0],y:e[1],zoom:e[2]}),N||M.setState({transform:e})},[E,N]);return(0,i.useEffect)(()=>{if(P.current){D.current=(0,s.X6)({domNode:P.current,minZoom:m,maxZoom:y,translateExtent:p,viewport:f,paneClickDistance:k,onDraggingChange:e=>M.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:o}=M.getState();null==o||o(e,t),null==n||n(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:o}=M.getState();null==o||o(e,t),null==n||n(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:o}=M.getState();null==o||o(e,t),null==n||n(t)}});let{x:e,y:t,zoom:n}=D.current.getViewport();return M.setState({panZoom:D.current,transform:[e,t,n],domNode:P.current.closest(".react-flow")}),()=>{var e;null===(e=D.current)||void 0===e||e.destroy()}}},[]),(0,i.useEffect)(()=>{var e;null===(e=D.current)||void 0===e||e.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:o,panOnScroll:r,panOnScrollSpeed:a,panOnScrollMode:d,zoomOnDoubleClick:u,panOnDrag:g,zoomActivationKeyPressed:_,preventScrolling:S,noPanClassName:C,userSelectionActive:j,noWheelClassName:x,lib:R,onTransformChange:L})},[t,n,o,r,a,d,u,g,_,S,C,j,x,R,L]),(0,l.jsx)("div",{className:"react-flow__renderer",ref:P,style:ed,children:w})}let eg=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ef(){let{userSelectionActive:e,userSelectionRect:t}=h(eg,c.X);return e&&t?(0,l.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}let ep=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},eh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function ev(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:o=s.oW.Full,panOnDrag:r,selectionOnDrag:d,onSelectionStart:u,onSelectionEnd:g,onPaneClick:f,onPaneContextMenu:p,onPaneScroll:m,onPaneMouseEnter:y,onPaneMouseMove:b,onPaneMouseLeave:S,children:w}=e,x=v(),{userSelectionActive:C,elementsSelectable:E,dragging:N,connectionInProgress:k}=h(eh,c.X),M=E&&(t||C),P=(0,i.useRef)(null),j=(0,i.useRef)(),R=(0,i.useRef)(new Set),_=(0,i.useRef)(new Set),D=(0,i.useRef)(!1),L=(0,i.useRef)(!1),I=e=>{if(D.current||k){D.current=!1;return}null==f||f(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},A=!0===r||Array.isArray(r)&&r.includes(0);return(0,l.jsxs)("div",{className:(0,a.Z)(["react-flow__pane",{draggable:A,dragging:N,selection:t}]),onClick:M?void 0:ep(I,P),onContextMenu:ep(e=>{if(Array.isArray(r)&&(null==r?void 0:r.includes(2))){e.preventDefault();return}null==p||p(e)},P),onWheel:ep(m?e=>m(e):void 0,P),onPointerEnter:M?void 0:y,onPointerDown:M?e=>{var n,o;let{resetSelectedElements:r,domNode:l}=x.getState();if(j.current=null==l?void 0:l.getBoundingClientRect(),!E||!t||0!==e.button||e.target!==P.current||!j.current)return;null===(o=e.target)||void 0===o||null===(n=o.setPointerCapture)||void 0===n||n.call(o,e.pointerId),L.current=!0,D.current=!1;let{x:i,y:a}=(0,s.wv)(e.nativeEvent,j.current);r(),x.setState({userSelectionRect:{width:0,height:0,startX:i,startY:a,x:i,y:a}}),null==u||u(e)}:b,onPointerMove:M?e=>{var t,n;let{userSelectionRect:r,transform:l,nodeLookup:i,edgeLookup:a,connectionLookup:d,triggerNodeChanges:c,triggerEdgeChanges:u,defaultEdgeOptions:g}=x.getState();if(!j.current||!r)return;D.current=!0;let{x:f,y:p}=(0,s.wv)(e.nativeEvent,j.current),{startX:h,startY:v}=r,m={startX:h,startY:v,x:f<h?f:h,y:p<v?p:v,width:Math.abs(f-h),height:Math.abs(p-v)},y=R.current,b=_.current;R.current=new Set((0,s.f5)(i,m,l,o===s.oW.Partial,!0).map(e=>e.id)),_.current=new Set;let S=null===(t=null==g?void 0:g.selectable)||void 0===t||t;for(let e of R.current){let t=d.get(e);if(t)for(let{edgeId:e}of t.values()){let t=a.get(e);t&&(null!==(n=t.selectable)&&void 0!==n?n:S)&&_.current.add(e)}}(0,s.OL)(y,R.current)||c(U(i,R.current,!0)),(0,s.OL)(b,_.current)||u(U(a,_.current)),x.setState({userSelectionRect:m,userSelectionActive:!0,nodesSelectionActive:!1})}:b,onPointerUp:M?e=>{var t,o;if(0!==e.button||!L.current)return;null===(o=e.target)||void 0===o||null===(t=o.releasePointerCapture)||void 0===t||t.call(o,e.pointerId);let{userSelectionRect:r}=x.getState();!C&&r&&e.target===P.current&&(null==I||I(e)),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:R.current.size>0}),null==g||g(e),(n||d)&&(D.current=!1),L.current=!1}:void 0,onPointerLeave:S,ref:P,style:ed,children:[w,(0,l.jsx)(ef,{})]})}function em(e){let{id:t,store:n,unselect:o=!1,nodeRef:r}=e,{addSelectedNodes:l,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:d,onError:c}=n.getState(),u=d.get(t);if(!u){null==c||c("012",s.Qj.error012(t));return}n.setState({nodesSelectionActive:!1}),u.selected?(o||u.selected&&a)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var e;return null==r?void 0:null===(e=r.current)||void 0===e?void 0:e.blur()})):l([t])}function ey(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:r,nodeId:l,isSelectable:a,nodeClickDistance:d}=e,c=v(),[u,g]=(0,i.useState)(!1),f=(0,i.useRef)();return(0,i.useEffect)(()=>{f.current=(0,s.oC)({getStoreItems:()=>c.getState(),onNodeMouseDown:e=>{em({id:e,store:c,nodeRef:t})},onDragStart:()=>{g(!0)},onDragStop:()=>{g(!1)}})},[]),(0,i.useEffect)(()=>{var e,i;if(n)null===(e=f.current)||void 0===e||e.destroy();else if(t.current)return null===(i=f.current)||void 0===i||i.update({noDragClassName:o,handleSelector:r,domNode:t.current,isSelectable:a,nodeId:l,nodeClickDistance:d}),()=>{var e;null===(e=f.current)||void 0===e||e.destroy()}},[o,r,n,a,t,l]),u}let eb=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function eS(){let e=v();return(0,i.useCallback)(t=>{let{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:l,onError:i,updateNodePositions:a,nodeLookup:d,nodeOrigin:c}=e.getState(),u=new Map,g=eb(l),f=o?r[0]:5,p=o?r[1]:5,h=t.direction.x*f*t.factor,v=t.direction.y*p*t.factor;for(let[,e]of d){if(!g(e))continue;let t={x:e.internals.positionAbsolute.x+h,y:e.internals.positionAbsolute.y+v};o&&(t=(0,s._2)(t,r));let{position:l,positionAbsolute:a}=(0,s.q7)({nodeId:e.id,nextPosition:t,nodeLookup:d,nodeExtent:n,nodeOrigin:c,onError:i});e.position=l,e.internals.positionAbsolute=a,u.set(e.id,e)}a(u)},[])}let ew=(0,i.createContext)(null),ex=ew.Provider;ew.Consumer;let eC=()=>(0,i.useContext)(ew),eE=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),eN=(e,t,n)=>o=>{let{connectionClickStartHandle:r,connectionMode:l,connection:i}=o,{fromHandle:a,toHandle:d,isValid:c}=i,u=(null==d?void 0:d.nodeId)===e&&(null==d?void 0:d.id)===t&&(null==d?void 0:d.type)===n;return{connectingFrom:(null==a?void 0:a.nodeId)===e&&(null==a?void 0:a.id)===t&&(null==a?void 0:a.type)===n,connectingTo:u,clickConnecting:(null==r?void 0:r.nodeId)===e&&(null==r?void 0:r.id)===t&&(null==r?void 0:r.type)===n,isPossibleEndHandle:l===s.jD.Strict?(null==a?void 0:a.type)!==n:e!==(null==a?void 0:a.nodeId)||t!==(null==a?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!r,valid:u&&c}},ek=(0,i.memo)(ee(function(e,t){let{type:n="source",position:o=s.Ly.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:d=!0,isConnectableEnd:u=!0,id:g,onConnect:f,children:p,className:m,onMouseDown:y,onTouchStart:b,...S}=e,w=g||null,x="target"===n,C=v(),E=eC(),{connectOnClick:N,noPanClassName:k,rfId:M}=h(eE,c.X),{connectingFrom:P,connectingTo:j,clickConnecting:R,isPossibleEndHandle:_,connectionInProcess:D,clickConnectionInProcess:L,valid:I}=h(eN(E,w,n),c.X);if(!E){var A,O;null===(A=(O=C.getState()).onError)||void 0===A||A.call(O,"010",s.Qj.error010())}let z=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=C.getState(),r={...t,...e};if(o){let{edges:e,setEdges:t}=C.getState();t((0,s.Z_)(r,e))}null==n||n(r),null==f||f(r)},B=e=>{if(!E)return;let t=(0,s.N5)(e.nativeEvent);if(d&&(t&&0===e.button||!t)){let t=C.getState();s.Ql.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:x,handleId:w,nodeId:E,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:z,isValidConnection:r||t.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?null==y||y(e):null==b||b(e)};return(0,l.jsx)("div",{"data-handleid":w,"data-nodeid":E,"data-handlepos":o,"data-id":"".concat(M,"-").concat(E,"-").concat(w,"-").concat(n),className:(0,a.Z)(["react-flow__handle","react-flow__handle-".concat(o),"nodrag",k,m,{source:!x,target:x,connectable:i,connectablestart:d,connectableend:u,clickconnecting:R,connectingfrom:P,connectingto:j,valid:I,connectionindicator:i&&(!D||_)&&(D||L?u:d)}]),onMouseDown:B,onTouchStart:B,onClick:N?e=>{let{onClickConnectStart:t,onClickConnectEnd:o,connectionClickStartHandle:l,connectionMode:i,isValidConnection:a,lib:c,rfId:u,nodeLookup:g,connection:f}=C.getState();if(!E||!l&&!d)return;if(!l){null==t||t(e.nativeEvent,{nodeId:E,handleId:w,handleType:n}),C.setState({connectionClickStartHandle:{nodeId:E,type:n,id:w}});return}let p=(0,s.S2)(e.target),h=r||a,{connection:v,isValid:m}=s.Ql.isValid(e.nativeEvent,{handle:{nodeId:E,id:w,type:n},connectionMode:i,fromNodeId:l.nodeId,fromHandleId:l.id||null,fromType:l.type,isValidConnection:h,flowId:u,doc:p,lib:c,nodeLookup:g});m&&v&&z(v);let y=structuredClone(f);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,null==o||o(e,y),C.setState({connectionClickStartHandle:null})}:void 0,ref:t,...S,children:p})})),eM={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},eP={input:function(e){let{data:t,isConnectable:n,sourcePosition:o=s.Ly.Bottom}=e;return(0,l.jsxs)(l.Fragment,{children:[null==t?void 0:t.label,(0,l.jsx)(ek,{type:"source",position:o,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:o=s.Ly.Top,sourcePosition:r=s.Ly.Bottom}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ek,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label,(0,l.jsx)(ek,{type:"source",position:r,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:o=s.Ly.Top}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ek,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label]})},group:function(){return null}},ej=e=>{let{width:t,height:n,x:o,y:r}=(0,s.W0)(e.nodeLookup,{filter:e=>!!e.selected});return{width:(0,s.kE)(t)?t:null,height:(0,s.kE)(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(o,"px,").concat(r,"px)")}};function eR(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:o}=e,r=v(),{width:s,height:d,transformString:u,userSelectionActive:g}=h(ej,c.X),f=eS(),p=(0,i.useRef)(null);return((0,i.useEffect)(()=>{if(!o){var e;null===(e=p.current)||void 0===e||e.focus({preventScroll:!0})}},[o]),ey({nodeRef:p}),!g&&s&&d)?(0,l.jsx)("div",{className:(0,a.Z)(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:(0,l.jsx)("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:t?e=>{t(e,r.getState().nodes.filter(e=>e.selected))}:void 0,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(eM,e.key)&&(e.preventDefault(),f({direction:eM[e.key],factor:e.shiftKey?4:1}))},style:{width:s,height:d}})}):null}let e_=window,eD=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function eL(e){let{children:t,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:d,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:g,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:b,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:x,zoomOnScroll:C,zoomOnPinch:E,panOnScroll:N,panOnScrollSpeed:k,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:j,defaultViewport:R,translateExtent:_,minZoom:D,maxZoom:L,preventScrolling:I,onSelectionContextMenu:A,noWheelClassName:O,noPanClassName:z,disableKeyboardA11y:B,onViewportChange:V,isControlledViewport:H}=e,{nodesSelectionActive:F,userSelectionActive:T}=h(eD),X=Z(g,{target:e_}),W=Z(S,{target:e_}),K=W||j,Q=W||N,Y=f&&!0!==K,U=X||T||Y;return!function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e,o=v(),{deleteElements:r}=ei(),l=Z(t,{actInsideInputWithModifier:!1}),a=Z(n,{target:es});(0,i.useEffect)(()=>{if(l){let{edges:e,nodes:t}=o.getState();r({nodes:t.filter(ea),edges:e.filter(ea)}),o.setState({nodesSelectionActive:!1})}},[l]),(0,i.useEffect)(()=>{o.setState({multiSelectionActive:a})},[a])}({deleteKeyCode:u,multiSelectionKeyCode:b}),(0,l.jsx)(eu,{onPaneContextMenu:s,elementsSelectable:x,zoomOnScroll:C,zoomOnPinch:E,panOnScroll:Q,panOnScrollSpeed:k,panOnScrollMode:M,zoomOnDoubleClick:P,panOnDrag:!X&&K,defaultViewport:R,translateExtent:_,minZoom:D,maxZoom:L,zoomActivationKeyCode:w,preventScrolling:I,noWheelClassName:O,noPanClassName:z,onViewportChange:V,isControlledViewport:H,paneClickDistance:c,children:(0,l.jsxs)(ev,{onSelectionStart:m,onSelectionEnd:y,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:d,panOnDrag:K,isSelecting:!!U,selectionMode:p,selectionKeyPressed:X,selectionOnDrag:Y,children:[t,F&&(0,l.jsx)(eR,{onSelectionContextMenu:A,noPanClassName:z,disableKeyboardA11y:B})]})})}eL.displayName="FlowRenderer";let eI=(0,i.memo)(eL),eA=e=>t=>e?(0,s.f5)(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()),eO=e=>e.updateNodeInternals;function ez(e){var t,n,o,r,d,u,g,f,p,m,y,S,w;let{id:x,onClick:C,onMouseEnter:E,onMouseMove:N,onMouseLeave:k,onContextMenu:M,onDoubleClick:P,nodesDraggable:j,elementsSelectable:R,nodesConnectable:_,nodesFocusable:D,resizeObserver:L,noDragClassName:I,noPanClassName:A,disableKeyboardA11y:O,rfId:z,nodeTypes:B,nodeClickDistance:V,onError:H}=e,{node:Z,internals:F,isParent:T}=h(e=>{let t=e.nodeLookup.get(x),n=e.parentLookup.has(x);return{node:t,internals:t.internals,isParent:n}},c.X),X=Z.type||"default",W=(null==B?void 0:B[X])||eP[X];void 0===W&&(null==H||H("003",s.Qj.error003(X)),X="default",W=(null==B?void 0:B.default)||eP.default);let K=!!(Z.draggable||j&&void 0===Z.draggable),Q=!!(Z.selectable||R&&void 0===Z.selectable),Y=!!(Z.connectable||_&&void 0===Z.connectable),U=!!(Z.focusable||D&&void 0===Z.focusable),q=v(),G=(0,s.nb)(Z),$=function(e){let{node:t,nodeType:n,hasDimensions:o,resizeObserver:r}=e,l=v(),a=(0,i.useRef)(null),s=(0,i.useRef)(null),d=(0,i.useRef)(t.sourcePosition),c=(0,i.useRef)(t.targetPosition),u=(0,i.useRef)(n),g=o&&!!t.internals.handleBounds;return(0,i.useEffect)(()=>{!a.current||t.hidden||g&&s.current===a.current||(s.current&&(null==r||r.unobserve(s.current)),null==r||r.observe(a.current),s.current=a.current)},[g,t.hidden]),(0,i.useEffect)(()=>()=>{s.current&&(null==r||r.unobserve(s.current),s.current=null)},[]),(0,i.useEffect)(()=>{if(a.current){let e=u.current!==n,o=d.current!==t.sourcePosition,r=c.current!==t.targetPosition;(e||o||r)&&(u.current=n,d.current=t.sourcePosition,c.current=t.targetPosition,l.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:a.current,force:!0}]])))}},[t.id,n,t.sourcePosition,t.targetPosition]),a}({node:Z,nodeType:X,hasDimensions:G,resizeObserver:L}),J=ey({nodeRef:$,disabled:Z.hidden||!K,noDragClassName:I,handleSelector:Z.dragHandle,nodeId:x,isSelectable:Q,nodeClickDistance:V}),ee=eS();if(Z.hidden)return null;let et=(0,s.Rf)(Z),en=void 0===Z.internals.handleBounds?{width:null!==(p=null!==(f=Z.width)&&void 0!==f?f:Z.initialWidth)&&void 0!==p?p:null===(u=Z.style)||void 0===u?void 0:u.width,height:null!==(y=null!==(m=Z.height)&&void 0!==m?m:Z.initialHeight)&&void 0!==y?y:null===(g=Z.style)||void 0===g?void 0:g.height}:{width:null!==(S=Z.width)&&void 0!==S?S:null===(r=Z.style)||void 0===r?void 0:r.width,height:null!==(w=Z.height)&&void 0!==w?w:null===(d=Z.style)||void 0===d?void 0:d.height},eo=Q||K||C||E||N||k;return(0,l.jsx)("div",{className:(0,a.Z)(["react-flow__node","react-flow__node-".concat(X),{[A]:K},Z.className,{selected:Z.selected,selectable:Q,parent:T,draggable:K,dragging:J}]),ref:$,style:{zIndex:F.z,transform:"translate(".concat(F.positionAbsolute.x,"px,").concat(F.positionAbsolute.y,"px)"),pointerEvents:eo?"all":"none",visibility:G?"visible":"hidden",...Z.style,...en},"data-id":x,"data-testid":"rf__node-".concat(x),onMouseEnter:E?e=>E(e,{...F.userNode}):void 0,onMouseMove:N?e=>N(e,{...F.userNode}):void 0,onMouseLeave:k?e=>k(e,{...F.userNode}):void 0,onContextMenu:M?e=>M(e,{...F.userNode}):void 0,onClick:e=>{let{selectNodesOnDrag:t,nodeDragThreshold:n}=q.getState();Q&&(!t||!K||n>0)&&em({id:x,store:q,nodeRef:$}),C&&C(e,{...F.userNode})},onDoubleClick:P?e=>P(e,{...F.userNode}):void 0,onKeyDown:U?e=>{if(!(0,s.s$)(e.nativeEvent)&&!O){if(s.wQ.includes(e.key)&&Q)em({id:x,store:q,unselect:"Escape"===e.key,nodeRef:$});else if(K&&Z.selected&&Object.prototype.hasOwnProperty.call(eM,e.key)){e.preventDefault();let{ariaLabelConfig:t}=q.getState();q.setState({ariaLiveMessage:t["node.a11yDescription.ariaLiveMessage"]({direction:e.key.replace("Arrow","").toLowerCase(),x:~~F.positionAbsolute.x,y:~~F.positionAbsolute.y})}),ee({direction:eM[e.key],factor:e.shiftKey?4:1})}}}:void 0,tabIndex:U?0:void 0,onFocus:U?()=>{var e;if(O||!(null===(e=$.current)||void 0===e?void 0:e.matches(":focus-visible")))return;let{transform:t,width:n,height:o,autoPanOnNodeFocus:r,setCenter:l}=q.getState();r&&((0,s.f5)(new Map([[x,Z]]),{x:0,y:0,width:n,height:o},t,!0).length>0||l(Z.position.x+et.width/2,Z.position.y+et.height/2,{zoom:t[2]}))}:void 0,role:null!==(t=Z.ariaRole)&&void 0!==t?t:U?"group":void 0,"aria-roledescription":"node","aria-describedby":O?void 0:"".concat(b,"-").concat(z),"aria-label":Z.ariaLabel,...Z.domAttributes,children:(0,l.jsx)(ex,{value:x,children:(0,l.jsx)(W,{id:x,data:Z.data,type:X,positionAbsoluteX:F.positionAbsolute.x,positionAbsoluteY:F.positionAbsolute.y,selected:null!==(n=Z.selected)&&void 0!==n&&n,selectable:Q,draggable:K,deletable:null===(o=Z.deletable)||void 0===o||o,isConnectable:Y,sourcePosition:Z.sourcePosition,targetPosition:Z.targetPosition,dragging:J,dragHandle:Z.dragHandle,zIndex:F.z,parentId:Z.parentId,...et})})})}let eB=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function eV(e){var t;let{nodesDraggable:n,nodesConnectable:o,nodesFocusable:r,elementsSelectable:a,onError:s}=h(eB,c.X),d=(t=e.onlyRenderVisibleElements,h((0,i.useCallback)(eA(t),[t]),c.X)),u=function(){let e=h(eO),[t]=(0,i.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,i.useEffect)(()=>()=>{null==t||t.disconnect()},[t]),t}();return(0,l.jsx)("div",{className:"react-flow__nodes",style:ed,children:d.map(t=>(0,l.jsx)(ez,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:n,nodesConnectable:o,nodesFocusable:r,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},t))})}eV.displayName="NodeRenderer";let eH=(0,i.memo)(eV),eZ={[s.QZ.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,l.jsx)("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[s.QZ.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,l.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},eF=e=>{let{id:t,type:n,color:o,width:r=12.5,height:a=12.5,markerUnits:d="strokeWidth",strokeWidth:c,orient:u="auto-start-reverse"}=e,g=function(e){let t=v();return(0,i.useMemo)(()=>{if(!Object.prototype.hasOwnProperty.call(eZ,e)){var n,o;return null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"009",s.Qj.error009(e)),null}return eZ[e]},[e])}(n);return g?(0,l.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(r),markerHeight:"".concat(a),viewBox:"-10 -10 20 20",markerUnits:d,orient:u,refX:"0",refY:"0",children:(0,l.jsx)(g,{color:o,strokeWidth:c})}):null},eT=e=>{let{defaultColor:t,rfId:n}=e,o=h(e=>e.edges),r=h(e=>e.defaultEdgeOptions),a=(0,i.useMemo)(()=>(0,s.n3)(o,{id:n,defaultColor:t,defaultMarkerStart:null==r?void 0:r.markerStart,defaultMarkerEnd:null==r?void 0:r.markerEnd}),[o,r,n,t]);return a.length?(0,l.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,l.jsx)("defs",{children:a.map(e=>(0,l.jsx)(eF,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};eT.displayName="MarkerDefinitions";var eX=(0,i.memo)(eT);function eW(e){let{x:t,y:n,label:o,labelStyle:r,labelShowBg:s=!0,labelBgStyle:d,labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:g,className:f,...p}=e,[h,v]=(0,i.useState)({x:1,y:0,width:0,height:0}),m=(0,a.Z)(["react-flow__edge-textwrapper",f]),y=(0,i.useRef)(null);return((0,i.useEffect)(()=>{if(y.current){let e=y.current.getBBox();v({x:e.x,y:e.y,width:e.width,height:e.height})}},[o]),o)?(0,l.jsxs)("g",{transform:"translate(".concat(t-h.width/2," ").concat(n-h.height/2,")"),className:m,visibility:h.width?"visible":"hidden",...p,children:[s&&(0,l.jsx)("rect",{width:h.width+2*c[0],x:-c[0],y:-c[1],height:h.height+2*c[1],className:"react-flow__edge-textbg",style:d,rx:u,ry:u}),(0,l.jsx)("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:y,style:r,children:o}),g]}):null}eW.displayName="EdgeText";let eK=(0,i.memo)(eW);function eQ(e){let{path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:d,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,interactionWidth:f=20,...p}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{...p,d:t,fill:"none",className:(0,a.Z)(["react-flow__edge-path",p.className])}),f&&(0,l.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&(0,s.kE)(n)&&(0,s.kE)(o)?(0,l.jsx)(eK,{x:n,y:o,label:r,labelStyle:i,labelShowBg:d,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g}):null]})}function eY(e){let{pos:t,x1:n,y1:o,x2:r,y2:l}=e;return t===s.Ly.Left||t===s.Ly.Right?[.5*(n+r),o]:[n,.5*(o+l)]}function eU(e){let{sourceX:t,sourceY:n,sourcePosition:o=s.Ly.Bottom,targetX:r,targetY:l,targetPosition:i=s.Ly.Top}=e,[a,d]=eY({pos:o,x1:t,y1:n,x2:r,y2:l}),[c,u]=eY({pos:i,x1:r,y1:l,x2:t,y2:n}),[g,f,p,h]=(0,s.lM)({sourceX:t,sourceY:n,targetX:r,targetY:l,sourceControlX:a,sourceControlY:d,targetControlX:c,targetControlY:u});return["M".concat(t,",").concat(n," C").concat(a,",").concat(d," ").concat(c,",").concat(u," ").concat(r,",").concat(l),g,f,p,h]}function eq(e){return(0,i.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:d,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:v,markerEnd:m,markerStart:y,interactionWidth:b}=t,[S,w,x]=eU({sourceX:o,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:d}),C=e.isInternal?void 0:n;return(0,l.jsx)(eQ,{id:C,path:S,labelX:w,labelY:x,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:v,markerEnd:m,markerStart:y,interactionWidth:b})})}let eG=eq({isInternal:!1}),e$=eq({isInternal:!0});function eJ(e){return(0,i.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,sourcePosition:v=s.Ly.Bottom,targetPosition:m=s.Ly.Top,markerEnd:y,markerStart:b,pathOptions:S,interactionWidth:w}=t,[x,C,E]=(0,s.OW)({sourceX:o,sourceY:r,sourcePosition:v,targetX:i,targetY:a,targetPosition:m,borderRadius:null==S?void 0:S.borderRadius,offset:null==S?void 0:S.offset,stepPosition:null==S?void 0:S.stepPosition}),N=e.isInternal?void 0:n;return(0,l.jsx)(eQ,{id:N,path:x,labelX:C,labelY:E,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:y,markerStart:b,interactionWidth:w})})}eG.displayName="SimpleBezierEdge",e$.displayName="SimpleBezierEdgeInternal";let e0=eJ({isInternal:!1}),e1=eJ({isInternal:!0});function e3(e){return(0,i.memo)(t=>{var n;let{id:o,...r}=t,a=e.isInternal?void 0:o;return(0,l.jsx)(e0,{...r,id:a,pathOptions:(0,i.useMemo)(()=>{var e;return{borderRadius:0,offset:null===(e=r.pathOptions)||void 0===e?void 0:e.offset}},[null===(n=r.pathOptions)||void 0===n?void 0:n.offset])})})}e0.displayName="SmoothStepEdge",e1.displayName="SmoothStepEdgeInternal";let e2=e3({isInternal:!1}),e5=e3({isInternal:!0});function e4(e){return(0,i.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:v,markerStart:m,interactionWidth:y}=t,[b,S,w]=(0,s.Hm)({sourceX:o,sourceY:r,targetX:i,targetY:a}),x=e.isInternal?void 0:n;return(0,l.jsx)(eQ,{id:x,path:b,labelX:S,labelY:w,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:f,labelBgBorderRadius:p,style:h,markerEnd:v,markerStart:m,interactionWidth:y})})}e2.displayName="StepEdge",e5.displayName="StepEdgeInternal";let e6=e4({isInternal:!1}),e8=e4({isInternal:!0});function e7(e){return(0,i.memo)(t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:d=s.Ly.Bottom,targetPosition:c=s.Ly.Top,label:u,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:v,style:m,markerEnd:y,markerStart:b,pathOptions:S,interactionWidth:w}=t,[x,C,E]=(0,s.OQ)({sourceX:o,sourceY:r,sourcePosition:d,targetX:i,targetY:a,targetPosition:c,curvature:null==S?void 0:S.curvature}),N=e.isInternal?void 0:n;return(0,l.jsx)(eQ,{id:N,path:x,labelX:C,labelY:E,label:u,labelStyle:g,labelShowBg:f,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:v,style:m,markerEnd:y,markerStart:b,interactionWidth:w})})}e6.displayName="StraightEdge",e8.displayName="StraightEdgeInternal";let e9=e7({isInternal:!1}),te=e7({isInternal:!0});e9.displayName="BezierEdge",te.displayName="BezierEdgeInternal";let tt={default:te,straight:e8,step:e5,smoothstep:e1,simplebezier:e$},tn={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},to=(e,t,n)=>n===s.Ly.Left?e-t:n===s.Ly.Right?e+t:e,tr=(e,t,n)=>n===s.Ly.Top?e-t:n===s.Ly.Bottom?e+t:e,tl="react-flow__edgeupdater";function ti(e){let{position:t,centerX:n,centerY:o,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:d,type:c}=e;return(0,l.jsx)("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:d,className:(0,a.Z)([tl,"".concat(tl,"-").concat(c)]),cx:to(n,r,t),cy:tr(o,r,t),r:r,stroke:"transparent",fill:"transparent"})}function ta(e){let{isReconnectable:t,reconnectRadius:n,edge:o,sourceX:r,sourceY:i,targetX:a,targetY:d,sourcePosition:c,targetPosition:u,onReconnect:g,onReconnectStart:f,onReconnectEnd:p,setReconnecting:h,setUpdateHover:m}=e,y=v(),b=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:n,domNode:r,isValidConnection:l,connectionMode:i,connectionRadius:a,lib:d,onConnectStart:c,onConnectEnd:u,cancelConnection:v,nodeLookup:m,rfId:b,panBy:S,updateConnection:w}=y.getState(),x="target"===t.type;s.Ql.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:i,connectionRadius:a,domNode:r,handleId:t.id,nodeId:t.nodeId,nodeLookup:m,isTarget:x,edgeUpdaterType:t.type,lib:d,flowId:b,cancelConnection:v,panBy:S,isValidConnection:l,onConnect:e=>null==g?void 0:g(o,e),onConnectStart:(n,r)=>{h(!0),null==f||f(e,o,t.type),null==c||c(n,r)},onConnectEnd:u,onReconnectEnd:(e,n)=>{h(!1),null==p||p(e,o,t.type,n)},updateConnection:w,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold})},S=()=>m(!0),w=()=>m(!1);return(0,l.jsxs)(l.Fragment,{children:[(!0===t||"source"===t)&&(0,l.jsx)(ti,{position:c,centerX:r,centerY:i,radius:n,onMouseDown:e=>{var t;return b(e,{nodeId:o.target,id:null!==(t=o.targetHandle)&&void 0!==t?t:null,type:"target"})},onMouseEnter:S,onMouseOut:w,type:"source"}),(!0===t||"target"===t)&&(0,l.jsx)(ti,{position:u,centerX:a,centerY:d,radius:n,onMouseDown:e=>{var t;return b(e,{nodeId:o.source,id:null!==(t=o.sourceHandle)&&void 0!==t?t:null,type:"source"})},onMouseEnter:S,onMouseOut:w,type:"target"})]})}function ts(e){var t,n;let{id:o,edgesFocusable:r,edgesReconnectable:d,elementsSelectable:u,onClick:g,onDoubleClick:f,onContextMenu:p,onMouseEnter:m,onMouseMove:y,onMouseLeave:b,reconnectRadius:w,onReconnect:x,onReconnectStart:C,onReconnectEnd:E,rfId:N,edgeTypes:k,noPanClassName:M,onError:P,disableKeyboardA11y:j}=e,R=h(e=>e.edgeLookup.get(o)),_=h(e=>e.defaultEdgeOptions),D=(R=_?{..._,...R}:R).type||"default",L=(null==k?void 0:k[D])||tt[D];void 0===L&&(null==P||P("011",s.Qj.error011(D)),D="default",L=(null==k?void 0:k.default)||tt.default);let I=!!(R.focusable||r&&void 0===R.focusable),A=void 0!==x&&(R.reconnectable||d&&void 0===R.reconnectable),O=!!(R.selectable||u&&void 0===R.selectable),z=(0,i.useRef)(null),[B,V]=(0,i.useState)(!1),[H,Z]=(0,i.useState)(!1),F=v(),{zIndex:T,sourceX:X,sourceY:W,targetX:K,targetY:Q,sourcePosition:Y,targetPosition:U}=h((0,i.useCallback)(e=>{let t=e.nodeLookup.get(R.source),n=e.nodeLookup.get(R.target);if(!t||!n)return{zIndex:R.zIndex,...tn};let r=(0,s.JU)({id:o,sourceNode:t,targetNode:n,sourceHandle:R.sourceHandle||null,targetHandle:R.targetHandle||null,connectionMode:e.connectionMode,onError:P});return{zIndex:(0,s.xx)({selected:R.selected,zIndex:R.zIndex,sourceNode:t,targetNode:n,elevateOnSelect:e.elevateEdgesOnSelect}),...r||tn}},[R.source,R.target,R.sourceHandle,R.targetHandle,R.selected,R.zIndex]),c.X),q=(0,i.useMemo)(()=>R.markerStart?"url('#".concat((0,s.dW)(R.markerStart,N),"')"):void 0,[R.markerStart,N]),G=(0,i.useMemo)(()=>R.markerEnd?"url('#".concat((0,s.dW)(R.markerEnd,N),"')"):void 0,[R.markerEnd,N]);if(R.hidden||null===X||null===W||null===K||null===Q)return null;let $=f?e=>{f(e,{...R})}:void 0,J=p?e=>{p(e,{...R})}:void 0,ee=m?e=>{m(e,{...R})}:void 0,et=y?e=>{y(e,{...R})}:void 0,en=b?e=>{b(e,{...R})}:void 0;return(0,l.jsx)("svg",{style:{zIndex:T},children:(0,l.jsxs)("g",{className:(0,a.Z)(["react-flow__edge","react-flow__edge-".concat(D),R.className,M,{selected:R.selected,animated:R.animated,inactive:!O&&!g,updating:B,selectable:O}]),onClick:e=>{let{addSelectedEdges:t,unselectNodesAndEdges:n,multiSelectionActive:r}=F.getState();if(O){if(F.setState({nodesSelectionActive:!1}),R.selected&&r){var l;n({nodes:[],edges:[R]}),null===(l=z.current)||void 0===l||l.blur()}else t([o])}g&&g(e,R)},onDoubleClick:$,onContextMenu:J,onMouseEnter:ee,onMouseMove:et,onMouseLeave:en,onKeyDown:I?e=>{if(!j&&s.wQ.includes(e.key)&&O){let{unselectNodesAndEdges:n,addSelectedEdges:r}=F.getState();if("Escape"===e.key){var t;null===(t=z.current)||void 0===t||t.blur(),n({edges:[R]})}else r([o])}}:void 0,tabIndex:I?0:void 0,role:null!==(t=R.ariaRole)&&void 0!==t?t:I?"group":"img","aria-roledescription":"edge","data-id":o,"data-testid":"rf__edge-".concat(o),"aria-label":null===R.ariaLabel?void 0:R.ariaLabel||"Edge from ".concat(R.source," to ").concat(R.target),"aria-describedby":I?"".concat(S,"-").concat(N):void 0,ref:z,...R.domAttributes,children:[!H&&(0,l.jsx)(L,{id:o,source:R.source,target:R.target,type:R.type,selected:R.selected,animated:R.animated,selectable:O,deletable:null===(n=R.deletable)||void 0===n||n,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,sourceX:X,sourceY:W,targetX:K,targetY:Q,sourcePosition:Y,targetPosition:U,data:R.data,style:R.style,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerStart:q,markerEnd:G,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth}),A&&(0,l.jsx)(ta,{edge:R,isReconnectable:A,reconnectRadius:w,onReconnect:x,onReconnectStart:C,onReconnectEnd:E,sourceX:X,sourceY:W,targetX:K,targetY:Q,sourcePosition:Y,targetPosition:U,setUpdateHover:V,setReconnecting:Z})]})})}let td=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function tc(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:o,edgeTypes:r,noPanClassName:a,onReconnect:d,onEdgeContextMenu:u,onEdgeMouseEnter:g,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:v,reconnectRadius:m,onEdgeDoubleClick:y,onReconnectStart:b,onReconnectEnd:S,disableKeyboardA11y:w}=e,{edgesFocusable:x,edgesReconnectable:C,elementsSelectable:E,onError:N}=h(td,c.X),k=h((0,i.useCallback)(e=>{if(!n)return e.edges.map(e=>e.id);let t=[];if(e.width&&e.height)for(let n of e.edges){let o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&(0,s.RY)({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[n]),c.X);return(0,l.jsxs)("div",{className:"react-flow__edges",children:[(0,l.jsx)(eX,{defaultColor:t,rfId:o}),k.map(e=>(0,l.jsx)(ts,{id:e,edgesFocusable:x,edgesReconnectable:C,elementsSelectable:E,noPanClassName:a,onReconnect:d,onContextMenu:u,onMouseEnter:g,onMouseMove:f,onMouseLeave:p,onClick:v,reconnectRadius:m,onDoubleClick:y,onReconnectStart:b,onReconnectEnd:S,rfId:o,onError:N,edgeTypes:r,disableKeyboardA11y:w},e))]})}tc.displayName="EdgeRenderer";let tu=(0,i.memo)(tc),tg=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function tf(e){let{children:t}=e,n=h(tg);return(0,l.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}let tp=e=>{var t;return null===(t=e.panZoom)||void 0===t?void 0:t.syncViewport};function th(e){return e.connection.inProgress?{...e.connection,to:(0,s.m)(e.connection.to,e.transform)}:{...e.connection}}function tv(e){return h(e?t=>e(th(t)):th,c.X)}let tm=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function ty(e){let{containerStyle:t,style:n,type:o,component:r}=e,{nodesConnectable:i,width:d,height:u,isValid:g,inProgress:f}=h(tm,c.X);return d&&i&&f?(0,l.jsx)("svg",{style:t,width:d,height:u,className:"react-flow__connectionline react-flow__container",children:(0,l.jsx)("g",{className:(0,a.Z)(["react-flow__connection",(0,s.Zp)(g)]),children:(0,l.jsx)(tb,{style:n,type:o,CustomComponent:r,isValid:g})})}):null}let tb=e=>{let{style:t,type:n=s.t8.Bezier,CustomComponent:o,isValid:r}=e,{inProgress:i,from:a,fromNode:d,fromHandle:c,fromPosition:u,to:g,toNode:f,toHandle:p,toPosition:h}=tv();if(!i)return;if(o)return(0,l.jsx)(o,{connectionLineType:n,connectionLineStyle:t,fromNode:d,fromHandle:c,fromX:a.x,fromY:a.y,toX:g.x,toY:g.y,fromPosition:u,toPosition:h,connectionStatus:(0,s.Zp)(r),toNode:f,toHandle:p});let v="",m={sourceX:a.x,sourceY:a.y,sourcePosition:u,targetX:g.x,targetY:g.y,targetPosition:h};switch(n){case s.t8.Bezier:[v]=(0,s.OQ)(m);break;case s.t8.SimpleBezier:[v]=eU(m);break;case s.t8.Step:[v]=(0,s.OW)({...m,borderRadius:0});break;case s.t8.SmoothStep:[v]=(0,s.OW)(m);break;default:[v]=(0,s.Hm)(m)}return(0,l.jsx)("path",{d:v,fill:"none",className:"react-flow__connection-path",style:t})};tb.displayName="ConnectionLine";let tS={};function tw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tS;(0,i.useRef)(e),v(),(0,i.useEffect)(()=>{},[e])}function tx(e){let{nodeTypes:t,edgeTypes:n,onInit:o,onNodeClick:r,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:d,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:g,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:y,connectionLineType:b,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:x,selectionKeyCode:C,selectionOnDrag:E,selectionMode:N,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:P,deleteKeyCode:j,onlyRenderVisibleElements:R,elementsSelectable:_,defaultViewport:D,translateExtent:L,minZoom:I,maxZoom:A,preventScrolling:O,defaultMarkerColor:z,zoomOnScroll:B,zoomOnPinch:V,panOnScroll:H,panOnScrollSpeed:Z,panOnScrollMode:F,zoomOnDoubleClick:T,panOnDrag:X,onPaneClick:W,onPaneMouseEnter:K,onPaneMouseMove:Q,onPaneMouseLeave:Y,onPaneScroll:U,onPaneContextMenu:q,paneClickDistance:G,nodeClickDistance:$,onEdgeContextMenu:J,onEdgeMouseEnter:ee,onEdgeMouseMove:et,onEdgeMouseLeave:en,reconnectRadius:eo,onReconnect:er,onReconnectStart:el,onReconnectEnd:ea,noDragClassName:es,noWheelClassName:ed,noPanClassName:ec,disableKeyboardA11y:eu,nodeExtent:eg,rfId:ef,viewport:ep,onViewportChange:eh}=e;return tw(t),tw(n),v(),(0,i.useRef)(!1),(0,i.useEffect)(()=>{},[]),!function(e){let t=ei(),n=(0,i.useRef)(!1);(0,i.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(o),!function(e){let t=h(tp),n=v();(0,i.useEffect)(()=>{e&&(null==t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ep),(0,l.jsx)(eI,{onPaneClick:W,onPaneMouseEnter:K,onPaneMouseMove:Q,onPaneMouseLeave:Y,onPaneContextMenu:q,onPaneScroll:U,paneClickDistance:G,deleteKeyCode:j,selectionKeyCode:C,selectionOnDrag:E,selectionMode:N,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:k,panActivationKeyCode:M,zoomActivationKeyCode:P,elementsSelectable:_,zoomOnScroll:B,zoomOnPinch:V,zoomOnDoubleClick:T,panOnScroll:H,panOnScrollSpeed:Z,panOnScrollMode:F,panOnDrag:X,defaultViewport:D,translateExtent:L,minZoom:I,maxZoom:A,onSelectionContextMenu:p,preventScrolling:O,noDragClassName:es,noWheelClassName:ed,noPanClassName:ec,disableKeyboardA11y:eu,onViewportChange:eh,isControlledViewport:!!ep,children:(0,l.jsxs)(tf,{children:[(0,l.jsx)(tu,{edgeTypes:n,onEdgeClick:a,onEdgeDoubleClick:d,onReconnect:er,onReconnectStart:el,onReconnectEnd:ea,onlyRenderVisibleElements:R,onEdgeContextMenu:J,onEdgeMouseEnter:ee,onEdgeMouseMove:et,onEdgeMouseLeave:en,reconnectRadius:eo,defaultMarkerColor:z,noPanClassName:ec,disableKeyboardA11y:eu,rfId:ef}),(0,l.jsx)(ty,{style:S,type:b,component:w,containerStyle:x}),(0,l.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,l.jsx)(eH,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:g,onNodeContextMenu:f,nodeClickDistance:$,onlyRenderVisibleElements:R,noPanClassName:ec,noDragClassName:es,disableKeyboardA11y:eu,nodeExtent:eg,rfId:ef}),(0,l.jsx)("div",{className:"react-flow__viewport-portal"})]})})}tx.displayName="GraphView";let tC=(0,i.memo)(tx),tE=function(){var e,t,n;let{nodes:o,edges:r,defaultNodes:l,defaultEdges:i,width:a,height:d,fitView:c,fitViewOptions:u,minZoom:g=.5,maxZoom:f=2,nodeOrigin:p,nodeExtent:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=new Map,m=new Map,y=new Map,b=new Map,S=null!==(e=null!=i?i:r)&&void 0!==e?e:[],w=null!==(t=null!=l?l:o)&&void 0!==t?t:[],x=null!=p?p:[0,0],C=null!=h?h:s.k5;(0,s.be)(y,b,S);let E=(0,s.yF)(w,v,m,{nodeOrigin:x,nodeExtent:C,elevateNodesOnSelect:!1}),N=[0,0,1];if(c&&a&&d){let e=(0,s.W0)(v,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),{x:t,y:o,zoom:r}=(0,s.$i)(e,a,d,g,f,null!==(n=null==u?void 0:u.padding)&&void 0!==n?n:.1);N=[t,o,r]}return{rfId:"1",width:0,height:0,transform:N,nodes:w,nodesInitialized:E,nodeLookup:v,parentLookup:m,edges:S,edgeLookup:b,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==l,hasDefaultEdges:void 0!==i,panZoom:null,minZoom:g,maxZoom:f,translateExtent:s.k5,nodeExtent:C,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:s.jD.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:null!=c&&c,fitViewOptions:u,fitViewResolver:null,connection:{...s.Ky},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:s.Ki,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:s.Z}},tN=e=>{let{nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:l,height:i,fitView:a,fitViewOptions:c,minZoom:u,maxZoom:g,nodeOrigin:f,nodeExtent:p}=e;return(0,d.F)((e,d)=>{async function h(){let{nodeLookup:t,panZoom:n,fitViewOptions:o,fitViewResolver:r,width:l,height:i,minZoom:a,maxZoom:c}=d();n&&(await (0,s.Eg)({nodes:t,width:l,height:i,panZoom:n,minZoom:a,maxZoom:c},o),null==r||r.resolve(!0),e({fitViewResolver:null}))}return{...tE({nodes:t,edges:n,width:l,height:i,fitView:a,fitViewOptions:c,minZoom:u,maxZoom:g,nodeOrigin:f,nodeExtent:p,defaultNodes:o,defaultEdges:r}),setNodes:t=>{let{nodeLookup:n,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:l,fitViewQueued:i}=d(),a=(0,s.yF)(t,n,o,{nodeOrigin:r,nodeExtent:p,elevateNodesOnSelect:l,checkEquality:!0});i&&a?(h(),e({nodes:t,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):e({nodes:t,nodesInitialized:a})},setEdges:t=>{let{connectionLookup:n,edgeLookup:o}=d();(0,s.be)(n,o,t),e({edges:t})},setDefaultNodesAndEdges:(t,n)=>{if(t){let{setNodes:n}=d();n(t),e({hasDefaultNodes:!0})}if(n){let{setEdges:t}=d();t(n),e({hasDefaultEdges:!0})}},updateNodeInternals:t=>{let{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,domNode:l,nodeOrigin:i,nodeExtent:a,debug:c,fitViewQueued:u}=d(),{changes:g,updatedInternals:f}=(0,s.B1)(t,o,r,l,i,a);f&&((0,s.VV)(o,r,{nodeOrigin:i,nodeExtent:a}),u?(h(),e({fitViewQueued:!1,fitViewOptions:void 0})):e({}),(null==g?void 0:g.length)>0&&(c&&console.log("React Flow: trigger node changes",g),null==n||n(g)))},updateNodePositions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=[],{nodeLookup:r,triggerNodeChanges:l}=d();for(let[l,s]of e){let e=r.get(l),d=!!((null==e?void 0:e.expandParent)&&(null==e?void 0:e.parentId)&&(null==s?void 0:s.position)),c={id:l,type:"position",position:d?{x:Math.max(0,s.position.x),y:Math.max(0,s.position.y)}:s.position,dragging:t};if(d&&e.parentId){var i,a;n.push({id:l,parentId:e.parentId,rect:{...s.internals.positionAbsolute,width:null!==(i=s.measured.width)&&void 0!==i?i:0,height:null!==(a=s.measured.height)&&void 0!==a?a:0}})}o.push(c)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=d(),l=(0,s.so)(n,r,e,t);o.push(...l)}l(o)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:l}=d();(null==e?void 0:e.length)&&(r&&n(W(e,o)),l&&console.log("React Flow: trigger node changes",e),null==t||t(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:l}=d();(null==e?void 0:e.length)&&(r&&n(W(e,o)),l&&console.log("React Flow: trigger edge changes",e),null==t||t(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:l}=d();if(t){r(e.map(e=>Y(e,!0)));return}r(U(o,new Set([...e]),!0)),l(U(n))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:l}=d();if(t){l(e.map(e=>Y(e,!0)));return}l(U(n,new Set([...e]))),r(U(o,new Set,!0))},unselectNodesAndEdges:function(){let{nodes:e,edges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{edges:n,nodes:o,nodeLookup:r,triggerNodeChanges:l,triggerEdgeChanges:i}=d(),a=(e||o).map(e=>{let t=r.get(e.id);return t&&(t.selected=!1),Y(e.id,!1)}),s=(t||n).map(e=>Y(e.id,!1));l(a),i(s)},setMinZoom:t=>{let{panZoom:n,maxZoom:o}=d();null==n||n.setScaleExtent([t,o]),e({minZoom:t})},setMaxZoom:t=>{let{panZoom:n,minZoom:o}=d();null==n||n.setScaleExtent([o,t]),e({maxZoom:t})},setTranslateExtent:t=>{var n;null===(n=d().panZoom)||void 0===n||n.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:e=>{var t;null===(t=d().panZoom)||void 0===t||t.setClickDistance(e)},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o,elementsSelectable:r}=d();if(!r)return;let l=t.reduce((e,t)=>t.selected?[...e,Y(t.id,!1)]:e,[]),i=e.reduce((e,t)=>t.selected?[...e,Y(t.id,!1)]:e,[]);n(l),o(i)},setNodeExtent:t=>{let{nodes:n,nodeLookup:o,parentLookup:r,nodeOrigin:l,elevateNodesOnSelect:i,nodeExtent:a}=d();(t[0][0]!==a[0][0]||t[0][1]!==a[0][1]||t[1][0]!==a[1][0]||t[1][1]!==a[1][1])&&((0,s.yF)(n,o,r,{nodeOrigin:l,nodeExtent:t,elevateNodesOnSelect:i,checkEquality:!1}),e({nodeExtent:t}))},panBy:e=>{let{transform:t,width:n,height:o,panZoom:r,translateExtent:l}=d();return(0,s.hO)({delta:e,panZoom:r,transform:t,translateExtent:l,width:n,height:o})},setCenter:async(e,t,n)=>{let{width:o,height:r,maxZoom:l,panZoom:i}=d();if(!i)return Promise.resolve(!1);let a=void 0!==(null==n?void 0:n.zoom)?n.zoom:l;return await i.setViewport({x:o/2-e*a,y:r/2-t*a,zoom:a},{duration:null==n?void 0:n.duration,ease:null==n?void 0:n.ease,interpolate:null==n?void 0:n.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{e({connection:{...s.Ky}})},updateConnection:t=>{e({connection:t})},reset:()=>e({...tE()})}},Object.is)};function tk(e){let{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:a,initialHeight:s,initialMinZoom:d,initialMaxZoom:c,initialFitViewOptions:u,fitView:g,nodeOrigin:p,nodeExtent:h,children:v}=e,[m]=(0,i.useState)(()=>tN({nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:a,height:s,fitView:g,minZoom:d,maxZoom:c,fitViewOptions:u,nodeOrigin:p,nodeExtent:h}));return(0,l.jsx)(f,{value:m,children:(0,l.jsx)(er,{children:v})})}function tM(e){let{children:t,nodes:n,edges:o,defaultNodes:r,defaultEdges:a,width:s,height:d,fitView:c,fitViewOptions:u,minZoom:f,maxZoom:p,nodeOrigin:h,nodeExtent:v}=e;return(0,i.useContext)(g)?(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)(tk,{initialNodes:n,initialEdges:o,defaultNodes:r,defaultEdges:a,initialWidth:s,initialHeight:d,fitView:c,initialFitViewOptions:u,initialMinZoom:f,initialMaxZoom:p,nodeOrigin:h,nodeExtent:v,children:t})}let tP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var tj=ee(function(e,t){let{nodes:n,edges:o,defaultNodes:r,defaultEdges:d,className:c,nodeTypes:u,edgeTypes:g,onNodeClick:f,onEdgeClick:p,onInit:h,onMove:v,onMoveStart:m,onMoveEnd:y,onConnect:b,onConnectStart:S,onConnectEnd:w,onClickConnectStart:x,onClickConnectEnd:C,onNodeMouseEnter:N,onNodeMouseMove:M,onNodeMouseLeave:P,onNodeContextMenu:j,onNodeDoubleClick:R,onNodeDragStart:_,onNodeDrag:A,onNodeDragStop:O,onNodesDelete:z,onEdgesDelete:H,onDelete:Z,onSelectionChange:F,onSelectionDragStart:T,onSelectionDrag:X,onSelectionDragStop:W,onSelectionContextMenu:K,onSelectionStart:Q,onSelectionEnd:Y,onBeforeDelete:U,connectionMode:q,connectionLineType:G=s.t8.Bezier,connectionLineStyle:$,connectionLineComponent:J,connectionLineContainerStyle:ee,deleteKeyCode:et="Backspace",selectionKeyCode:en="Shift",selectionOnDrag:eo=!1,selectionMode:er=s.oW.Full,panActivationKeyCode:el="Space",multiSelectionKeyCode:ei=(0,s.Q5)()?"Meta":"Control",zoomActivationKeyCode:ea=(0,s.Q5)()?"Meta":"Control",snapToGrid:es,snapGrid:ed,onlyRenderVisibleElements:ec=!1,selectNodesOnDrag:eu,nodesDraggable:eg,autoPanOnNodeFocus:ef,nodesConnectable:ep,nodesFocusable:eh,nodeOrigin:ev=L,edgesFocusable:em,edgesReconnectable:ey,elementsSelectable:eb=!0,defaultViewport:eS=I,minZoom:ew=.5,maxZoom:ex=2,translateExtent:eC=s.k5,preventScrolling:eE=!0,nodeExtent:eN,defaultMarkerColor:ek="#b1b1b7",zoomOnScroll:eM=!0,zoomOnPinch:eP=!0,panOnScroll:ej=!1,panOnScrollSpeed:eR=.5,panOnScrollMode:e_=s.IY.Free,zoomOnDoubleClick:eD=!0,panOnDrag:eL=!0,onPaneClick:eI,onPaneMouseEnter:eA,onPaneMouseMove:eO,onPaneMouseLeave:ez,onPaneScroll:eB,onPaneContextMenu:eV,paneClickDistance:eH=0,nodeClickDistance:eZ=0,children:eF,onReconnect:eT,onReconnectStart:eX,onReconnectEnd:eW,onEdgeContextMenu:eK,onEdgeDoubleClick:eQ,onEdgeMouseEnter:eY,onEdgeMouseMove:eU,onEdgeMouseLeave:eq,reconnectRadius:eG=10,onNodesChange:e$,onEdgesChange:eJ,noDragClassName:e0="nodrag",noWheelClassName:e1="nowheel",noPanClassName:e3="nopan",fitView:e2,fitViewOptions:e5,connectOnClick:e4,attributionPosition:e6,proOptions:e8,defaultEdgeOptions:e7,elevateNodesOnSelect:e9,elevateEdgesOnSelect:te,disableKeyboardA11y:tt=!1,autoPanOnConnect:tn,autoPanOnNodeDrag:to,autoPanSpeed:tr,connectionRadius:tl,isValidConnection:ti,onError:ta,style:ts,id:td,nodeDragThreshold:tc,connectionDragThreshold:tu,viewport:tg,onViewportChange:tf,width:tp,height:th,colorMode:tv="light",debug:tm,onScroll:ty,ariaLabelConfig:tb,...tS}=e,tw=td||"1",tx=function(e){var t;let[n,o]=(0,i.useState)("system"===e?null:e);return(0,i.useEffect)(()=>{if("system"!==e){o(e);return}let t=V(),n=()=>o((null==t?void 0:t.matches)?"dark":"light");return n(),null==t||t.addEventListener("change",n),()=>{null==t||t.removeEventListener("change",n)}},[e]),null!==n?n:(null===(t=V())||void 0===t?void 0:t.matches)?"dark":"light"}(tv),tE=(0,i.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),null==ty||ty(e)},[ty]);return(0,l.jsx)("div",{"data-testid":"rf__wrapper",...tS,onScroll:tE,style:{...ts,...tP},ref:t,className:(0,a.Z)(["react-flow",c,tx]),id:td,role:"application",children:(0,l.jsxs)(tM,{nodes:n,edges:o,width:tp,height:th,fitView:e2,fitViewOptions:e5,minZoom:ew,maxZoom:ex,nodeOrigin:ev,nodeExtent:eN,children:[(0,l.jsx)(tC,{onInit:h,onNodeClick:f,onEdgeClick:p,onNodeMouseEnter:N,onNodeMouseMove:M,onNodeMouseLeave:P,onNodeContextMenu:j,onNodeDoubleClick:R,nodeTypes:u,edgeTypes:g,connectionLineType:G,connectionLineStyle:$,connectionLineComponent:J,connectionLineContainerStyle:ee,selectionKeyCode:en,selectionOnDrag:eo,selectionMode:er,deleteKeyCode:et,multiSelectionKeyCode:ei,panActivationKeyCode:el,zoomActivationKeyCode:ea,onlyRenderVisibleElements:ec,defaultViewport:eS,translateExtent:eC,minZoom:ew,maxZoom:ex,preventScrolling:eE,zoomOnScroll:eM,zoomOnPinch:eP,zoomOnDoubleClick:eD,panOnScroll:ej,panOnScrollSpeed:eR,panOnScrollMode:e_,panOnDrag:eL,onPaneClick:eI,onPaneMouseEnter:eA,onPaneMouseMove:eO,onPaneMouseLeave:ez,onPaneScroll:eB,onPaneContextMenu:eV,paneClickDistance:eH,nodeClickDistance:eZ,onSelectionContextMenu:K,onSelectionStart:Q,onSelectionEnd:Y,onReconnect:eT,onReconnectStart:eX,onReconnectEnd:eW,onEdgeContextMenu:eK,onEdgeDoubleClick:eQ,onEdgeMouseEnter:eY,onEdgeMouseMove:eU,onEdgeMouseLeave:eq,reconnectRadius:eG,defaultMarkerColor:ek,noDragClassName:e0,noWheelClassName:e1,noPanClassName:e3,rfId:tw,disableKeyboardA11y:tt,nodeExtent:eN,viewport:tg,onViewportChange:tf}),(0,l.jsx)(B,{nodes:n,edges:o,defaultNodes:r,defaultEdges:d,onConnect:b,onConnectStart:S,onConnectEnd:w,onClickConnectStart:x,onClickConnectEnd:C,nodesDraggable:eg,autoPanOnNodeFocus:ef,nodesConnectable:ep,nodesFocusable:eh,edgesFocusable:em,edgesReconnectable:ey,elementsSelectable:eb,elevateNodesOnSelect:e9,elevateEdgesOnSelect:te,minZoom:ew,maxZoom:ex,nodeExtent:eN,onNodesChange:e$,onEdgesChange:eJ,snapToGrid:es,snapGrid:ed,connectionMode:q,translateExtent:eC,connectOnClick:e4,defaultEdgeOptions:e7,fitView:e2,fitViewOptions:e5,onNodesDelete:z,onEdgesDelete:H,onDelete:Z,onNodeDragStart:_,onNodeDrag:A,onNodeDragStop:O,onSelectionDrag:X,onSelectionDragStart:T,onSelectionDragStop:W,onMove:v,onMoveStart:m,onMoveEnd:y,noPanClassName:e3,nodeOrigin:ev,rfId:tw,autoPanOnConnect:tn,autoPanOnNodeDrag:to,autoPanSpeed:tr,onError:ta,connectionRadius:tl,isValidConnection:ti,selectNodesOnDrag:eu,nodeDragThreshold:tc,connectionDragThreshold:tu,onBeforeDelete:U,paneClickDistance:eH,debug:tm,ariaLabelConfig:tb}),(0,l.jsx)(D,{onSelectionChange:F}),eF,(0,l.jsx)(k,{proOptions:e8,position:e6}),(0,l.jsx)(E,{rfId:tw,disableKeyboardA11y:tt})]})})});let tR=e=>{var t;return null===(t=e.domNode)||void 0===t?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function t_(e){let{children:t}=e,n=h(tR);return n?(0,u.createPortal)(t,n):null}let tD=e=>{var t;return null===(t=e.domNode)||void 0===t?void 0:t.querySelector(".react-flow__viewport-portal")};function tL(e){let{children:t}=e,n=h(tD);return n?(0,u.createPortal)(t,n):null}function tI(){let e=v();return(0,i.useCallback)(t=>{let{domNode:n,updateNodeInternals:o}=e.getState(),r=Array.isArray(t)?t:[t],l=new Map;r.forEach(e=>{let t=null==n?void 0:n.querySelector('.react-flow__node[data-id="'.concat(e,'"]'));t&&l.set(e,{id:e,nodeElement:t,force:!0})}),requestAnimationFrame(()=>o(l,{triggerFitView:!1}))},[])}let tA=e=>e.nodes;function tO(){return h(tA,c.X)}let tz=e=>e.edges;function tB(){return h(tz,c.X)}let tV=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function tH(){return h(tV,c.X)}function tZ(e){let[t,n]=(0,i.useState)(e),o=(0,i.useCallback)(e=>n(t=>W(e,t)),[]);return[t,n,o]}function tF(e){let[t,n]=(0,i.useState)(e),o=(0,i.useCallback)(e=>n(t=>W(e,t)),[]);return[t,n,o]}function tT(e){let{onStart:t,onChange:n,onEnd:o}=e,r=v();(0,i.useEffect)(()=>{r.setState({onViewportChangeStart:t})},[t]),(0,i.useEffect)(()=>{r.setState({onViewportChange:n})},[n]),(0,i.useEffect)(()=>{r.setState({onViewportChangeEnd:o})},[o])}function tX(e){let{onChange:t}=e,n=v();(0,i.useEffect)(()=>{let e=[...n.getState().onSelectionChangeHandlers,t];return n.setState({onSelectionChangeHandlers:e}),()=>{let e=n.getState().onSelectionChangeHandlers.filter(e=>e!==t);n.setState({onSelectionChangeHandlers:e})}},[t])}let tW=e=>t=>{if(!e.includeHiddenNodes)return t.nodesInitialized;if(0===t.nodeLookup.size)return!1;for(let[,{internals:e}]of t.nodeLookup)if(void 0===e.handleBounds||!(0,s.nb)(e.userNode))return!1;return!0};function tK(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeHiddenNodes:!1};return h(tW(e))}function tQ(e){let{type:t,id:n,nodeId:o,onConnect:r,onDisconnect:l}=e;console.warn("[DEPRECATED] `useHandleConnections` is deprecated. Instead use `useNodeConnections` https://reactflow.dev/api-reference/hooks/useNodeConnections");let a=eC(),d=null!=o?o:a,c=(0,i.useRef)(null),u=h(e=>e.connectionLookup.get("".concat(d,"-").concat(t).concat(n?"-".concat(n):"")),s.tj);return(0,i.useEffect)(()=>{if(c.current&&c.current!==u){let e=null!=u?u:new Map;(0,s.WI)(c.current,e,l),(0,s.WI)(e,c.current,r)}c.current=null!=u?u:new Map},[u,r,l]),(0,i.useMemo)(()=>{var e;return Array.from(null!==(e=null==u?void 0:u.values())&&void 0!==e?e:[])},[u])}let tY=s.Qj.error014();function tU(){let{id:e,handleType:t,handleId:n,onConnect:o,onDisconnect:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=eC(),a=null!=e?e:l;if(!a)throw Error(tY);let d=(0,i.useRef)(null),c=h(e=>e.connectionLookup.get("".concat(a).concat(t?n?"-".concat(t,"-").concat(n):"-".concat(t):"")),s.tj);return(0,i.useEffect)(()=>{if(d.current&&d.current!==c){let e=null!=c?c:new Map;(0,s.WI)(d.current,e,r),(0,s.WI)(e,d.current,o)}d.current=null!=c?c:new Map},[c,o,r]),(0,i.useMemo)(()=>{var e;return Array.from(null!==(e=null==c?void 0:c.values())&&void 0!==e?e:[])},[c])}function tq(e){return h((0,i.useCallback)(t=>{var n;let o=[],r=Array.isArray(e);for(let n of r?e:[e]){let e=t.nodeLookup.get(n);e&&o.push({id:e.id,type:e.type,data:e.data})}return r?o:null!==(n=o[0])&&void 0!==n?n:null},[e]),s.BT)}function tG(e){return h((0,i.useCallback)(t=>t.nodeLookup.get(e),[e]),c.X)}function t$(e){let{dimensions:t,lineWidth:n,variant:o,className:r}=e;return(0,l.jsx)("path",{strokeWidth:n,d:"M".concat(t[0]/2," 0 V").concat(t[1]," M0 ").concat(t[1]/2," H").concat(t[0]),className:(0,a.Z)(["react-flow__background-pattern",o,r])})}function tJ(e){let{radius:t,className:n}=e;return(0,l.jsx)("circle",{cx:t,cy:t,r:t,className:(0,a.Z)(["react-flow__background-pattern","dots",n])})}(o=r||(r={})).Lines="lines",o.Dots="dots",o.Cross="cross";let t0={[r.Dots]:1,[r.Lines]:1,[r.Cross]:6},t1=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function t3(e){let{id:t,variant:n=r.Dots,gap:o=20,size:s,lineWidth:d=1,offset:u=0,color:g,bgColor:f,style:p,className:v,patternClassName:m}=e,y=(0,i.useRef)(null),{transform:b,patternId:S}=h(t1,c.X),w=s||t0[n],x=n===r.Dots,C=n===r.Cross,E=Array.isArray(o)?o:[o,o],N=[E[0]*b[2]||1,E[1]*b[2]||1],k=w*b[2],M=Array.isArray(u)?u:[u,u],P=C?[k,k]:N,j=[M[0]*b[2]||1+P[0]/2,M[1]*b[2]||1+P[1]/2],R="".concat(S).concat(t||"");return(0,l.jsxs)("svg",{className:(0,a.Z)(["react-flow__background",v]),style:{...p,...ed,"--xy-background-color-props":f,"--xy-background-pattern-color-props":g},ref:y,"data-testid":"rf__background",children:[(0,l.jsx)("pattern",{id:R,x:b[0]%N[0],y:b[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(j[0],",-").concat(j[1],")"),children:x?(0,l.jsx)(tJ,{radius:k/2,className:m}):(0,l.jsx)(t$,{dimensions:P,lineWidth:d,variant:n,className:m})}),(0,l.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(R,")")})]})}t3.displayName="Background";let t2=(0,i.memo)(t3);function t5(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,l.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function t4(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,l.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function t6(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,l.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function t8(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,l.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function t7(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,l.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function t9(e){let{children:t,className:n,...o}=e;return(0,l.jsx)("button",{type:"button",className:(0,a.Z)(["react-flow__controls-button",n]),...o,children:t})}let ne=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function nt(e){let{style:t,showZoom:n=!0,showFitView:o=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:d,onFitView:u,onInteractiveChange:g,className:f,children:p,position:m="bottom-left",orientation:y="vertical","aria-label":b}=e,S=v(),{isInteractive:w,minZoomReached:x,maxZoomReached:C,ariaLabelConfig:E}=h(ne,c.X),{zoomIn:k,zoomOut:M,fitView:P}=ei();return(0,l.jsxs)(N,{className:(0,a.Z)(["react-flow__controls","horizontal"===y?"horizontal":"vertical",f]),position:m,style:t,"data-testid":"rf__controls","aria-label":null!=b?b:E["controls.ariaLabel"],children:[n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t9,{onClick:()=>{k(),null==s||s()},className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:C,children:(0,l.jsx)(t5,{})}),(0,l.jsx)(t9,{onClick:()=>{M(),null==d||d()},className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:x,children:(0,l.jsx)(t4,{})})]}),o&&(0,l.jsx)(t9,{className:"react-flow__controls-fitview",onClick:()=>{P(i),null==u||u()},title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:(0,l.jsx)(t6,{})}),r&&(0,l.jsx)(t9,{className:"react-flow__controls-interactive",onClick:()=>{S.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),null==g||g(!w)},title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:w?(0,l.jsx)(t7,{}):(0,l.jsx)(t8,{})}),p]})}nt.displayName="Controls";let nn=(0,i.memo)(nt),no=(0,i.memo)(function(e){let{id:t,x:n,y:o,width:r,height:i,style:s,color:d,strokeColor:c,strokeWidth:u,className:g,borderRadius:f,shapeRendering:p,selected:h,onClick:v}=e,{background:m,backgroundColor:y}=s||{};return(0,l.jsx)("rect",{className:(0,a.Z)(["react-flow__minimap-node",{selected:h},g]),x:n,y:o,rx:f,ry:f,width:r,height:i,style:{fill:d||m||y,stroke:c,strokeWidth:u},shapeRendering:p,onClick:v?e=>v(e,t):void 0})}),nr=e=>e.nodes.map(e=>e.id),nl=e=>e instanceof Function?e:()=>e,ni=(0,i.memo)(function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:o,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:d,NodeComponent:u,onClick:g}=e,{node:f,x:p,y:v,width:m,height:y}=h(e=>{let{internals:n}=e.nodeLookup.get(t),o=n.userNode,{x:r,y:l}=n.positionAbsolute,{width:i,height:a}=(0,s.Rf)(o);return{node:o,x:r,y:l,width:i,height:a}},c.X);return f&&!f.hidden&&(0,s.nb)(f)?(0,l.jsx)(u,{x:p,y:v,width:m,height:y,style:f.style,selected:!!f.selected,className:r(f),color:n(f),borderRadius:i,strokeColor:o(f),strokeWidth:a,shapeRendering:d,onClick:g,id:f.id}):null});var na=(0,i.memo)(function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:o="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=no,onClick:s}=e,d=h(nr,c.X),u=nl(n),g=nl(t),f=nl(o),p=window.chrome?"crispEdges":"geometricPrecision";return(0,l.jsx)(l.Fragment,{children:d.map(e=>(0,l.jsx)(ni,{id:e,nodeColorFunc:u,nodeStrokeColorFunc:g,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:p},e))})});let ns=e=>!e.hidden,nd=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?(0,s.oI)((0,s.W0)(e.nodeLookup,{filter:ns}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function nc(e){var t,n;let{style:o,className:r,nodeStrokeColor:d,nodeColor:u,nodeClassName:g="",nodeBorderRadius:f=5,nodeStrokeWidth:p,nodeComponent:m,bgColor:y,maskColor:b,maskStrokeColor:S,maskStrokeWidth:w,position:x="bottom-right",onClick:C,onNodeClick:E,pannable:k=!1,zoomable:M=!1,ariaLabel:P,inversePan:j,zoomStep:R=10,offsetScale:_=5}=e,D=v(),L=(0,i.useRef)(null),{boundingRect:I,viewBB:A,rfId:O,panZoom:z,translateExtent:B,flowWidth:V,flowHeight:H,ariaLabelConfig:Z}=h(nd,c.X),F=null!==(t=null==o?void 0:o.width)&&void 0!==t?t:200,T=null!==(n=null==o?void 0:o.height)&&void 0!==n?n:150,X=Math.max(I.width/F,I.height/T),W=X*F,K=X*T,Q=_*X,Y=I.x-(W-I.width)/2-Q,U=I.y-(K-I.height)/2-Q,q=W+2*Q,G=K+2*Q,$="".concat("react-flow__minimap-desc","-").concat(O),J=(0,i.useRef)(0),ee=(0,i.useRef)();J.current=X,(0,i.useEffect)(()=>{if(L.current&&z)return ee.current=(0,s.FD)({domNode:L.current,panZoom:z,getTransform:()=>D.getState().transform,getViewScale:()=>J.current}),()=>{var e;null===(e=ee.current)||void 0===e||e.destroy()}},[z]),(0,i.useEffect)(()=>{var e;null===(e=ee.current)||void 0===e||e.update({translateExtent:B,width:V,height:H,inversePan:j,pannable:k,zoomStep:R,zoomable:M})},[k,M,j,R,B,V,H]);let et=C?e=>{var t;let[n,o]=(null===(t=ee.current)||void 0===t?void 0:t.pointer(e))||[0,0];C(e,{x:n,y:o})}:void 0,en=E?(0,i.useCallback)((e,t)=>{E(e,D.getState().nodeLookup.get(t).internals.userNode)},[]):void 0,eo=null!=P?P:Z["minimap.ariaLabel"];return(0,l.jsx)(N,{position:x,style:{...o,"--xy-minimap-background-color-props":"string"==typeof y?y:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof b?b:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof S?S:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof w?w*X:void 0,"--xy-minimap-node-background-color-props":"string"==typeof u?u:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof d?d:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof p?p:void 0},className:(0,a.Z)(["react-flow__minimap",r]),"data-testid":"rf__minimap",children:(0,l.jsxs)("svg",{width:F,height:T,viewBox:"".concat(Y," ").concat(U," ").concat(q," ").concat(G),className:"react-flow__minimap-svg",role:"img","aria-labelledby":$,ref:L,onClick:et,children:[eo&&(0,l.jsx)("title",{id:$,children:eo}),(0,l.jsx)(na,{onClick:en,nodeColor:u,nodeStrokeColor:d,nodeBorderRadius:f,nodeClassName:g,nodeStrokeWidth:p,nodeComponent:m}),(0,l.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(Y-Q,",").concat(U-Q,"h").concat(q+2*Q,"v").concat(G+2*Q,"h").concat(-q-2*Q,"z\n        M").concat(A.x,",").concat(A.y,"h").concat(A.width,"v").concat(A.height,"h").concat(-A.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}nc.displayName="MiniMap";let nu=(0,i.memo)(nc),ng=e=>t=>e?"".concat(Math.max(1/t.transform[2],1)):void 0,nf={[s.pB.Line]:"right",[s.pB.Handle]:"bottom-right"},np=(0,i.memo)(function(e){let{nodeId:t,position:n,variant:o=s.pB.Handle,className:r,style:d,children:u,color:g,minWidth:f=10,minHeight:p=10,maxWidth:m=Number.MAX_VALUE,maxHeight:y=Number.MAX_VALUE,keepAspectRatio:b=!1,resizeDirection:S,autoScale:w=!0,shouldResize:x,onResizeStart:C,onResize:E,onResizeEnd:N}=e,k=eC(),M="string"==typeof t?t:k,P=v(),j=(0,i.useRef)(null),R=o===s.pB.Handle,_=h((0,i.useCallback)(ng(R&&w),[R,w]),c.X),D=(0,i.useRef)(null),L=null!=n?n:nf[o];(0,i.useEffect)(()=>{if(j.current&&M)return D.current||(D.current=(0,s.Cz)({domNode:j.current,nodeId:M,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:l}=P.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:l}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:l}=P.getState(),i=[],a={x:e.x,y:e.y},d=o.get(M);if(d&&d.expandParent&&d.parentId){var c,u,g,f,p,h,v;let t=null!==(c=d.origin)&&void 0!==c?c:l,n=null!==(g=null!==(u=e.width)&&void 0!==u?u:d.measured.width)&&void 0!==g?g:0,m=null!==(p=null!==(f=e.height)&&void 0!==f?f:d.measured.height)&&void 0!==p?p:0,y={id:d.id,parentId:d.parentId,rect:{width:n,height:m,...(0,s.ZB)({x:null!==(h=e.x)&&void 0!==h?h:d.position.x,y:null!==(v=e.y)&&void 0!==v?v:d.position.y},{width:n,height:m},d.parentId,o,t)}},b=(0,s.so)([y],o,r,l);i.push(...b),a.x=e.x?Math.max(t[0]*n,e.x):void 0,a.y=e.y?Math.max(t[1]*m,e.y):void 0}if(void 0!==a.x&&void 0!==a.y){let e={id:M,type:"position",position:{...a}};i.push(e)}if(void 0!==e.width&&void 0!==e.height){let t={id:M,type:"dimensions",resizing:!0,setAttributes:!S||("horizontal"===S?"width":"height"),dimensions:{width:e.width,height:e.height}};i.push(t)}for(let e of t){let t={...e,type:"position"};i.push(t)}n(i)},onEnd:e=>{let{width:t,height:n}=e;P.getState().triggerNodeChanges([{id:M,type:"dimensions",resizing:!1,dimensions:{width:t,height:n}}])}})),D.current.update({controlPosition:L,boundaries:{minWidth:f,minHeight:p,maxWidth:m,maxHeight:y},keepAspectRatio:b,resizeDirection:S,onResizeStart:C,onResize:E,onResizeEnd:N,shouldResize:x}),()=>{var e;null===(e=D.current)||void 0===e||e.destroy()}},[L,f,p,m,y,b,C,E,N,x]);let I=L.split("-");return(0,l.jsx)("div",{className:(0,a.Z)(["react-flow__resize-control","nodrag",...I,o,r]),ref:j,style:{...d,scale:_,...g&&{[R?"backgroundColor":"borderColor"]:g}},children:u})});function nh(e){let{nodeId:t,isVisible:n=!0,handleClassName:o,handleStyle:r,lineClassName:i,lineStyle:a,color:d,minWidth:c=10,minHeight:u=10,maxWidth:g=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:h=!0,shouldResize:v,onResizeStart:m,onResize:y,onResizeEnd:b}=e;return n?(0,l.jsxs)(l.Fragment,{children:[s.Kl.map(e=>(0,l.jsx)(np,{className:i,style:a,nodeId:t,position:e,variant:s.pB.Line,color:d,minWidth:c,minHeight:u,maxWidth:g,maxHeight:f,onResizeStart:m,keepAspectRatio:p,autoScale:h,shouldResize:v,onResize:y,onResizeEnd:b},e)),s.dw.map(e=>(0,l.jsx)(np,{className:o,style:r,nodeId:t,position:e,color:d,minWidth:c,minHeight:u,maxWidth:g,maxHeight:f,onResizeStart:m,keepAspectRatio:p,autoScale:h,shouldResize:v,onResize:y,onResizeEnd:b},e))]}):null}let nv=e=>{var t;return null===(t=e.domNode)||void 0===t?void 0:t.querySelector(".react-flow__renderer")};function nm(e){let{children:t}=e,n=h(nv);return n?(0,u.createPortal)(t,n):null}let ny=(e,t)=>(null==e?void 0:e.internals.positionAbsolute.x)!==(null==t?void 0:t.internals.positionAbsolute.x)||(null==e?void 0:e.internals.positionAbsolute.y)!==(null==t?void 0:t.internals.positionAbsolute.y)||(null==e?void 0:e.measured.width)!==(null==t?void 0:t.measured.width)||(null==e?void 0:e.measured.height)!==(null==t?void 0:t.measured.height)||(null==e?void 0:e.selected)!==(null==t?void 0:t.selected)||(null==e?void 0:e.internals.z)!==(null==t?void 0:t.internals.z),nb=(e,t)=>{if(e.size!==t.size)return!1;for(let[n,o]of e)if(ny(o,t.get(n)))return!1;return!0},nS=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter(e=>e.selected).length});function nw(e){var t;let{nodeId:n,children:o,className:r,style:d,isVisible:u,position:g=s.Ly.Top,offset:f=10,align:p="center",...v}=e,m=eC(),y=h((0,i.useCallback)(e=>(Array.isArray(n)?n:[n||m||""]).reduce((t,n)=>{let o=e.nodeLookup.get(n);return o&&t.set(o.id,o),t},new Map),[n,m]),nb),{x:b,y:S,zoom:w,selectedNodesCount:x}=h(nS,c.X);if(!("boolean"==typeof u?u:1===y.size&&(null===(t=y.values().next().value)||void 0===t?void 0:t.selected)&&1===x)||!y.size)return null;let C=(0,s.W0)(y),E=Array.from(y.values()),N=Math.max(...E.map(e=>e.internals.z+1)),k={position:"absolute",transform:(0,s.ZJ)(C,{x:b,y:S,zoom:w},g,f,p),zIndex:N,...d};return(0,l.jsx)(nm,{children:(0,l.jsx)("div",{style:k,className:(0,a.Z)(["react-flow__node-toolbar",r]),...v,"data-id":E.reduce((e,t)=>"".concat(e).concat(t.id," "),"").trim(),children:o})})}}}]);