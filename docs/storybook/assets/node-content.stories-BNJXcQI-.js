import{r as t}from"./iframe-CSJgqtUE.js";import{L as K}from"./label-editor-BER8qYxZ.js";import{V as O}from"./variable-name-editor-CP-PMbZc.js";import{U as H}from"./types-CqnIvgx0.js";import{N as P}from"./node-menu-CCcgEWJD.js";import{B as U}from"./chunk-ZJJ7XTJB-C7m4rLoy.js";import"./preload-helper-C1FmrZbK.js";import"./chunk-2SDIXUVN-nrXmNFqZ.js";import"./chunk-HZUFQ4E7-CjTRi08W.js";import"./mermaid-TRHq53KC.js";import"./createLucideIcon-DYY_HxMG.js";import"./chunk-AFVGPBIP-DlxD1NpB.js";import"./chunk-3UTYG3XF-jT-JhrqE.js";function p({data:e,id:a}){const[m,r]=t.useState(!1),[d,o]=t.useState(!1),[u,g]=t.useState(e.label),[c,b]=t.useState(e.variableName||`node${a}`),[h,y]=t.useState(!1),C=t.useRef(0),f=()=>{Date.now()-C.current<H.DOUBLE_CLICK_THRESHOLD||(d&&l(),r(!0))},T=n=>{n.stopPropagation(),n.preventDefault(),C.current=Date.now(),m&&i(),o(!0)},V=n=>{g(n.target.value)},D=n=>{b(n.target.value)},i=()=>{r(!1),e.onLabelChange&&e.onLabelChange(a,u)},l=()=>{o(!1),e.onVariableNameChange&&e.onVariableNameChange(a,c)},I=()=>{r(!1),g(e.label)},k=()=>{o(!1),b(e.variableName||`node${a}`)},x=n=>{n.key==="Enter"&&!h?i():n.key==="Escape"&&I()},$=n=>{n.key==="Enter"&&!h?l():n.key==="Escape"&&k()},v=()=>{y(!0)},N=()=>{y(!1)},q=()=>{e.onDelete&&e.onDelete(a)},R=()=>{d&&l(),r(!0)},_=()=>{m&&i(),o(!0)},B=n=>{var E;(E=e.onShapeTypeChange)==null||E.call(e,a,n)};return React.createElement(U,{bg:"white",border:"2px solid #1a365d",borderRadius:"md",p:2,w:"xs",minH:"6xs",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",onDoubleClick:f,_hover:{boxShadow:"md"},position:"relative"},React.createElement(O,{value:c,isEditing:d,shapeType:e.shapeType,onClick:T,onChange:D,onKeyDown:$,onCompositionStart:v,onCompositionEnd:N,onBlur:l}),React.createElement(P,{onDelete:q,onEdit:R,onEditVariableName:_,onShapeChange:B,currentShape:e.shapeType||"rectangle"}),React.createElement(K,{value:u,isEditing:m,onDoubleClick:f,onChange:V,onKeyDown:x,onCompositionStart:v,onCompositionEnd:N,onBlur:i}))}p.__docgenInfo={description:"",methods:[],displayName:"NodeContent",props:{data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  label: string;
  variableName?: string;
  shapeType?: MermaidShapeType;
  onLabelChange?: (nodeId: string, newLabel: string) => void;
  onVariableNameChange?: (nodeId: string, newVariableName: string) => void;
  onShapeTypeChange?: (nodeId: string, newShapeType: string) => void;
  onDelete?: (nodeId: string) => void;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"variableName",value:{name:"string",required:!1}},{key:"shapeType",value:{name:"union",raw:`| "rectangle" // [label]
| "diamond" // {label}
| "rounded" // (label)
| "circle" // ((label))
| "hexagon" // {{label}}
| "stadium"`,elements:[{name:"literal",value:'"rectangle"'},{name:"literal",value:'"diamond"'},{name:"literal",value:'"rounded"'},{name:"literal",value:'"circle"'},{name:"literal",value:'"hexagon"'},{name:"literal",value:'"stadium"'}],required:!1}},{key:"onLabelChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newLabel: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newLabel"}],return:{name:"void"}},required:!1}},{key:"onVariableNameChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newVariableName: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newVariableName"}],return:{name:"void"}},required:!1}},{key:"onShapeTypeChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newShapeType: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newShapeType"}],return:{name:"void"}},required:!1}},{key:"onDelete",value:{name:"signature",type:"function",raw:"(nodeId: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"}],return:{name:"void"}},required:!1}}]}},description:""},id:{required:!0,tsType:{name:"string"},description:""}}};const ne={title:"components/node/NodeContent",component:p},s={render:()=>React.createElement(p,{id:"1",data:{label:"ノードラベル",variableName:"var1",shapeType:"rectangle",onLabelChange:(e,a)=>alert(`ラベル変更: ${a}`),onVariableNameChange:(e,a)=>alert(`変数名変更: ${a}`),onShapeTypeChange:(e,a)=>alert(`形状変更: ${a}`),onDelete:e=>alert(`削除: ${e}`)}})};var S,w,L;s.parameters={...s.parameters,docs:{...(S=s.parameters)==null?void 0:S.docs,source:{originalSource:'{\n  render: () => <NodeContent id="1" data={{\n    label: "ノードラベル",\n    variableName: "var1",\n    shapeType: "rectangle",\n    onLabelChange: (id, label) => alert(`ラベル変更: ${label}`),\n    onVariableNameChange: (id, name) => alert(`変数名変更: ${name}`),\n    onShapeTypeChange: (id, shape) => alert(`形状変更: ${shape}`),\n    onDelete: id => alert(`削除: ${id}`)\n  }} />\n}',...(L=(w=s.parameters)==null?void 0:w.docs)==null?void 0:L.source}}};const ae=["Default"];export{s as Default,ae as __namedExportsOrder,ne as default};
