import{c as te,r as s,J as le,K as he,v as J,L as Ue,M as ke,G as xe,N as Ke,O as ie,Q as we,s as qe,S as ze,T as Xe,U as Ye,u as Fe,o as Te,w as R,j as D,V as Ge,W as ue,X as ne,f as Z,C as He,b as $,x as We,y as Je,a as Q,m as Qe,Y as z,F as Ze,Z as $e,$ as en,a0 as nn,a1 as tn,a2 as sn}from"./iframe-BUjWjKwL.js";import{m as on,s as ae,b as rn}from"./chunk-FVWMS4CP-BB-5zPws.js";import{a as un,b as Ce,u as Oe,c as an,d as ln}from"./index-lsaZBvwd.js";var Ne=n=>n.sort((o,t)=>{const a=o.compareDocumentPosition(t);return a&Node.DOCUMENT_POSITION_FOLLOWING||a&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:a&Node.DOCUMENT_POSITION_PRECEDING||a&Node.DOCUMENT_POSITION_CONTAINS?1:((a&Node.DOCUMENT_POSITION_DISCONNECTED||a&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)&&console.warn("Cannot sort the given nodes."),0)}),Re=(n,o,t)=>{let a=n+1;return t&&a>=o&&(a=0),a},Ee=(n,o,t)=>{let a=n-1;return t&&a<0&&(a=o),a},cn=()=>{const n=new Map,o=e=>{n.forEach(u=>{const b=e.indexOf(u.node);u.index=b,u.node.dataset.index=u.index.toString()})},t=(e,u)=>{if(!e||n.has(e))return;const b=Array.from(n.keys()).concat(e),M=Ne(b);u!=null&&u.disabled&&(u.disabled=!!u.disabled);const F={index:-1,node:e,...u};n.set(e,F),o(M)},a=e=>{if(e!=null)return Ue(e)?t(e):u=>t(u,e)},r=e=>{if(e==null)return;n.delete(e);const u=Ne(Array.from(n.keys()));o(u)},l=()=>n.clear(),d=e=>c(e).length,v=e=>P(e).length,f=e=>{var u,b;return e&&(b=(u=n.get(e))==null?void 0:u.index)!=null?b:-1},_=(e,u)=>e==null?-1:P(u).findIndex(b=>b.node.isSameNode(e)),c=e=>{const u=Array.from(n.values());return e?u.filter(e).sort((b,M)=>b.index-M.index):u.sort((b,M)=>b.index-M.index)},P=e=>c(e).filter(({disabled:u})=>!u),g=(e,u)=>{if(d(u)!==0)return c(u)[e]},y=(e,u)=>{if(v(u)!==0)return P(u)[e]};return{count:d,destroy:l,enabledCount:v,enabledFirstValue:e=>y(0,e),enabledIndexOf:_,enabledLastValue:e=>y(P(e).length-1,e),enabledNextValue:(e,u,b=!0)=>{const M=g(e);if(!M)return;const F=_(M.node,u),T=Re(F,v(u),b);return y(T,u)},enabledPrevValue:(e,u,b=!0)=>{const M=g(e);if(!M)return;const F=_(M.node,u),T=Ee(F,v(u)-1,b);return y(T,u)},enabledValue:y,enabledValues:P,firstValue:e=>g(0,e),indexOf:f,lastValue:e=>g(n.size-1,e),nextValue:(e,u,b=!0)=>{const M=Re(e,d(u),b);return g(M,u)},prevValue:(e,u,b=!0)=>{const M=Ee(e,d(u)-1,b);return g(M,u)},register:a,unregister:r,value:g,values:c}},dn=()=>{const[n,o]=te({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsContextProvider"});return{DescendantsContextProvider:n,useDescendant:r=>{const l=o(),[d,v]=s.useState(-1),f=s.useRef(null);le(()=>()=>{f.current&&l.unregister(f.current)},[]),le(()=>{if(!f.current)return;const c=Number(f.current.dataset.index);d!=c&&!Number.isNaN(c)&&v(c)});const _=r?he(l.register(r)):he(l.register);return{descendants:l,enabledIndex:l.enabledIndexOf(f.current,r==null?void 0:r.filter),index:d,register:J(_,f)}},useDescendants:()=>{const r=s.useRef(cn());return le(()=>()=>r.current.destroy()),r.current},useDescendantsContext:o}},pe=n=>{const{isContentEditable:o,tagName:t}=n.target;return t!=="INPUT"&&t!=="TEXTAREA"&&!o},fn=({ref:n,clickOnEnter:o=!0,clickOnSpace:t=!0,isDisabled:a,disabled:r=a,disableTouchBehavior:l=!0,isFocusable:d,focusable:v=d,focusOnClick:f=!0,tabIndex:_,onClick:c,onKeyDown:P,onKeyUp:g,onMouseDown:y,onMouseLeave:I,onMouseOver:E,onMouseUp:k,...N}={})=>{const[x,h]=s.useState(!0),[m,p]=s.useState(!1),e=un(),u=x?_:_||0,b=r&&!v,M=i=>{i&&i.tagName!=="BUTTON"&&h(!1)},F=s.useCallback(i=>{if(r){i.stopPropagation(),i.preventDefault();return}f&&i.currentTarget.focus(),c==null||c(i)},[r,f,c]),T=s.useCallback(i=>{m&&pe(i)&&(i.preventDefault(),i.stopPropagation(),p(!1),e.remove(document,"keyup",T,!1))},[m,e]),V=s.useCallback(i=>{P==null||P(i),!(r||i.defaultPrevented||i.metaKey)&&(!pe(i.nativeEvent)||x||(t&&i.key===" "&&(i.preventDefault(),p(!0)),o&&i.key==="Enter"&&(i.preventDefault(),i.currentTarget.click()),e.add(document,"keyup",T,!1)))},[r,x,P,o,t,e,T]),w=s.useCallback(i=>{g==null||g(i),!(r||i.defaultPrevented||i.metaKey)&&(!pe(i.nativeEvent)||x||t&&i.key===" "&&(i.preventDefault(),p(!1),i.currentTarget.click()))},[t,x,r,g]),L=s.useCallback(i=>{i.button===0&&(p(!1),e.remove(document,"mouseup",L,!1))},[e]),O=s.useCallback(i=>{if(i.button===0){if(r){i.stopPropagation(),i.preventDefault();return}x||p(!0),f&&i.currentTarget.focus({preventScroll:!0}),e.add(document,"mouseup",L,!1),y==null||y(i)}},[r,x,f,y,e,L]),B=s.useCallback(i=>{i.button===0&&(x||p(!1),k==null||k(i))},[k,x]),G=s.useCallback(i=>{if(r){i.preventDefault();return}l&&ke()||E==null||E(i)},[r,E,l]),S=s.useCallback(i=>{m&&(i.preventDefault(),p(!1)),!(l&&ke())&&(I==null||I(i))},[m,I,l]);return x?{...N,ref:J(n,M),type:"button","aria-disabled":b?void 0:r,disabled:b,onClick:F,onKeyDown:P,onKeyUp:g,onMouseDown:y,onMouseLeave:I,onMouseOver:E,onMouseUp:k}:{...N,ref:J(n,M),"aria-disabled":r?"true":void 0,"data-active":xe(m),role:"button",tabIndex:b?void 0:u,onClick:F,onKeyDown:V,onKeyUp:w,onMouseDown:O,onMouseLeave:S,onMouseOver:G,onMouseUp:B}},mn=(n=!1)=>{const[o,t]=s.useState(n),a=s.useCallback(()=>t(!0),[]),r=s.useCallback(()=>t(!1),[]),l=s.useCallback(()=>t(d=>!d),[]);return[o,{on:a,off:r,toggle:l}]},vn=({ref:n,isOpen:o,open:t=o})=>{const[a,r]=s.useState(t),[l,{on:d}]=mn();return s.useEffect(()=>{l||(r(t),d())},[t,l,d]),Ce(()=>n.current,"animationend",()=>r(t)),{present:!(t?!1:!a),onAnimationComplete(){var f;const _=Ke(n.current),c=new _.CustomEvent("animationend",{bubbles:!0});(f=n.current)==null||f.dispatchEvent(c)}}},pn=n=>{const o=n.current;if(!o)return!1;const t=ze(o);return!t||o.contains(t)?!1:!!Xe(t)},xn=(n,{focusRef:o,shouldFocus:t,visible:a})=>{const r=t&&!a;ie(()=>{if(!r||pn(n))return;const l=o.current||n.current;l&&requestAnimationFrame(()=>{l.focus()})},[r,n,o])},Cn=(n,{focusRef:o,preventScroll:t,shouldFocus:a,visible:r}={preventScroll:!0,shouldFocus:!1})=>{const l=we(n)?n.current:n,d=a&&r,v=s.useRef(d),f=s.useRef(r);le(()=>{!f.current&&r&&(v.current=d),f.current=r},[r,d]);const _=s.useCallback(()=>{if(!(!r||!l||!v.current)&&(v.current=!1,!l.contains(document.activeElement)))if(o!=null&&o.current)requestAnimationFrame(()=>{var c;(c=o.current)==null||c.focus({preventScroll:t})});else{const c=qe(l);c.length>0&&requestAnimationFrame(()=>{var P;(P=c[0])==null||P.focus({preventScroll:t})})}},[r,t,l,o]);ie(()=>{requestAnimationFrame(()=>{_()})},[_]),Ce(l,"transitionend",_)},_n=({ref:n,elements:o,enabled:t})=>{const a=()=>{var r,l;return(l=(r=n.current)==null?void 0:r.ownerDocument)!=null?l:document};Ce(a,"pointerdown",r=>{if(!Ye()||!t)return;const l=r.target,v=(o??[n]).some(f=>{const _=we(f)?f.current:f;return(_==null?void 0:_.contains(l))||_===l});a().activeElement!==l&&v&&(r.preventDefault(),l.focus())})},[bn,_e]=te({name:"PopoverContext",errorMessage:`usePopoverContext returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />"`}),be=n=>{const[o,t]=Fe("Popover",n),{animation:a="scale",autoFocus:r=!0,children:l,closeDelay:d=200,closeOnBlur:v=!0,closeOnButton:f=!0,closeOnEsc:_=!0,duration:c,initialFocusRef:P,isLazy:g,lazy:y=g,lazyBehavior:I="unmount",openDelay:E=200,relatedRef:k,restoreFocus:N=!0,trigger:x="click",...h}=Te(t),m=s.useId(),{open:p,onClose:e,onOpen:u,onToggle:b}=Oe(t),M=s.useRef(null),F=s.useRef(null),T=s.useRef(null),V=s.useRef(null),w=s.useRef(null),{present:L,onAnimationComplete:O}=vn({ref:w,open:p}),B=s.useRef(void 0),G=s.useRef(void 0),S=s.useRef(!1),i=s.useRef(!1),{forceUpdate:U,referenceRef:K,transformOrigin:ee,getPopperProps:A}=an({...h,enabled:p});p&&(i.current=!0),s.useEffect(()=>()=>{B.current&&clearTimeout(B.current),G.current&&clearTimeout(G.current)},[]),_n({ref:F,enabled:p}),xn(w,{focusRef:F,shouldFocus:N&&(x==="click"||x==="contextmenu"),visible:p}),Cn(w,{focusRef:P,shouldFocus:r&&(x==="click"||x==="contextmenu"),visible:p});const H=ln({enabled:y,isSelected:L,mode:I,wasSelected:i.current}),de=s.useCallback((C={},X=null)=>{var j,q;const W={id:m,"aria-describedby":(j=V.current)==null?void 0:j.id,"aria-hidden":!p,"aria-labelledby":(q=T.current)==null?void 0:q.id,role:"dialog",...C,ref:J(w,X),style:{...C.style,transformOrigin:ee},tabIndex:-1,onBlur:R(C.onBlur,Y=>{const ve=ue(Y),je=ne(w.current,ve),Ve=ne(F.current,ve),Le=k!=null&&k.current?ne(k.current,ve):!1;p&&v&&(!je&&!Ve&&!Le)&&e()}),onKeyDown:R(C.onKeyDown,Y=>{_&&Y.key==="Escape"&&e()})};return x==="hover"&&(W.onMouseEnter=R(C.onMouseEnter,()=>{S.current=!0}),W.onMouseLeave=R(C.onMouseLeave,Y=>{Y.nativeEvent.relatedTarget!==null&&(S.current=!1,v&&setTimeout(e,d))})),W},[d,v,_,p,e,ee,x,k,m]),re=s.useCallback(C=>{M.current==null&&K(C)},[K]),fe=s.useCallback((C={},X=null)=>{const j={"aria-controls":p?m:void 0,"aria-expanded":p,role:"button",...C,ref:J(F,X,re)};return x==="click"&&(j.onClick=R(C.onClick,b),j.onBlur=R(C.onBlur,q=>{const W=ue(q),Y=!ne(w.current,W);p&&v&&Y&&e()})),x==="contextmenu"&&(j.onContextMenu=R(C.onContextMenu,q=>{q.preventDefault(),u()}),j.onBlur=R(C.onBlur,q=>{const W=ue(q),Y=!ne(w.current,W);p&&v&&Y&&e()})),x==="hover"&&(j.onFocus=R(C.onFocus,()=>{B.current===void 0&&u()}),j.onBlur=R(C.onBlur,q=>{const W=ue(q),Y=!ne(w.current,W);p&&v&&Y&&e()}),j.onKeyDown=R(C.onKeyDown,q=>{q.key==="Escape"&&e()}),j.onMouseEnter=R(C.onMouseEnter,()=>{S.current=!0,B.current=window.setTimeout(u,E)}),j.onMouseLeave=R(C.onMouseLeave,()=>{S.current=!1,B.current&&(clearTimeout(B.current),B.current=void 0),G.current=window.setTimeout(()=>{S.current||e()},d)})),j},[d,v,p,re,e,u,b,E,x,m]),me=s.useCallback((C={},X=null)=>({...C,ref:J(X,M,K)}),[M,K]);return D.jsx(bn,{value:{id:m,animation:a,bodyRef:V,closeOnButton:f,duration:c,forceUpdate:U,headerRef:T,open:p,shouldRenderContent:H,styles:o,getAnchorProps:me,getPopoverProps:de,getPopperProps:A,getTriggerProps:fe,onAnimationComplete:O,onClose:e},children:Ge(l,{forceUpdate:U,open:p,onClose:e})})};be.displayName="Popover";be.__ui__="Popover";var ce=Z(({onClick:n,...o},t)=>{const{id:a,styles:r,onClose:l}=_e(),d={position:"absolute",...r.closeButton};return D.jsx(He,{ref:t,className:$("ui-popover__close-button"),size:"sm","aria-controls":a,"aria-label":"Close popover",onClick:R(n,v=>{v.stopPropagation(),l==null||l()}),__css:d,...o})});ce.displayName="PopoverCloseButton";ce.__ui__="PopoverCloseButton";var gn=(n="scale",o)=>{const t={duration:o,enter:{visibility:"visible"},reverse:!0,transitionEnd:{exit:{visibility:"hidden"}}};switch(n){case"scale":return{...rn,custom:{...t,scale:.95}};case"top":return{...ae,custom:{...t,offsetX:0,offsetY:-16}};case"right":return{...ae,custom:{...t,offsetX:16,offsetY:0}};case"left":return{...ae,custom:{...t,offsetX:-16,offsetY:0}};case"bottom":return{...ae,custom:{...t,offsetX:0,offsetY:16}}}},ge=on(({className:n,children:o,maxW:t,maxWidth:a=t,minW:r,minWidth:l=r,w:d,width:v=d,z:f,zIndex:_=f,containerProps:c,__css:P,...g},y)=>{var I,E,k,N,x;const{animation:h,closeOnButton:m,duration:p,open:e,shouldRenderContent:u,styles:b,getPopoverProps:M,getPopperProps:F,onAnimationComplete:T}=_e();if(!u)return null;const V=We(o),[w,...L]=Je(V,ce),O=(I=P??b.container)!=null?I:{},B={display:"flex",flexDirection:"column",outline:0,position:"relative",w:"100%",...O};return v??(v=(E=O.width)!=null?E:O.w),l??(l=(k=O.minWidth)!=null?k:O.minW),a??(a=(N=O.maxWidth)!=null?N:O.maxW),_??(_=(x=O.zIndex)!=null?x:O.z),D.jsx(Q.div,{...F({style:{visibility:e?"visible":"hidden"}}),className:"ui-popover",maxWidth:a,minWidth:l,outline:"none",width:v,zIndex:_,...c,children:D.jsxs(Qe.section,{className:$("ui-popover__content",n),...h!=="none"?gn(h,p):{},...M(g,y),animate:e?"enter":"exit",exit:"exit",initial:"exit",onAnimationComplete:z(T,g.onAnimationComplete),__css:B,children:[w??(m?D.jsx(ce,{}):null),L]})})});ge.displayName="PopoverContent";ge.__ui__="PopoverContent";var ye=({children:n})=>{const o=s.Children.only(n),{getTriggerProps:t}=_e();return s.cloneElement(o,t(o.props,Ze(o)))};ye.displayName="PopoverTrigger";ye.__ui__="PopoverTrigger";var{DescendantsContextProvider:yn,useDescendant:In,useDescendants:Mn,useDescendantsContext:Dn}=dn(),[Pn,se]=te({name:"MenuContext",errorMessage:`useMenu returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />"`}),[jn,hn]=te({name:"ContextMenuContext",strict:!1}),[kn,Nn]=te({name:"UpstreamMenuContext",strict:!1}),[Rn,Ie]=te({name:"UpstreamMenuItemContext",strict:!1}),Ae=Z(({className:n,children:o,contentProps:t,...a},r)=>{var l,d;const{buttonRef:v,focusedIndex:f,menuRef:_,setFocusedIndex:c,styles:P,onClose:g}=se(),y=Dn(),I=(l=y.value(f))==null?void 0:l.node.id,E=s.useCallback(()=>{const m=y.enabledNextValue(f);m&&c(m.index)},[y,f,c]),k=s.useCallback(()=>{const m=y.enabledPrevValue(f);m&&c(m.index)},[y,f,c]),N=s.useCallback(()=>{const m=y.enabledFirstValue();m&&c(m.index)},[y,c]),x=s.useCallback(()=>{const m=y.enabledLastValue();m&&c(m.index)},[y,c]),h=s.useCallback(m=>{const e={ArrowDown:f===-1?N:E,ArrowUp:f===-1?x:k,End:x,Escape:g,Home:N,Tab:g}[m.key];e&&(m.preventDefault(),e(m))},[f,g,N,x,E,k]);return D.jsx(ge,{as:"div",className:"ui-menu__content","aria-activedescendant":I,"aria-labelledby":(d=v.current)==null?void 0:d.id,role:"menu",__css:{...P.content},...t,onKeyDown:R(t==null?void 0:t.onKeyDown,h),children:D.jsx(Q.div,{ref:J(_,r),className:$("ui-menu__list",n),tabIndex:-1,__css:{...P.list},...a,children:o})})});Ae.displayName="MenuList";Ae.__ui__="MenuList";var En=n=>{var o;return $e(n)&&!!((o=n.getAttribute("role"))!=null&&o.startsWith("menuitem"))},Me=Z(({id:n,className:o,children:t,closeOnSelect:a,command:r,isDisabled:l,disabled:d=l,isFocusable:v,focusable:f=v,icon:_,...c},P)=>{var g,y;const{closeOnSelect:I,focusedIndex:E,menuRef:k,nested:N,open:x,requestAnimationFrameId:h,setFocusedIndex:m,styles:p,onClose:e,onUpstreamClose:u}=se(),{onUpstreamRestoreFocus:b}=(g=Ie())!=null?g:{},[M,F]=s.useState(!1),T=s.useId(),V=s.useRef(null),w=s.useRef(!1),L=s.useRef(()=>{}),O=d&&!f,B=(y=V.current)==null?void 0:y.getAttribute("type"),G=B?B==="checkbox"?"menuitemcheckbox":"menuitemradio":"menuitem",{index:S,register:i}=In({disabled:O}),U=S===E,K={alignItems:"center",color:"inherit",display:"flex",flex:"0 0 auto",gap:"0.75rem",outline:0,textAlign:"start",textDecoration:"none",userSelect:"none",width:"100%",...p.item};n??(n=T);const ee=s.useCallback(()=>{d||m(S)},[S,d,m]),A=s.useCallback(()=>{d||m(-1)},[m,d]),H=s.useCallback(C=>{if(!En(C.currentTarget))return;const X=w.current;(a??(!X&&I))&&(e(),u==null||u())},[a,I,e,u]),de=s.useCallback(()=>{m(S)},[m,S]),re=s.useCallback(()=>{var C;(C=V.current)==null||C.focus(),m(S)},[m,S]),fe=s.useCallback(C=>{C.key===" "&&(C.key=C.code);const j={ArrowLeft:N?z(b,e):void 0,Space:w.current?void 0:z(u,e)}[C.key];j&&(C.preventDefault(),C.stopPropagation(),j())},[N,b,e,u]),me=fn({clickOnSpace:!1,focusOnClick:!1,...c,ref:J(i,V,P),disabled:d,focusable:f,onClick:R(c.onClick,H),onFocus:R(c.onFocus,de),onKeyDown:R(c.onKeyDown,fe,L.current),onMouseLeave:R(c.onMouseLeave,A),onMouseOver:R(c.onMouseOver,ee)});return ie(()=>{if(!x)return;const C=h.current;return U&&!O&&V.current?(C&&cancelAnimationFrame(C),h.current=requestAnimationFrame(()=>{var X;(X=V.current)==null||X.focus({preventScroll:!0}),h.current=null})):k.current&&!en(k.current)&&k.current.focus({preventScroll:!0}),()=>{C&&cancelAnimationFrame(C)}},[U,O,k,x]),t=_||r?D.jsx(Q.span,{style:{flex:1},children:t}):t,D.jsx(Rn,{value:{hasDownstreamRef:w,setDownstreamOpen:F,onKeyDownRef:L,onUpstreamRestoreFocus:re},children:D.jsxs(Q.div,{id:n,className:$("ui-menu__item",o),"data-focus":xe(M),__css:K,...me,role:G,tabIndex:!M&&U?0:-1,children:[_?D.jsx(oe,{children:_}):null,t,r?D.jsx(De,{children:r}):null]})})});Me.displayName="MenuItem";Me.__ui__="MenuItem";var Se=Z(({className:n,isChecked:o,checked:t=o,children:a,closeOnSelect:r=!1,icon:l,...d},v)=>D.jsxs(Me,{ref:v,className:$("ui-menu__item--option",n),"aria-checked":t,closeOnSelect:r,...d,children:[l!==null?D.jsx(oe,{opacity:t?1:0,children:l||D.jsx(wn,{})}):null,a]}));Se.displayName="MenuOptionItem";Se.__ui__="MenuOptionItem";var oe=Z(({className:n,...o},t)=>{const{styles:a}=se(),r={alignItems:"center",display:"inline-flex",flexShrink:0,fontSize:"0.85em",justifyContent:"center",...a.icon};return D.jsx(Q.span,{ref:t,className:$("ui-menu__item__icon",n),"aria-hidden":!0,__css:r,...o})});oe.displayName="MenuIcon";oe.__ui__="MenuIcon";var De=Z(({className:n,...o},t)=>{const{styles:a}=se(),r={...a.command};return D.jsx(Q.span,{ref:t,className:$("ui-menu__item__command",n),__css:r,...o})});De.displayName="MenuCommand";De.__ui__="MenuCommand";var wn=()=>D.jsx("svg",{height:"1em",viewBox:"0 0 14 14",width:"1em",children:D.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),Fn=n=>{var o,t,a;const{styles:r}=(o=hn())!=null?o:{},[l,d]=Fe("Menu",n,{isProcessSkip:!!r,styles:r}),{relatedRef:v,onDownstreamCloseMapRef:f,onUpstreamClose:_}=(t=Nn())!=null?t:{},c=!!v,{closeOnBlur:P=!c,closeOnSelect:g=!0,duration:y=.2,initialFocusRef:I,offset:E=c?[-8,8]:void 0,placement:k=c?"right-start":"bottom-start",onClose:N,onOpen:x,...h}=Te(d),{hasDownstreamRef:m,setDownstreamOpen:p}=(a=Ie())!=null?a:{},e=Mn(),[u,b]=s.useState(-1),M=s.useRef(null),F=s.useRef(null),T=s.useRef(new Set([])),V=s.useRef(null),w=s.useRef(new Map),L=s.useCallback(()=>{requestAnimationFrame(()=>{var A;return(A=M.current)==null?void 0:A.focus({preventScroll:!1})})},[]),O=s.useCallback(()=>{const A=setTimeout(()=>{if(I)return;const H=e.enabledFirstValue();H&&b(H.index)});T.current.add(A)},[e,I]),B=s.useCallback(()=>{const A=setTimeout(()=>{if(I)return;const H=e.enabledLastValue();H&&b(H.index)});T.current.add(A)},[e,I]),G=s.useCallback(()=>{x==null||x(),c||L()},[x,c,L]),S=s.useCallback(()=>{N==null||N();for(const A of w.current.values())A()},[N]),i=s.useId(),{open:U,onClose:K,onOpen:ee}=Oe({...n,onClose:S,onOpen:G});return s.useEffect(()=>{const A=f==null?void 0:f.current;return A==null||A.set(i,K),()=>{A==null||A.delete(i)}},[i,K,f]),s.useEffect(()=>{p&&p(U)},[p,U]),s.useEffect(()=>(m&&(m.current=!0),()=>{m&&(m.current=!1)})),ie(()=>{U||b(-1)},[U]),nn(()=>{T.current.forEach(A=>clearTimeout(A)),T.current.clear()}),D.jsx(yn,{value:e,children:D.jsx(kn,{value:{relatedRef:M,onDownstreamCloseMapRef:w,onUpstreamClose:z(_,K)},children:D.jsx(Pn,{value:{buttonRef:F,closeOnSelect:g,focusedIndex:u,menuRef:M,nested:c,open:U,requestAnimationFrameId:V,setFocusedIndex:b,styles:l,onClose:K,onFocusFirstItem:O,onFocusLastItem:B,onOpen:ee,onUpstreamClose:_},children:D.jsx(be,{trigger:c?"hover":"click",...h,closeOnBlur:P,closeOnButton:!1,duration:y,initialFocusRef:I,offset:E,open:U,placement:k,relatedRef:v,onClose:K,onOpen:ee})})})})};Fn.__ui__="Menu";var Pe=Z(({id:n,as:o,className:t,children:a,...r},l)=>{var d;const{onKeyDownRef:v,onUpstreamRestoreFocus:f}=(d=Ie())!=null?d:{},{buttonRef:_,open:c,onClose:P,onFocusFirstItem:g,onFocusLastItem:y,onOpen:I}=se(),E=s.useId();n??(n=E);const k=s.useCallback(h=>{h.key===" "&&(h.key=h.code);const p={ArrowDown:z(I,g),ArrowUp:z(I,y),Enter:z(I,g),Space:z(I,g)}[h.key];p&&(h.preventDefault(),p())},[g,y,I]),N=s.useCallback(h=>{h.key===" "&&(h.key=h.code);const p={ArrowLeft:c?z(f,P):void 0,ArrowRight:c?void 0:z(I,g),Enter:c?void 0:z(I,g),Space:c?void 0:z(I,g)}[h.key];p&&(h.preventDefault(),p())},[c,I,g,f,P]);tn(v,N);const x=s.useMemo(()=>o?Q(o):Tn,[o]);return D.jsx(ye,{children:D.jsx(x,{id:n,ref:J(_,l),className:$("ui-menu",t),"aria-haspopup":"menu",...r,"data-active":xe(c),onKeyDown:R(r.onKeyDown,k),children:a})})});Pe.displayName="MenuButton";Pe.__ui__="MenuButton";var Tn=Z((n,o)=>{const{styles:t}=se(),a={alignItems:"center",appearance:"none",display:"inline-flex",outline:0,...t.button};return D.jsx(Q.button,{ref:o,__css:a,...n})}),Be=Z(({className:n,children:o,icon:t,iconProps:a,innerProps:r,...l},d)=>D.jsxs(Pe,{ref:d,className:$("ui-menu__item-button",n),flex:"1",...l,children:[D.jsx(Q.span,{as:"span",flex:"1",...r,children:o}),D.jsx(oe,{...a,children:t??D.jsx(sn,{fontSize:"1.5em",transform:"rotate(-90deg)"})})]}));Be.displayName="MenuItemButton";Be.__ui__="MenuItemButton";export{Fn as M,Pe as a,Ae as b,Me as c,se as u};
