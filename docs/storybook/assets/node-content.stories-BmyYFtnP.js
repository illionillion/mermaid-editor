import{r as t,R as r}from"./iframe-BClDxSdX.js";import{L as O}from"./label-editor-BSpcvamg.js";import{V as H}from"./variable-name-editor-lRQNOF_Q.js";import{U as P}from"./types-CqnIvgx0.js";import{N as U}from"./node-menu-S-g9JIbY.js";import{B as j}from"./chunk-ZJJ7XTJB-FdQtK2Ok.js";import"./preload-helper-C1FmrZbK.js";import"./chunk-2SDIXUVN-BeQEuqVg.js";import"./chunk-HZUFQ4E7-DilHWIlN.js";import"./mermaid-TRHq53KC.js";import"./createLucideIcon-Dm5MWXbI.js";import"./chunk-AFVGPBIP-VQi4iD-y.js";import"./chunk-3UTYG3XF-BghBXnur.js";function u({data:e,id:a}){const[d,o]=t.useState(!1),[p,i]=t.useState(!1),[g,c]=t.useState(e.label),[b,h]=t.useState(e.variableName||`node${a}`),[y,C]=t.useState(!1),f=t.useRef(0),v=()=>{Date.now()-f.current<P.DOUBLE_CLICK_THRESHOLD||(p&&s(),o(!0))},V=n=>{n.stopPropagation(),n.preventDefault(),f.current=Date.now(),d&&l(),i(!0)},D=n=>{c(n.target.value)},I=n=>{h(n.target.value)},l=()=>{o(!1),e.onLabelChange&&e.onLabelChange(a,g)},s=()=>{i(!1),e.onVariableNameChange&&e.onVariableNameChange(a,b)},k=()=>{o(!1),c(e.label)},x=()=>{i(!1),h(e.variableName||`node${a}`)},$=n=>{n.key==="Enter"&&!y?l():n.key==="Escape"&&k()},q=n=>{n.key==="Enter"&&!y?s():n.key==="Escape"&&x()},N=()=>{C(!0)},E=()=>{C(!1)},_=()=>{e.onDelete&&e.onDelete(a)},B=()=>{p&&s(),o(!0)},K=()=>{d&&l(),i(!0)},R=n=>{var S;(S=e.onShapeTypeChange)==null||S.call(e,a,n)};return r.createElement(j,{bg:"white",border:"2px solid #1a365d",borderRadius:"md",p:2,w:"xs",minH:"6xs",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",onDoubleClick:v,_hover:{boxShadow:"md"},position:"relative"},r.createElement(H,{value:b,isEditing:p,shapeType:e.shapeType,onClick:V,onChange:I,onKeyDown:q,onCompositionStart:N,onCompositionEnd:E,onBlur:s}),r.createElement(U,{onDelete:_,onEdit:B,onEditVariableName:K,onShapeChange:R,currentShape:e.shapeType||"rectangle"}),r.createElement(O,{value:g,isEditing:d,onDoubleClick:v,onChange:D,onKeyDown:$,onCompositionStart:N,onCompositionEnd:E,onBlur:l}))}u.__docgenInfo={description:"",methods:[],displayName:"NodeContent",props:{data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  label: string;
  variableName?: string;
  shapeType?: MermaidShapeType;
  onLabelChange?: (nodeId: string, newLabel: string) => void;
  onVariableNameChange?: (nodeId: string, newVariableName: string) => void;
  onShapeTypeChange?: (nodeId: string, newShapeType: string) => void;
  onDelete?: (nodeId: string) => void;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"variableName",value:{name:"string",required:!1}},{key:"shapeType",value:{name:"union",raw:`| "rectangle" // [label]
| "diamond" // {label}
| "rounded" // (label)
| "circle" // ((label))
| "hexagon" // {{label}}
| "stadium"`,elements:[{name:"literal",value:'"rectangle"'},{name:"literal",value:'"diamond"'},{name:"literal",value:'"rounded"'},{name:"literal",value:'"circle"'},{name:"literal",value:'"hexagon"'},{name:"literal",value:'"stadium"'}],required:!1}},{key:"onLabelChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newLabel: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newLabel"}],return:{name:"void"}},required:!1}},{key:"onVariableNameChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newVariableName: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newVariableName"}],return:{name:"void"}},required:!1}},{key:"onShapeTypeChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newShapeType: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newShapeType"}],return:{name:"void"}},required:!1}},{key:"onDelete",value:{name:"signature",type:"function",raw:"(nodeId: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"}],return:{name:"void"}},required:!1}}]}},description:""},id:{required:!0,tsType:{name:"string"},description:""}}};const ae={title:"components/node/NodeContent",component:u},m={render:()=>r.createElement(u,{id:"1",data:{label:"ノードラベル",variableName:"var1",shapeType:"rectangle",onLabelChange:(e,a)=>alert(`ラベル変更: ${a}`),onVariableNameChange:(e,a)=>alert(`変数名変更: ${a}`),onShapeTypeChange:(e,a)=>alert(`形状変更: ${a}`),onDelete:e=>alert(`削除: ${e}`)}})};var w,L,T;m.parameters={...m.parameters,docs:{...(w=m.parameters)==null?void 0:w.docs,source:{originalSource:'{\n  render: () => <NodeContent id="1" data={{\n    label: "ノードラベル",\n    variableName: "var1",\n    shapeType: "rectangle",\n    onLabelChange: (id, label) => alert(`ラベル変更: ${label}`),\n    onVariableNameChange: (id, name) => alert(`変数名変更: ${name}`),\n    onShapeTypeChange: (id, shape) => alert(`形状変更: ${shape}`),\n    onDelete: id => alert(`削除: ${id}`)\n  }} />\n}',...(T=(L=m.parameters)==null?void 0:L.docs)==null?void 0:T.source}}};const te=["Default"];export{m as Default,te as __namedExportsOrder,ae as default};
