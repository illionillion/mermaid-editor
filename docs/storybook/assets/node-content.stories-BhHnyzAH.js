import{R as t,r as m}from"./iframe-Cnjz5Urv.js";import{I as x}from"./chunk-2SDIXUVN-BZYWylkq.js";import{T as A}from"./chunk-HZUFQ4E7-DnmRoNNj.js";import{f as F}from"./mermaid-DJDY5Okz.js";import{B as L}from"./chunk-ZJJ7XTJB-785uJcQD.js";import{U as P}from"./types-CqnIvgx0.js";import{N as U}from"./node-menu-DR58oFST.js";import"./preload-helper-C1FmrZbK.js";import"./createLucideIcon-T42Pvfjq.js";import"./chunk-AFVGPBIP-DCQxvsqD.js";import"./chunk-3UTYG3XF-DoC50_A6.js";function q({value:e,isEditing:n,onDoubleClick:o,onChange:r,onKeyDown:s,onCompositionStart:i,onCompositionEnd:l,onBlur:u}){return t.createElement(t.Fragment,null,n?t.createElement(x,{value:e,onChange:r,onKeyDown:s,onCompositionStart:i,onCompositionEnd:l,onBlur:u,size:"sm",autoFocus:!0,textAlign:"center",w:"full",h:"24px",p:1,fontSize:"sm",border:"none",bg:"transparent",_focus:{boxShadow:"none",outline:"none"}}):t.createElement(A,{w:"full",fontSize:"sm",fontWeight:"medium",wordBreak:"break-word",lineHeight:"1.2",onDoubleClick:o},e))}q.__docgenInfo={description:"",methods:[],displayName:"LabelEditor",props:{value:{required:!0,tsType:{name:"string"},description:""},isEditing:{required:!0,tsType:{name:"boolean"},description:""},onDoubleClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ChangeEvent",elements:[{name:"HTMLInputElement"}],raw:"ChangeEvent<HTMLInputElement>"},name:"e"}],return:{name:"void"}}},description:""},onKeyDown:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: KeyboardEvent) => void",signature:{arguments:[{type:{name:"KeyboardEvent"},name:"e"}],return:{name:"void"}}},description:""},onCompositionStart:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCompositionEnd:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onBlur:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function D({value:e,isEditing:n,shapeType:o,onClick:r,onChange:s,onKeyDown:i,onCompositionStart:l,onCompositionEnd:u,onBlur:d}){const p=F(o||"rectangle",e);return t.createElement(L,{position:"absolute",top:"-12px",left:"0px",bg:"blue.500",color:"white",px:1,py:"1px",borderRadius:"sm",fontSize:"10px",fontWeight:"medium",cursor:"pointer",onClick:r,_hover:{bg:"blue.600"},zIndex:10},n?t.createElement(x,{value:e,onChange:s,onKeyDown:i,onCompositionStart:l,onCompositionEnd:u,onBlur:d,size:"xs",autoFocus:!0,w:"60px",h:"16px",p:0,fontSize:"10px",bg:"white",color:"black",border:"none",_focus:{boxShadow:"none",outline:"none"}}):p)}D.__docgenInfo={description:"",methods:[],displayName:"VariableNameEditor",props:{value:{required:!0,tsType:{name:"string"},description:""},isEditing:{required:!0,tsType:{name:"boolean"},description:""},shapeType:{required:!1,tsType:{name:"union",raw:`| "rectangle" // [label]
| "diamond" // {label}
| "rounded" // (label)
| "circle" // ((label))
| "hexagon" // {{label}}
| "stadium"`,elements:[{name:"literal",value:'"rectangle"'},{name:"literal",value:'"diamond"'},{name:"literal",value:'"rounded"'},{name:"literal",value:'"circle"'},{name:"literal",value:'"hexagon"'},{name:"literal",value:'"stadium"'}]},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: MouseEvent) => void",signature:{arguments:[{type:{name:"MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ChangeEvent",elements:[{name:"HTMLInputElement"}],raw:"ChangeEvent<HTMLInputElement>"},name:"e"}],return:{name:"void"}}},description:""},onKeyDown:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: KeyboardEvent) => void",signature:{arguments:[{type:{name:"KeyboardEvent"},name:"e"}],return:{name:"void"}}},description:""},onCompositionStart:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCompositionEnd:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onBlur:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function y({data:e,id:n}){const[o,r]=m.useState(!1),[s,i]=m.useState(!1),[l,u]=m.useState(e.label),[d,p]=m.useState(e.variableName||`node${n}`),[h,v]=m.useState(!1),f=m.useRef(0),C=()=>{Date.now()-f.current<P.DOUBLE_CLICK_THRESHOLD||(s&&c(),r(!0))},V=a=>{a.stopPropagation(),a.preventDefault(),f.current=Date.now(),o&&g(),i(!0)},k=a=>{u(a.target.value)},$=a=>{p(a.target.value)},g=()=>{r(!1),e.onLabelChange&&e.onLabelChange(n,l)},c=()=>{i(!1),e.onVariableNameChange&&e.onVariableNameChange(n,d)},_=()=>{r(!1),u(e.label)},K=()=>{i(!1),p(e.variableName||`node${n}`)},M=a=>{a.key==="Enter"&&!h?g():a.key==="Escape"&&_()},H=a=>{a.key==="Enter"&&!h?c():a.key==="Escape"&&K()},E=()=>{v(!0)},w=()=>{v(!1)},B=()=>{e.onDelete&&e.onDelete(n)},z=()=>{s&&c(),r(!0)},R=()=>{o&&g(),i(!0)},O=a=>{var T;(T=e.onShapeTypeChange)==null||T.call(e,n,a)};return t.createElement(L,{bg:"white",border:"2px solid #1a365d",borderRadius:"md",p:2,w:"xs",minH:"6xs",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",onDoubleClick:C,_hover:{boxShadow:"md"},position:"relative"},t.createElement(D,{value:d,isEditing:s,shapeType:e.shapeType,onClick:V,onChange:$,onKeyDown:H,onCompositionStart:E,onCompositionEnd:w,onBlur:c}),t.createElement(U,{onDelete:B,onEdit:z,onEditVariableName:R,onShapeChange:O,currentShape:e.shapeType||"rectangle"}),t.createElement(q,{value:l,isEditing:o,onDoubleClick:C,onChange:k,onKeyDown:M,onCompositionStart:E,onCompositionEnd:w,onBlur:g}))}y.__docgenInfo={description:"",methods:[],displayName:"NodeContent",props:{data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  label: string;
  variableName?: string;
  shapeType?: MermaidShapeType;
  onLabelChange?: (nodeId: string, newLabel: string) => void;
  onVariableNameChange?: (nodeId: string, newVariableName: string) => void;
  onShapeTypeChange?: (nodeId: string, newShapeType: string) => void;
  onDelete?: (nodeId: string) => void;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"variableName",value:{name:"string",required:!1}},{key:"shapeType",value:{name:"union",raw:`| "rectangle" // [label]
| "diamond" // {label}
| "rounded" // (label)
| "circle" // ((label))
| "hexagon" // {{label}}
| "stadium"`,elements:[{name:"literal",value:'"rectangle"'},{name:"literal",value:'"diamond"'},{name:"literal",value:'"rounded"'},{name:"literal",value:'"circle"'},{name:"literal",value:'"hexagon"'},{name:"literal",value:'"stadium"'}],required:!1}},{key:"onLabelChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newLabel: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newLabel"}],return:{name:"void"}},required:!1}},{key:"onVariableNameChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newVariableName: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newVariableName"}],return:{name:"void"}},required:!1}},{key:"onShapeTypeChange",value:{name:"signature",type:"function",raw:"(nodeId: string, newShapeType: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"},{type:{name:"string"},name:"newShapeType"}],return:{name:"void"}},required:!1}},{key:"onDelete",value:{name:"signature",type:"function",raw:"(nodeId: string) => void",signature:{arguments:[{type:{name:"string"},name:"nodeId"}],return:{name:"void"}},required:!1}}]}},description:""},id:{required:!0,tsType:{name:"string"},description:""}}};const te={title:"components/node/NodeContent",component:y},b={render:()=>t.createElement(y,{id:"1",data:{label:"ノードラベル",variableName:"var1",shapeType:"rectangle",onLabelChange:(e,n)=>alert(`ラベル変更: ${e} → ${n}`),onVariableNameChange:(e,n)=>alert(`変数名変更: ${e} → ${n}`),onShapeTypeChange:(e,n)=>alert(`形状変更: ${e} → ${n}`),onDelete:e=>alert(`削除: ${e}`)}})};var N,S,I;b.parameters={...b.parameters,docs:{...(N=b.parameters)==null?void 0:N.docs,source:{originalSource:'{\n  render: () => <NodeContent id="1" data={{\n    label: "ノードラベル",\n    variableName: "var1",\n    shapeType: "rectangle",\n    onLabelChange: (id, label) => alert(`ラベル変更: ${id} → ${label}`),\n    onVariableNameChange: (id, name) => alert(`変数名変更: ${id} → ${name}`),\n    onShapeTypeChange: (id, shape) => alert(`形状変更: ${id} → ${shape}`),\n    onDelete: id => alert(`削除: ${id}`)\n  }} />\n}',...(I=(S=b.parameters)==null?void 0:S.docs)==null?void 0:I.source}}};const re=["Default"];export{b as Default,re as __namedExportsOrder,te as default};
