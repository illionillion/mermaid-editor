import{R as o,r as p}from"./iframe-BUjWjKwL.js";import{U as P}from"./types-CqnIvgx0.js";import{I as L}from"./chunk-2SDIXUVN-CgtrllIv.js";import{T as U}from"./chunk-HZUFQ4E7-C5WvJNVl.js";import{f as M}from"./mermaid-DJDY5Okz.js";import{B as $}from"./chunk-ZJJ7XTJB-CYto-gWx.js";import{N as W}from"./node-menu-DWhpoPBF.js";import"./preload-helper-C1FmrZbK.js";import"./createLucideIcon-BL_TnK8f.js";import"./chunk-3UTYG3XF-DrNYvnAd.js";import"./chunk-FVWMS4CP-BB-5zPws.js";import"./index-lsaZBvwd.js";import"./chunk-QQERBTQW-BVEa9W6g.js";import"./chunk-AFVGPBIP-_bZBFQaB.js";const v=({value:e,isEditing:n,onDoubleClick:l,onChange:t,onKeyDown:i,onCompositionStart:r,onCompositionEnd:s,onBlur:m})=>o.createElement(o.Fragment,null,n?o.createElement(L,{value:e,onChange:t,onKeyDown:i,onCompositionStart:r,onCompositionEnd:s,onBlur:m,size:"sm",autoFocus:!0,textAlign:"center",w:"full",h:"24px",p:1,fontSize:"sm",border:"none",bg:"transparent",_focus:{boxShadow:"none",outline:"none"}}):o.createElement(U,{w:"full",fontSize:"sm",fontWeight:"medium",wordBreak:"break-word",lineHeight:"1.2",onDoubleClick:l},e));v.__docgenInfo={description:"",methods:[],displayName:"LabelEditor"};const _=({value:e,isEditing:n,shapeType:l,onClick:t,onChange:i,onKeyDown:r,onCompositionStart:s,onCompositionEnd:m,onBlur:c})=>{const d=M(l||"rectangle",e);return o.createElement($,{position:"absolute",top:"-12px",left:"0px",bg:"blue.500",color:"white",px:1,py:"1px",borderRadius:"sm",fontSize:"10px",fontWeight:"medium",cursor:"pointer",onClick:t,_hover:{bg:"blue.600"},zIndex:10},n?o.createElement(L,{value:e,onChange:i,onKeyDown:r,onCompositionStart:s,onCompositionEnd:m,onBlur:c,size:"xs",autoFocus:!0,w:"60px",h:"16px",p:0,fontSize:"10px",bg:"white",color:"black",border:"none",_focus:{boxShadow:"none",outline:"none"}}):d)};_.__docgenInfo={description:"",methods:[],displayName:"VariableNameEditor"};const f=({data:e,id:n})=>{const[l,t]=p.useState(!1),[i,r]=p.useState(!1),[s,m]=p.useState(e.label),[c,d]=p.useState(e.variableName||`node${n}`),[g,C]=p.useState(!1),E=p.useRef(0),N=()=>{Date.now()-E.current<P.DOUBLE_CLICK_THRESHOLD||(i&&h(),t(!0))},T=a=>{a.stopPropagation(),a.preventDefault(),E.current=Date.now(),l&&b(),r(!0)},k=a=>{m(a.target.value)},I=a=>{d(a.target.value)},b=()=>{t(!1),e.onLabelChange&&e.onLabelChange(n,s)},h=()=>{r(!1),e.onVariableNameChange&&e.onVariableNameChange(n,c)},z=()=>{t(!1),m(e.label)},B=()=>{r(!1),d(e.variableName||`node${n}`)},R=a=>{a.key==="Enter"&&!g?b():a.key==="Escape"&&z()},K=a=>{a.key==="Enter"&&!g?h():a.key==="Escape"&&B()},S=()=>{C(!0)},x=()=>{C(!1)},H=()=>{e.onDelete&&e.onDelete(n)},O=()=>{i&&h(),t(!0)},A=()=>{l&&b(),r(!0)},F=a=>{var y;(y=e.onShapeTypeChange)==null||y.call(e,n,a)};return o.createElement($,{bg:"white",border:"2px solid #1a365d",borderRadius:"md",p:2,w:"xs",minH:"6xs",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",onDoubleClick:N,_hover:{boxShadow:"md"},position:"relative"},o.createElement(_,{value:c,isEditing:i,shapeType:e.shapeType,onClick:T,onChange:I,onKeyDown:K,onCompositionStart:S,onCompositionEnd:x,onBlur:h}),o.createElement(W,{onDelete:H,onEdit:O,onEditVariableName:A,onShapeChange:F,currentShape:e.shapeType||"rectangle"}),o.createElement(v,{value:s,isEditing:l,onDoubleClick:N,onChange:k,onKeyDown:R,onCompositionStart:S,onCompositionEnd:x,onBlur:b}))};f.__docgenInfo={description:"",methods:[],displayName:"NodeContent"};const le={title:"components/node/NodeContent",component:f},u={render:()=>o.createElement(f,{id:"1",data:{label:"ノードラベル",variableName:"var1",shapeType:"rectangle",onLabelChange:(e,n)=>alert(`ラベル変更: ${e} → ${n}`),onVariableNameChange:(e,n)=>alert(`変数名変更: ${e} → ${n}`),onShapeTypeChange:(e,n)=>alert(`形状変更: ${e} → ${n}`),onDelete:e=>alert(`削除: ${e}`)}})};var w,D,V;u.parameters={...u.parameters,docs:{...(w=u.parameters)==null?void 0:w.docs,source:{originalSource:'{\n  render: () => <NodeContent id="1" data={{\n    label: "ノードラベル",\n    variableName: "var1",\n    shapeType: "rectangle",\n    onLabelChange: (id, label) => alert(`ラベル変更: ${id} → ${label}`),\n    onVariableNameChange: (id, name) => alert(`変数名変更: ${id} → ${name}`),\n    onShapeTypeChange: (id, shape) => alert(`形状変更: ${id} → ${shape}`),\n    onDelete: id => alert(`削除: ${id}`)\n  }} />\n}',...(V=(D=u.parameters)==null?void 0:D.docs)==null?void 0:V.source}}};const ie=["Default"];export{u as Default,ie as __namedExportsOrder,le as default};
