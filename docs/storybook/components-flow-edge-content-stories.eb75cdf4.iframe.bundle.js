"use strict";(self.webpackChunkmermaid_editor=self.webpackChunkmermaid_editor||[]).push([[338],{"./stories/components/flow/edge-content.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>edge_content_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),chunk_4BKHXCBQ=__webpack_require__("./node_modules/.pnpm/@yamada-ui+layouts@1.4.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/layouts/dist/chunk-4BKHXCBQ.mjs"),chunk_RUUNC4DZ=(__webpack_require__("./node_modules/.pnpm/@xyflow+react@12.8.2_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@xyflow/react/dist/esm/index.js"),__webpack_require__("./node_modules/.pnpm/@xyflow+system@0.0.66/node_modules/@xyflow/system/dist/esm/index.js"),__webpack_require__("./node_modules/.pnpm/@yamada-ui+lucide@1.10.5_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/lucide/dist/chunk-RUUNC4DZ.mjs")),chunk_ZJJ7XTJB=__webpack_require__("./node_modules/.pnpm/@yamada-ui+layouts@1.4.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/layouts/dist/chunk-ZJJ7XTJB.mjs"),chunk_2SDIXUVN=__webpack_require__("./node_modules/.pnpm/@yamada-ui+input@1.0.56_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/input/dist/chunk-2SDIXUVN.mjs"),chunk_KNFS6H5K=__webpack_require__("./node_modules/.pnpm/@yamada-ui+layouts@1.4.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/layouts/dist/chunk-KNFS6H5K.mjs"),chunk_QQERBTQW=__webpack_require__("./node_modules/.pnpm/@yamada-ui+button@1.0.59_@emotion+is-prop-valid@1.3.1_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/button/dist/chunk-QQERBTQW.mjs"),react=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js");var mermaid=__webpack_require__("./features/flowchart/hooks/mermaid.ts"),arrow_type_selector=__webpack_require__("./features/flowchart/components/edge/arrow-type-selector.tsx");function EdgeContent({id,labelX,labelY,data}){const[isEditing,setIsEditing]=(0,react.useState)(!1),[edgeLabel,setEdgeLabel]=(0,react.useState)((null==data?void 0:data.label)||""),[isComposing,setIsComposing]=(0,react.useState)(!1),inputRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{isEditing&&inputRef.current&&(inputRef.current.focus(),inputRef.current.select())},[isEditing]);const handleSubmit=()=>{setIsEditing(!1),(null==data?void 0:data.onLabelChange)&&data.onLabelChange(id,edgeLabel)};return(0,jsx_runtime.jsx)(chunk_ZJJ7XTJB.a,{position:"absolute",transform:`translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,pointerEvents:"all",className:"nodrag nopan",children:isEditing?(0,jsx_runtime.jsx)(chunk_2SDIXUVN.p,{ref:inputRef,value:edgeLabel,onChange:e=>setEdgeLabel(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing?"Escape"===e.key&&(setIsEditing(!1),setEdgeLabel((null==data?void 0:data.label)||"")):handleSubmit()},onBlur:()=>{handleSubmit()},onCompositionStart:()=>{setIsComposing(!0)},onCompositionEnd:()=>{setIsComposing(!1)},size:"sm",w:"120px",bg:"white",border:"1px solid",borderColor:"gray.300",fontSize:"12px",textAlign:"center"}):(0,jsx_runtime.jsxs)(chunk_KNFS6H5K.zt,{gap:"1",align:"center",children:[(0,jsx_runtime.jsxs)(chunk_ZJJ7XTJB.a,{onClick:e=>{e.preventDefault(),e.stopPropagation(),setIsEditing(!0)},bg:"white",p:"1",px:"2",borderRadius:"md",fontSize:"xs",border:"1px solid",borderColor:"gray.300",cursor:"pointer",minW:"20px",textAlign:"center",display:"flex",alignItems:"center",gap:"1",children:[(0,jsx_runtime.jsx)(chunk_ZJJ7XTJB.a,{as:"span",color:"blue.600",fontWeight:"bold",children:(0,mermaid.UF)((null==data?void 0:data.arrowType)||"arrow")}),(0,jsx_runtime.jsx)(chunk_ZJJ7XTJB.a,{as:"span",children:edgeLabel||"..."})]}),(0,jsx_runtime.jsx)(arrow_type_selector.N,{currentArrowType:(null==data?void 0:data.arrowType)||"arrow",onArrowTypeChange:arrowType=>{(null==data?void 0:data.onArrowTypeChange)&&data.onArrowTypeChange(id,arrowType)}}),(0,jsx_runtime.jsx)(chunk_QQERBTQW.K,{"aria-label":"Delete edge",icon:(0,jsx_runtime.jsx)(chunk_RUUNC4DZ.u,{}),size:"xs",variant:"ghost",colorScheme:"red",onClick:e=>{e.preventDefault(),e.stopPropagation(),(null==data?void 0:data.onDelete)&&data.onDelete(id)},bg:"white",border:"1px solid",borderColor:"red.300",_hover:{bg:"red.50"}})]})})}EdgeContent.__docgenInfo={description:"",methods:[],displayName:"EdgeContent",props:{id:{required:!0,tsType:{name:"string"},description:""},labelX:{required:!0,tsType:{name:"number"},description:""},labelY:{required:!0,tsType:{name:"number"},description:""},data:{required:!1,tsType:{name:'EditableEdgeProps["data"]',raw:'EditableEdgeProps["data"]'},description:""}}};const edge_content_stories={title:"components/flow/EdgeContent",component:EdgeContent},Default={render:()=>(0,jsx_runtime.jsx)(chunk_4BKHXCBQ.o,{w:"full",h:"100vh",position:"relative",children:(0,jsx_runtime.jsx)(EdgeContent,{id:"e1-2",labelX:0,labelY:0,data:{label:"edge label",arrowType:"arrow",onLabelChange:(id,label)=>alert(`ラベル変更: ${id} → ${label}`),onArrowTypeChange:(id,type)=>alert(`矢印タイプ変更: ${id} → ${type}`),onDelete:id=>alert(`削除: ${id}`)}})})},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  render: () => <Center w="full" h="100vh" position="relative">\n      <EdgeContent id="e1-2" labelX={0} labelY={0} data={{\n      label: "edge label",\n      arrowType: "arrow" as MermaidArrowType,\n      onLabelChange: (id: string, label: string) => alert(`ラベル変更: ${id} → ${label}`),\n      onArrowTypeChange: (id: string, type: MermaidArrowType) => alert(`矢印タイプ変更: ${id} → ${type}`),\n      onDelete: (id: string) => alert(`削除: ${id}`)\n    }} />\n    </Center>\n}',...Default.parameters?.docs?.source}}}}}]);