"use strict";(self.webpackChunkmermaid_editor=self.webpackChunkmermaid_editor||[]).push([[621],{"./features/er-diagram/stories/er-table-content.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>er_table_content_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),lib=__webpack_require__("./node_modules/.pnpm/@tanstack+react-table@8.21.3_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@tanstack/react-table/build/lib/index.mjs"),build_lib=__webpack_require__("./node_modules/.pnpm/@tanstack+table-core@8.21.3/node_modules/@tanstack/table-core/build/lib/index.mjs"),chunk_RUUNC4DZ=__webpack_require__("./node_modules/.pnpm/@yamada-ui+lucide@1.10.5_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/lucide/dist/chunk-RUUNC4DZ.mjs"),dist=__webpack_require__("./node_modules/.pnpm/@yamada-ui+core@1.17.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/core/dist/index.mjs"),chunk_QQERBTQW=__webpack_require__("./node_modules/.pnpm/@yamada-ui+button@1.0.59_@emotion+is-prop-valid@1.3.1_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/button/dist/chunk-QQERBTQW.mjs"),chunk_KNFS6H5K=__webpack_require__("./node_modules/.pnpm/@yamada-ui+layouts@1.4.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/layouts/dist/chunk-KNFS6H5K.mjs"),chunk_3UZGJMSU=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-3UZGJMSU.mjs"),chunk_JZWD7PGB=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-JZWD7PGB.mjs"),chunk_MJR3ZFMS=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-MJR3ZFMS.mjs"),chunk_6MABFBBX=__webpack_require__("./node_modules/.pnpm/@yamada-ui+form-control@2.1.15_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/form-control/dist/chunk-6MABFBBX.mjs"),chunk_HZUFQ4E7=__webpack_require__("./node_modules/.pnpm/@yamada-ui+typography@1.1.9_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/typography/dist/chunk-HZUFQ4E7.mjs"),chunk_2SDIXUVN=__webpack_require__("./node_modules/.pnpm/@yamada-ui+input@1.0.56_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/input/dist/chunk-2SDIXUVN.mjs"),chunk_AFVGPBIP=__webpack_require__("./node_modules/.pnpm/@yamada-ui+button@1.0.59_@emotion+is-prop-valid@1.3.1_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/button/dist/chunk-AFVGPBIP.mjs"),chunk_LYMHYONQ=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-LYMHYONQ.mjs"),chunk_LLH42TQJ=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-LLH42TQJ.mjs"),chunk_4QJSV25Y=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-4QJSV25Y.mjs"),chunk_IDLEMHNN=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-IDLEMHNN.mjs"),chunk_I5QX3ZVD=__webpack_require__("./node_modules/.pnpm/@yamada-ui+native-table@1.0.52_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/native-table/dist/chunk-I5QX3ZVD.mjs"),chunk_4BKHXCBQ=__webpack_require__("./node_modules/.pnpm/@yamada-ui+layouts@1.4.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/layouts/dist/chunk-4BKHXCBQ.mjs");const ERTableContent=({name,columns,onNameChange,onColumnsChange})=>{const handleChange=(rowIdx,key,value)=>{onColumnsChange(columns.map((col,i)=>i===rowIdx?{...col,[key]:value}:col))},columnDefs=[{header:()=>"カラム名",cell:({row,getValue})=>(0,jsx_runtime.jsx)(CellEditor,{value:getValue(),label:"カラム名",onCommit:v=>handleChange(row.index,"name",v)}),accessorKey:"name"},{header:()=>"型",cell:({row,getValue})=>(0,jsx_runtime.jsx)(CellEditor,{value:getValue(),label:"型",onCommit:v=>handleChange(row.index,"type",v)}),accessorKey:"type"},{header:()=>"PK",cell:({row})=>(0,jsx_runtime.jsx)(dist.ui.input,{type:"checkbox",checked:columns[row.index].pk,"aria-label":"PK",disabled:columns[row.index].uk,onChange:e=>{const checked=e.target.checked;onColumnsChange(columns.map((col,i)=>i===row.index?{...col,pk:checked}:col))}}),accessorKey:"pk"},{header:()=>"UK",cell:({row})=>(0,jsx_runtime.jsx)(dist.ui.input,{type:"checkbox",checked:columns[row.index].uk,"aria-label":"UK",disabled:columns[row.index].pk,onChange:e=>{const checked=e.target.checked;onColumnsChange(columns.map((col,i)=>i===row.index?{...col,uk:checked}:col))}}),accessorKey:"uk"},{header:"",id:"actions",cell:({row})=>(0,jsx_runtime.jsx)(chunk_QQERBTQW.K,{"aria-label":"削除",icon:(0,jsx_runtime.jsx)(chunk_RUUNC4DZ.u,{}),size:"xs",colorScheme:"danger",onClick:()=>{return rowIdx=row.index,void onColumnsChange(columns.filter((_,i)=>i!==rowIdx));var rowIdx},variant:"outline"})}],table=(0,lib.N4)({data:columns,columns:columnDefs,getCoreRowModel:(0,build_lib.HT)()});return(0,jsx_runtime.jsx)(chunk_KNFS6H5K.Tk,{bg:"white",border:"2px solid #1a365d",borderRadius:"md",p:2,w:"full",minW:"xl",maxW:"5xl",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",cursor:"pointer",_hover:{boxShadow:"md"},position:"relative",children:(0,jsx_runtime.jsx)(chunk_3UZGJMSU.K,{w:"full",children:(0,jsx_runtime.jsxs)(chunk_JZWD7PGB.Kz,{variant:"simple",size:"sm",children:[(0,jsx_runtime.jsx)(chunk_MJR3ZFMS.r,{placement:"top",children:(0,jsx_runtime.jsxs)(chunk_KNFS6H5K.zt,{justifyContent:"space-between",w:"full",children:[(0,jsx_runtime.jsxs)(chunk_KNFS6H5K.zt,{as:chunk_6MABFBBX.JU,children:[(0,jsx_runtime.jsx)(chunk_HZUFQ4E7.E,{fontWeight:"bold",fontSize:"md",children:"テーブル名"}),(0,jsx_runtime.jsx)(chunk_2SDIXUVN.p,{"aria-label":"テーブル名",value:name,onChange:e=>onNameChange(e.target.value),fontWeight:"bold",fontSize:"md"})]}),(0,jsx_runtime.jsx)(chunk_AFVGPBIP.$,{size:"md",colorScheme:"blue",onClick:()=>{onColumnsChange([...columns,{name:"",type:"",pk:!1,uk:!1}])},children:"カラム追加"})]})}),(0,jsx_runtime.jsx)(chunk_LYMHYONQ.d,{children:(0,jsx_runtime.jsx)(chunk_LLH42TQJ.Tr,{children:table.getHeaderGroups()[0].headers.map(header=>(0,jsx_runtime.jsx)(chunk_4QJSV25Y.Th,{fontWeight:"bold",textAlign:"left",children:(0,lib.Kv)(header.column.columnDef.header,header.getContext())},header.id))})}),(0,jsx_runtime.jsx)(chunk_IDLEMHNN.N,{children:table.getRowModel().rows.map(row=>(0,jsx_runtime.jsx)(chunk_LLH42TQJ.Tr,{children:row.getVisibleCells().map(cell=>(0,jsx_runtime.jsx)(chunk_I5QX3ZVD.Td,{children:(0,jsx_runtime.jsx)(chunk_4BKHXCBQ.o,{w:"full",h:"full",children:(0,lib.Kv)(cell.column.columnDef.cell,cell.getContext())})},cell.id))},row.id))})]})})})},CellEditor=({value,onCommit,label})=>{const[inputValue,setInputValue]=(0,react.useState)(value),[isComposing,setIsComposing]=(0,react.useState)(!1);return(0,react.useEffect)(()=>{setInputValue(value)},[value]),(0,jsx_runtime.jsx)(chunk_2SDIXUVN.p,{"aria-label":label,size:"sm",value:inputValue,onChange:e=>setInputValue(e.target.value),onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:e=>{setIsComposing(!1),setInputValue(e.currentTarget.value)},onBlur:()=>onCommit(inputValue),onKeyDown:e=>{"Enter"!==e.key||isComposing||(onCommit(inputValue),e.currentTarget.blur())}})};ERTableContent.__docgenInfo={description:"",methods:[],displayName:"ERTableContent"},CellEditor.__docgenInfo={description:"",methods:[],displayName:"CellEditor",props:{value:{required:!0,tsType:{name:"string"},description:""},onCommit:{required:!0,tsType:{name:"signature",type:"function",raw:"(v: string) => void",signature:{arguments:[{type:{name:"string"},name:"v"}],return:{name:"void"}}},description:""},label:{required:!0,tsType:{name:"string"},description:""}}};const er_table_content_stories={title:"components/er/ERTableContent",component:ERTableContent},initialColumns=[{name:"id",type:"int",pk:!0,uk:!1},{name:"name",type:"varchar(255)",pk:!1,uk:!1}],Default={render:()=>{const[name,setName]=(0,react.useState)("ユーザー"),[columns,setColumns]=(0,react.useState)(initialColumns);return(0,jsx_runtime.jsx)(ERTableContent,{name,columns,onNameChange:setName,onColumnsChange:setColumns})}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const [name, setName] = useState("ユーザー");\n    const [columns, setColumns] = useState(initialColumns);\n    return <ERTableContent name={name} columns={columns} onNameChange={setName} onColumnsChange={setColumns} />;\n  }\n}',...Default.parameters?.docs?.source}}}}}]);