"use strict";(self.webpackChunkmermaid_editor=self.webpackChunkmermaid_editor||[]).push([[996],{"./features/flowchart/components/editor/variable-name-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>VariableNameEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),_yamada_ui_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+input@1.0.56_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/input/dist/chunk-2SDIXUVN.mjs"),_yamada_ui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+layouts@1.4.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/layouts/dist/chunk-ZJJ7XTJB.mjs"),_hooks_mermaid__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./features/flowchart/hooks/mermaid.ts");const VariableNameEditor=({value,isEditing,shapeType,onClick,onChange,onKeyDown,onCompositionStart,onCompositionEnd,onBlur})=>{const displayValue=(0,_hooks_mermaid__WEBPACK_IMPORTED_MODULE_3__.CP)(shapeType||"rectangle",value);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_yamada_ui_react__WEBPACK_IMPORTED_MODULE_2__.a,{position:"absolute",top:"-12px",left:"0px",bg:"blue.500",color:"white",px:1,py:"1px",borderRadius:"sm",fontSize:"10px",fontWeight:"medium",cursor:"pointer",onClick,_hover:{bg:"blue.600"},zIndex:10,children:isEditing?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_yamada_ui_react__WEBPACK_IMPORTED_MODULE_1__.p,{value,onChange,onKeyDown,onCompositionStart,onCompositionEnd,onBlur,size:"xs",autoFocus:!0,w:"60px",h:"16px",p:0,fontSize:"10px",bg:"white",color:"black",border:"none",_focus:{boxShadow:"none",outline:"none"}}):displayValue})};VariableNameEditor.__docgenInfo={description:"",methods:[],displayName:"VariableNameEditor"}},"./features/flowchart/hooks/mermaid.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CP:()=>formatMermaidShape,I$:()=>generateMermaidCode,UF:()=>getArrowTypeSymbol,UY:()=>parseMermaidCode,Vc:()=>getArrowTypeDisplayName});const RESERVED_WORDS=new Set(["end","start","subgraph","class","classDef","click","style","linkStyle","direction","flowchart","graph","if","else","elseif","while","for","function","return","break","continue"]),getSafeVariableName=variableName=>{if(!variableName||""===variableName.trim())return"node_unnamed";let safeName=variableName.trim();return RESERVED_WORDS.has(safeName.toLowerCase())&&(safeName=`node_${safeName}`),/^[0-9]/.test(safeName)&&(safeName=`_${safeName}`),safeName=safeName.replace(/\s+/g,"_"),safeName=safeName.replace(/[^\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]/g,"_"),safeName},formatMermaidShape=(shapeType,label)=>{switch(shapeType){case"rectangle":default:return`[${label}]`;case"diamond":return`{${label}}`;case"rounded":return`(${label})`;case"circle":return`((${label}))`;case"hexagon":return`{{${label}}}`;case"stadium":return`([${label}])`}},getArrowTypeSymbol=arrowType=>{switch(arrowType){case"arrow":default:return"→";case"thick":return"⇒";case"dotted":return"⇢";case"invisible":return"～";case"bidirectional":return"↔";case"bidirectional-thick":return"⇔"}},getArrowTypeDisplayName=arrowType=>{switch(arrowType){case"arrow":default:return"通常の矢印 (->)";case"thick":return"太い矢印 (==>)";case"dotted":return"点線矢印 (-.->)";case"invisible":return"非表示 (~~~)";case"bidirectional":return"双方向矢印 (<->)";case"bidirectional-thick":return"太い双方向矢印 (<==>)"}},generateMermaidCode=(flowData,direction="TD")=>{let code=`flowchart ${direction}\n`;return flowData.nodes.forEach(node=>{const variableName=node.data.variableName||`node${node.id}`,safeVariableName=getSafeVariableName(variableName),shapeType=node.data.shapeType||"rectangle",label=node.data.label||"",shapeCode=formatMermaidShape(shapeType,label);code+=`    ${safeVariableName}${shapeCode}\n`}),flowData.edges.forEach(edge=>{const sourceNode=flowData.nodes.find(node=>node.id===edge.source),targetNode=flowData.nodes.find(node=>node.id===edge.target);if(sourceNode&&targetNode){var _edge_data,_edge_data1;const sourceVariableName=getSafeVariableName(sourceNode.data.variableName||`node${sourceNode.id}`),targetVariableName=getSafeVariableName(targetNode.data.variableName||`node${targetNode.id}`),edgeLabel=null===(_edge_data=edge.data)||void 0===_edge_data?void 0:_edge_data.label,arrowCode=((arrowType="arrow",label)=>{const hasLabel=label&&""!==label.trim(),sanitizedLabel=hasLabel?(label=>label&&""!==label.trim()?/^\d+$/.test(label.trim())?label.trim():/^[a-zA-Z0-9\-_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF\s]+$/.test(label)?label:`"${label.replace(/"/g,'\\"')}"`:label)(label):"";switch(arrowType){case"arrow":default:return hasLabel?` --\x3e|${sanitizedLabel}| `:" --\x3e ";case"thick":return hasLabel?` ==>|${sanitizedLabel}| `:" ==> ";case"dotted":return hasLabel?` -. ${sanitizedLabel} .-> `:" -.-> ";case"invisible":return hasLabel?` ~~~|${sanitizedLabel}| `:" ~~~ ";case"bidirectional":return hasLabel?` <--\x3e|${sanitizedLabel}| `:" <--\x3e ";case"bidirectional-thick":return hasLabel?` <==${sanitizedLabel}==> `:" <==> "}})((null===(_edge_data1=edge.data)||void 0===_edge_data1?void 0:_edge_data1.arrowType)||"arrow",edgeLabel);code+=`    ${sourceVariableName}${arrowCode}${targetVariableName}\n`}}),code},parseMermaidCode=mermaidCode=>{const result={nodes:[],edges:[]};if(!mermaidCode||""===mermaidCode.trim())return result;const contentLines=mermaidCode.split("\n").map(line=>line.trim()).filter(line=>line).filter(line=>!line.startsWith("flowchart")&&!line.startsWith("graph")),nodeRegistry=new Map;for(const line of contentLines){const nodeMatch=parseNodeDefinition(line);nodeMatch&&nodeRegistry.set(nodeMatch.id,nodeMatch)}for(const line of contentLines){const edgeMatch=parseEdgeDefinition(line);if(edgeMatch){if(!nodeRegistry.has(edgeMatch.source)){const sourceNodeInfo=extractNodeFromEdgeLine(line,edgeMatch.source);nodeRegistry.set(edgeMatch.source,sourceNodeInfo)}if(!nodeRegistry.has(edgeMatch.target)){const targetNodeInfo=extractNodeFromEdgeLine(line,edgeMatch.target);nodeRegistry.set(edgeMatch.target,targetNodeInfo)}result.edges.push(edgeMatch)}}return result.nodes=Array.from(nodeRegistry.values()),result},extractNodeFromEdgeLine=(line,nodeId)=>{const shapePatterns=[{pattern:"\\[([^\\]]*)\\]",shape:"rectangle"},{pattern:"\\(\\(([^\\)]*)\\)\\)",shape:"circle"},{pattern:"\\{\\{([^\\}]*)\\}\\}",shape:"hexagon"},{pattern:"\\(\\[([^\\]]*)\\]\\)",shape:"stadium"},{pattern:"\\(([^\\)]*)\\)",shape:"rounded"},{pattern:"\\{([^\\}]*)\\}",shape:"diamond"}];for(const{pattern,shape}of shapePatterns){const regex=new RegExp(`${nodeId}${pattern}`),match=line.match(regex);if(match)return{id:nodeId,variableName:nodeId,label:match[1]||nodeId,shapeType:shape}}return{id:nodeId,variableName:nodeId,label:nodeId,shapeType:"rectangle"}},parseNodeDefinition=line=>{if(line.includes("--\x3e")||line.includes("==>")||line.includes("-.->")||line.includes("~~~")||line.includes("<--\x3e")||line.includes("<==>"))return null;const patterns=[{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\[([^\]]*)\]$/,shape:"rectangle"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\(\(([^)]*)\)\)$/,shape:"circle"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\{\{([^}]*)\}\}$/,shape:"hexagon"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\(\[([^\]]*)\]\)$/,shape:"stadium"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\(([^)]*)\)$/,shape:"rounded"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)\{([^}]*)\}$/,shape:"diamond"},{regex:/^([a-zA-Z0-9_\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF]+)$/,shape:"rectangle"}];for(const pattern of patterns){const match=line.match(pattern.regex);if(match){const id=match[1],label=void 0!==match[2]?match[2]:id;if(id.includes(" "))continue;return{id,variableName:id,label,shapeType:pattern.shape}}}return null},parseEdgeDefinition=line=>{const nodeId="[a-zA-Z0-9_\\u3040-\\u309F\\u30A0-\\u30FF\\u4E00-\\u9FAF]+",nodeShape="(?:\\[[^\\]]*\\]|\\([^)]*\\)|\\{[^}]*\\}|\\(\\([^)]*\\)\\)|\\{\\{[^}]*\\}\\}|\\(\\[[^\\]]*\\]\\))?",patterns=[{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*<==\\s*(.+?)\\s*==>\\s*(${nodeId})${nodeShape}$`),arrowType:"bidirectional-thick",labelPosition:"middle"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*<==>\\s*(${nodeId})${nodeShape}$`),arrowType:"bidirectional-thick"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*<--\x3e\\s*\\|\\s*([^|]*)\\s*\\|\\s*(${nodeId})${nodeShape}$`),arrowType:"bidirectional"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*<--\\s*(.+?)\\s*--\x3e\\s*(${nodeId})${nodeShape}$`),arrowType:"bidirectional",labelPosition:"middle"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*<--\x3e\\s*(${nodeId})${nodeShape}$`),arrowType:"bidirectional"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*-\\.\\s*(.+?)\\s*\\.->\\s*(${nodeId})${nodeShape}$`),arrowType:"dotted",labelPosition:"sides"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*-\\.\\s*->\\s*(${nodeId})${nodeShape}$`),arrowType:"dotted"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*==>\\s*\\|\\s*([^|]*)\\s*\\|\\s*(${nodeId})${nodeShape}$`),arrowType:"thick"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*==\\s*(.+?)\\s*==>\\s*(${nodeId})${nodeShape}$`),arrowType:"thick"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*==>\\s*(${nodeId})${nodeShape}$`),arrowType:"thick"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*--\x3e\\s*\\|\\s*([^|]*)\\s*\\|\\s*(${nodeId})${nodeShape}$`),arrowType:"arrow"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*--\\s*(.+?)\\s*--\x3e\\s*(${nodeId})${nodeShape}$`),arrowType:"arrow"},{regex:new RegExp(`^(${nodeId})${nodeShape}\\s*--\x3e\\s*(${nodeId})${nodeShape}$`),arrowType:"arrow"}];for(const pattern of patterns){const match=line.match(pattern.regex);if(match){let source,target,label="";return"bidirectional-thick"===pattern.arrowType&&match.length>=4&&match[2]&&""!==match[2].trim()||"sides"===pattern.labelPosition&&match.length>=4||4===match.length?(source=match[1],label=match[2].trim(),target=match[3]):(source=match[1],target=match[2]),{id:`${source}-${target}`,source,target,label,arrowType:pattern.arrowType}}}return null}},"./features/flowchart/stories/editor/variable-name-editor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllShapes:()=>AllShapes,CircleShape:()=>CircleShape,Default:()=>Default,DiamondShape:()=>DiamondShape,Editing:()=>Editing,Empty:()=>Empty,HexagonShape:()=>HexagonShape,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./features/flowchart/components/editor/variable-name-editor.tsx");const __WEBPACK_DEFAULT_EXPORT__={title:"components/editor/VariableNameEditor",component:_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,tags:["autodocs"],argTypes:{value:{control:"text",description:"変数名"},isEditing:{control:"boolean",description:"編集モードかどうか"},shapeType:{control:"select",options:["rectangle","diamond","rounded","circle","hexagon","stadium"],description:"ノード形状タイプ"}},parameters:{docs:{description:{component:"VariableNameEditorコンポーネント\n@description ノードの変数名を表示・編集するコンポーネント\n- クリックで編集モードに切り替わる\n- Enterキーまたはフォーカス外しで編集を確定\n- 形状タイプに応じた記号表示（Mermaid記法）\n- ノードの左上に配置される小さなバッジ型エディタ"}}}},Default={render:()=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("node1"),[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isComposing,setIsComposing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",width:"200px",height:"100px",padding:"20px",border:"1px solid #ccc"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,{value,isEditing,shapeType:"rectangle",onClick:()=>setIsEditing(!0),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing||setIsEditing(!1)},onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onBlur:()=>setIsEditing(!1)})})}},Editing={render:()=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("editNode"),[isComposing,setIsComposing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",width:"200px",height:"100px",padding:"20px",border:"1px solid #ccc"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,{value,isEditing:!0,shapeType:"rectangle",onClick:()=>{},onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing||alert("Enterキー押下")},onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onBlur:()=>alert("フォーカスアウト")})})}},CircleShape={render:()=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("circleNode"),[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isComposing,setIsComposing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",width:"200px",height:"100px",padding:"20px",border:"1px solid #ccc"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,{value,isEditing,shapeType:"circle",onClick:()=>setIsEditing(!0),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing||setIsEditing(!1)},onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onBlur:()=>setIsEditing(!1)})})}},DiamondShape={render:()=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("decision"),[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isComposing,setIsComposing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",width:"200px",height:"100px",padding:"20px",border:"1px solid #ccc"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,{value,isEditing,shapeType:"diamond",onClick:()=>setIsEditing(!0),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing||setIsEditing(!1)},onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onBlur:()=>setIsEditing(!1)})})}},HexagonShape={render:()=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("process"),[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isComposing,setIsComposing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",width:"200px",height:"100px",padding:"20px",border:"1px solid #ccc"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,{value,isEditing,shapeType:"hexagon",onClick:()=>setIsEditing(!0),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing||setIsEditing(!1)},onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onBlur:()=>setIsEditing(!1)})})}},Empty={render:()=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isComposing,setIsComposing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{position:"relative",width:"200px",height:"100px",padding:"20px",border:"1px solid #ccc"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,{value,isEditing,shapeType:"rectangle",onClick:()=>setIsEditing(!0),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing||setIsEditing(!1)},onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onBlur:()=>setIsEditing(!1)})})}},AllShapes={render:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px"},children:["rectangle","circle","diamond","hexagon","stadium","rounded"].map(shape=>{const[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(`${shape}Node`),[isEditing,setIsEditing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isComposing,setIsComposing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{style:{position:"relative",width:"180px",height:"100px",padding:"20px",border:"1px solid #ccc"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{fontSize:"12px",marginBottom:"10px",textAlign:"center"},children:shape}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_features_flowchart_components_editor_variable_name_editor__WEBPACK_IMPORTED_MODULE_2__.J,{value,isEditing,shapeType:shape,onClick:()=>setIsEditing(!0),onChange:e=>setValue(e.target.value),onKeyDown:e=>{"Enter"!==e.key||isComposing||setIsEditing(!1)},onCompositionStart:()=>setIsComposing(!0),onCompositionEnd:()=>setIsComposing(!1),onBlur:()=>setIsEditing(!1)})]},shape)})})},__namedExportsOrder=["Default","Editing","CircleShape","DiamondShape","HexagonShape","Empty","AllShapes"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const [value, setValue] = useState("node1");\n    const [isEditing, setIsEditing] = useState(false);\n    const [isComposing, setIsComposing] = useState(false);\n    return <div style={{\n      position: "relative",\n      width: "200px",\n      height: "100px",\n      padding: "20px",\n      border: "1px solid #ccc"\n    }}>\n        <VariableNameEditor value={value} isEditing={isEditing} shapeType="rectangle" onClick={() => setIsEditing(true)} onChange={e => setValue(e.target.value)} onKeyDown={e => {\n        if (e.key === "Enter" && !isComposing) {\n          setIsEditing(false);\n        }\n      }} onCompositionStart={() => setIsComposing(true)} onCompositionEnd={() => setIsComposing(false)} onBlur={() => setIsEditing(false)} />\n      </div>;\n  }\n}',...Default.parameters?.docs?.source},description:{story:"基本状態: Rectangle（長方形）",...Default.parameters?.docs?.description}}},Editing.parameters={...Editing.parameters,docs:{...Editing.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const [value, setValue] = useState("editNode");\n    const [isComposing, setIsComposing] = useState(false);\n    return <div style={{\n      position: "relative",\n      width: "200px",\n      height: "100px",\n      padding: "20px",\n      border: "1px solid #ccc"\n    }}>\n        <VariableNameEditor value={value} isEditing={true} shapeType="rectangle" onClick={() => {}} onChange={e => setValue(e.target.value)} onKeyDown={e => {\n        if (e.key === "Enter" && !isComposing) {\n          alert("Enterキー押下");\n        }\n      }} onCompositionStart={() => setIsComposing(true)} onCompositionEnd={() => setIsComposing(false)} onBlur={() => alert("フォーカスアウト")} />\n      </div>;\n  }\n}',...Editing.parameters?.docs?.source},description:{story:"編集モード",...Editing.parameters?.docs?.description}}},CircleShape.parameters={...CircleShape.parameters,docs:{...CircleShape.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const [value, setValue] = useState("circleNode");\n    const [isEditing, setIsEditing] = useState(false);\n    const [isComposing, setIsComposing] = useState(false);\n    return <div style={{\n      position: "relative",\n      width: "200px",\n      height: "100px",\n      padding: "20px",\n      border: "1px solid #ccc"\n    }}>\n        <VariableNameEditor value={value} isEditing={isEditing} shapeType="circle" onClick={() => setIsEditing(true)} onChange={e => setValue(e.target.value)} onKeyDown={e => {\n        if (e.key === "Enter" && !isComposing) {\n          setIsEditing(false);\n        }\n      }} onCompositionStart={() => setIsComposing(true)} onCompositionEnd={() => setIsComposing(false)} onBlur={() => setIsEditing(false)} />\n      </div>;\n  }\n}',...CircleShape.parameters?.docs?.source},description:{story:"各形状タイプ: Circle（円形）",...CircleShape.parameters?.docs?.description}}},DiamondShape.parameters={...DiamondShape.parameters,docs:{...DiamondShape.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const [value, setValue] = useState("decision");\n    const [isEditing, setIsEditing] = useState(false);\n    const [isComposing, setIsComposing] = useState(false);\n    return <div style={{\n      position: "relative",\n      width: "200px",\n      height: "100px",\n      padding: "20px",\n      border: "1px solid #ccc"\n    }}>\n        <VariableNameEditor value={value} isEditing={isEditing} shapeType="diamond" onClick={() => setIsEditing(true)} onChange={e => setValue(e.target.value)} onKeyDown={e => {\n        if (e.key === "Enter" && !isComposing) {\n          setIsEditing(false);\n        }\n      }} onCompositionStart={() => setIsComposing(true)} onCompositionEnd={() => setIsComposing(false)} onBlur={() => setIsEditing(false)} />\n      </div>;\n  }\n}',...DiamondShape.parameters?.docs?.source},description:{story:"各形状タイプ: Diamond（菱形）",...DiamondShape.parameters?.docs?.description}}},HexagonShape.parameters={...HexagonShape.parameters,docs:{...HexagonShape.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const [value, setValue] = useState("process");\n    const [isEditing, setIsEditing] = useState(false);\n    const [isComposing, setIsComposing] = useState(false);\n    return <div style={{\n      position: "relative",\n      width: "200px",\n      height: "100px",\n      padding: "20px",\n      border: "1px solid #ccc"\n    }}>\n        <VariableNameEditor value={value} isEditing={isEditing} shapeType="hexagon" onClick={() => setIsEditing(true)} onChange={e => setValue(e.target.value)} onKeyDown={e => {\n        if (e.key === "Enter" && !isComposing) {\n          setIsEditing(false);\n        }\n      }} onCompositionStart={() => setIsComposing(true)} onCompositionEnd={() => setIsComposing(false)} onBlur={() => setIsEditing(false)} />\n      </div>;\n  }\n}',...HexagonShape.parameters?.docs?.source},description:{story:"各形状タイプ: Hexagon（六角形）",...HexagonShape.parameters?.docs?.description}}},Empty.parameters={...Empty.parameters,docs:{...Empty.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const [value, setValue] = useState("");\n    const [isEditing, setIsEditing] = useState(false);\n    const [isComposing, setIsComposing] = useState(false);\n    return <div style={{\n      position: "relative",\n      width: "200px",\n      height: "100px",\n      padding: "20px",\n      border: "1px solid #ccc"\n    }}>\n        <VariableNameEditor value={value} isEditing={isEditing} shapeType="rectangle" onClick={() => setIsEditing(true)} onChange={e => setValue(e.target.value)} onKeyDown={e => {\n        if (e.key === "Enter" && !isComposing) {\n          setIsEditing(false);\n        }\n      }} onCompositionStart={() => setIsComposing(true)} onCompositionEnd={() => setIsComposing(false)} onBlur={() => setIsEditing(false)} />\n      </div>;\n  }\n}',...Empty.parameters?.docs?.source},description:{story:"空の変数名",...Empty.parameters?.docs?.description}}},AllShapes.parameters={...AllShapes.parameters,docs:{...AllShapes.parameters?.docs,source:{originalSource:'{\n  render: () => {\n    const shapes: MermaidShapeType[] = ["rectangle", "circle", "diamond", "hexagon", "stadium", "rounded"];\n    return <div style={{\n      display: "flex",\n      flexWrap: "wrap",\n      gap: "20px"\n    }}>\n        {shapes.map(shape => {\n        const [value, setValue] = useState(`${shape}Node`);\n        const [isEditing, setIsEditing] = useState(false);\n        const [isComposing, setIsComposing] = useState(false);\n        return <div key={shape} style={{\n          position: "relative",\n          width: "180px",\n          height: "100px",\n          padding: "20px",\n          border: "1px solid #ccc"\n        }}>\n              <div style={{\n            fontSize: "12px",\n            marginBottom: "10px",\n            textAlign: "center"\n          }}>\n                {shape}\n              </div>\n              <VariableNameEditor value={value} isEditing={isEditing} shapeType={shape} onClick={() => setIsEditing(true)} onChange={e => setValue(e.target.value)} onKeyDown={e => {\n            if (e.key === "Enter" && !isComposing) {\n              setIsEditing(false);\n            }\n          }} onCompositionStart={() => setIsComposing(true)} onCompositionEnd={() => setIsComposing(false)} onBlur={() => setIsEditing(false)} />\n            </div>;\n      })}\n      </div>;\n  }\n}',...AllShapes.parameters?.docs?.source},description:{story:"複数の形状を並べて比較",...AllShapes.parameters?.docs?.description}}}},"./node_modules/.pnpm/@yamada-ui+form-control@2.1.15_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/form-control/dist/chunk-6MABFBBX.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JU:()=>Label,vA:()=>useFormControlProps});var _yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+core@1.17.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/core/dist/index.mjs"),_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+utils@1.7.2_react@18.3.1/node_modules/@yamada-ui/utils/dist/chunk-EM4VFLLU.mjs"),_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+utils@1.7.2_react@18.3.1/node_modules/@yamada-ui/utils/dist/chunk-4W6Z56I5.mjs"),_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+utils@1.7.2_react@18.3.1/node_modules/@yamada-ui/utils/dist/chunk-23I7TQOH.mjs"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),[FormControlContextProvider,useFormControlContext]=(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.q6)({name:"FormControlContext",strict:!1}),[FormControlStylesProvider,useFormControlStyles]=(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.q6)({name:"FormControlStyleContext",strict:!1}),FormControl=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.Rf)(({id,...props},ref)=>{const[styles,mergedProps]=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.hw)("FormControl",props),uuid=(0,react__WEBPACK_IMPORTED_MODULE_4__.useId)(),labelId=(0,react__WEBPACK_IMPORTED_MODULE_4__.useId)(),{className,children,isDisabled=!1,disabled=isDisabled,errorMessage,helperMessage,isInvalid=!1,invalid=isInvalid,isReadOnly=!1,isReplace=!0,isRequired=!1,label,optionalIndicator,readOnly=isReadOnly,replace=isReplace,required=isRequired,requiredIndicator,errorMessageProps,helperMessageProps,labelProps,...rest}=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.fN)(mergedProps),[focused,setFocused]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(!1),validChildren=(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.ag)(children),isCustomLabel=!!(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cf)(validChildren,Label),isCustomHelperMessage=!!(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cf)(validChildren,HelperMessage),isCustomErrorMessage=!!(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cf)(validChildren,ErrorMessage),css={...styles.container};return null!=id||(id=uuid),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormControlContextProvider,{value:{id,disabled,focused,invalid,labelId,readOnly,replace,required,onBlur:()=>setFocused(!1),onFocus:()=>setFocused(!0)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(FormControlStylesProvider,{value:styles,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.ui.div,{ref,className:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cx)("ui-form__control",className),"data-disabled":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(disabled),"data-focus":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(focused),"data-invalid":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(invalid),"data-readonly":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(readOnly),__css:css,...rest,children:[!isCustomLabel&&label?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(Label,{optionalIndicator,requiredIndicator,...labelProps,children:label}):null,children,!isCustomHelperMessage&&helperMessage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(HelperMessage,{...helperMessageProps,children:helperMessage}):null,!isCustomErrorMessage&&errorMessage?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(ErrorMessage,{...errorMessageProps,children:errorMessage}):null]})})})});FormControl.displayName="FormControl",FormControl.__ui__="FormControl";var useFormControlProps=({id,disabled,invalid,isDisabled,isInvalid,isReadOnly,isRequired,readOnly,required,onBlur,onFocus,...rest})=>{const control=useFormControlContext();return null!=disabled||(disabled=null!=isDisabled?isDisabled:null==control?void 0:control.disabled),null!=required||(required=null!=isRequired?isRequired:null==control?void 0:control.required),null!=readOnly||(readOnly=null!=isReadOnly?isReadOnly:null==control?void 0:control.readOnly),null!=invalid||(invalid=null!=isInvalid?isInvalid:null==control?void 0:control.invalid),{id:null!=id?id:null==control?void 0:control.id,"aria-disabled":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.rq)(disabled),"aria-invalid":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.rq)(invalid),"aria-readonly":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.rq)(readOnly),"aria-required":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.rq)(required),"data-readonly":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(readOnly),disabled,readOnly,required,onBlur:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_3__.ws)(null==control?void 0:control.onBlur,onBlur),onFocus:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_3__.ws)(null==control?void 0:control.onFocus,onFocus),...disabled||readOnly?{_active:{},_focus:{},_focusVisible:{},_hover:{},_invalid:{}}:{},...rest}},Label=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.Rf)(({id,htmlFor,className,children,isRequired,optionalIndicator=null,required:requiredProp=isRequired,requiredIndicator=null,...rest},ref)=>{var _a,_b;const{id:formControlId,disabled,focused,invalid,labelId,readOnly,required}=null!=(_a=useFormControlContext())?_a:{},css={display:"block",pointerEvents:readOnly?"none":void 0,...(null!=(_b=useFormControlStyles())?_b:{}).label};return null!=id||(id=labelId),null!=requiredProp||(requiredProp=required),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.ui.label,{id,ref,htmlFor:null!=htmlFor?htmlFor:formControlId,className:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cx)("ui-form__label",className),style:{cursor:disabled?"not-allowed":void 0},"data-disabled":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(disabled),"data-focus":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(focused),"data-invalid":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(invalid),"data-readonly":(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.sE)(readOnly),__css:css,...rest,children:[children,requiredProp?requiredIndicator?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(RequiredIndicator,{children:requiredIndicator}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(RequiredIndicator,{}):optionalIndicator]})});Label.displayName="Label",Label.__ui__="Label";var RequiredIndicator=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.Rf)(({className,children,...rest},ref)=>{var _a;const css={...(null!=(_a=useFormControlStyles())?_a:{}).requiredIndicator};return(0,react__WEBPACK_IMPORTED_MODULE_4__.isValidElement)(children)?children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.ui.span,{ref,className:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cx)("ui-form__required-indicator",className),"aria-hidden":!0,role:"presentation",__css:css,...rest,children:null!=children?children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:"*"})})});RequiredIndicator.displayName="RequiredIndicator",RequiredIndicator.__ui__="RequiredIndicator";var HelperMessage=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.Rf)(({className,...rest},ref)=>{var _a,_b;const{id,invalid,replace}=null!=(_a=useFormControlContext())?_a:{},css={...(null!=(_b=useFormControlStyles())?_b:{}).helperMessage};return replace&&invalid?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.ui.span,{ref,className:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cx)("ui-form__helper-message",className),"aria-describedby":id,__css:css,...rest})});HelperMessage.displayName="HelperMessage",HelperMessage.__ui__="HelperMessage";var ErrorMessage=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.Rf)(({className,...rest},ref)=>{var _a,_b;const{invalid}=null!=(_a=useFormControlContext())?_a:{},css={...(null!=(_b=useFormControlStyles())?_b:{}).errorMessage};return invalid?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.ui.span,{ref,className:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_1__.cx)("ui-form__error-message",className),"aria-live":"polite",__css:css,...rest}):null});ErrorMessage.displayName="ErrorMessage",ErrorMessage.__ui__="ErrorMessage"},"./node_modules/.pnpm/@yamada-ui+input@1.0.56_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/input/dist/chunk-2SDIXUVN.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>Input});var _yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+core@1.17.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/core/dist/index.mjs"),_yamada_ui_form_control__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+form-control@2.1.15_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/form-control/dist/chunk-6MABFBBX.mjs"),_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@yamada-ui+utils@1.7.2_react@18.3.1/node_modules/@yamada-ui/utils/dist/chunk-EM4VFLLU.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_babel-plugin-macros@3.1.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/react/jsx-runtime.js"),Input=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.Rf)((props,ref)=>{const[styles,mergedProps]=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.hw)("Input",props),computedProps=(0,_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.fN)(mergedProps),{className,htmlSize,__css,...rest}=(0,_yamada_ui_form_control__WEBPACK_IMPORTED_MODULE_1__.vA)(computedProps),css={...styles.field,...__css};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_yamada_ui_core__WEBPACK_IMPORTED_MODULE_0__.ui.input,{ref,className:(0,_yamada_ui_utils__WEBPACK_IMPORTED_MODULE_2__.cx)("ui-input",className),size:htmlSize,__css:css,...rest})});Input.displayName="Input",Input.__ui__="Input"},"./node_modules/.pnpm/@yamada-ui+layouts@1.4.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/layouts/dist/chunk-ZJJ7XTJB.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>Box});var Box=(0,__webpack_require__("./node_modules/.pnpm/@yamada-ui+core@1.17.3_@types+react@18.3.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@yamada-ui/core/dist/index.mjs").ui)("div");Box.displayName="Box",Box.__ui__="Box"}}]);